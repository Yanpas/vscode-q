(()=>{var Kr=Object.create;var It=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Zr=Object.getOwnPropertyNames;var Qr=Object.getPrototypeOf,en=Object.prototype.hasOwnProperty;var tn=t=>It(t,"__esModule",{value:!0});var Lt=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var rn=(t,i,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of Zr(i))!en.call(t,l)&&l!=="default"&&It(t,l,{get:()=>i[l],enumerable:!(o=Jr(i,l))||o.enumerable});return t},zt=t=>rn(tn(It(t!=null?Kr(Qr(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Sr=Lt((Dn,Or)=>{Or.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}});var Nr=Lt((An,He)=>{var $r=Sr().default;He.exports.get_types=function(){return Object.keys(He.exports.get_config().types)};He.exports.get_type_config=function(t){let i={};if(He.exports.get_config().types[t]&&Object.assign(i,He.exports.get_config().types[t]),i.type){let o=He.exports.get_type_config(i.type);return Object.assign(o,i),o}else return i};function Rt(t){return t&&typeof t=="object"&&!Array.isArray(t)}function $t(t,...i){if(!i.length)return t;let o=i.shift();if(Rt(t)&&Rt(o))for(let l in o)Rt(o[l])?(t[l]||Object.assign(t,{[l]:{}}),$t(t[l],o[l])):Object.assign(t,{[l]:o[l]});return $t(t,...i)}window.__PERSPECTIVE_CONFIG__=void 0;He.exports.override_config=function(t){window.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),window.__PERSPECTIVE_CONFIG__=$t($r,t)};He.exports.get_config=function(){return window.__PERSPECTIVE_CONFIG__||(window.__PERSPECTIVE_CONFIG__=$t($r,window.__TEMPLATE_CONFIG__||{})),window.__PERSPECTIVE_CONFIG__}});var Cr=Lt((Yt,Gt)=>{(function(t,i){typeof Yt=="object"&&typeof Gt!="undefined"?Gt.exports=i():typeof define=="function"&&define.amd?define(i):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=i()})(Yt,function(){"use strict";var t=1e3,i=6e4,o=36e5,l="millisecond",u="second",d="minute",_="hour",b="day",p="week",y="month",x="quarter",M="year",W="date",R="Invalid Date",Z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Y=function(C,S,E){var I=String(C);return!I||I.length>=S?C:""+Array(S+1-I.length).join(E)+C},fe={s:Y,z:function(C){var S=-C.utcOffset(),E=Math.abs(S),I=Math.floor(E/60),O=E%60;return(S<=0?"+":"-")+Y(I,2,"0")+":"+Y(O,2,"0")},m:function C(S,E){if(S.date()<E.date())return-C(E,S);var I=12*(E.year()-S.year())+(E.month()-S.month()),O=S.clone().add(I,y),V=E-O<0,A=S.clone().add(I+(V?-1:1),y);return+(-(I+(E-O)/(V?O-A:A-O))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:y,y:M,w:p,d:b,D:W,h:_,m:d,s:u,ms:l,Q:x}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},g="en",U={};U[g]=N;var pe=function(C){return C instanceof ge},B=function(C,S,E){var I;if(!C)return g;if(typeof C=="string")U[C]&&(I=C),S&&(U[C]=S,I=C);else{var O=C.name;U[O]=C,I=O}return!E&&I&&(g=I),I||!E&&g},j=function(C,S){if(pe(C))return C.clone();var E=typeof S=="object"?S:{};return E.date=C,E.args=arguments,new ge(E)},q=fe;q.l=B,q.i=pe,q.w=function(C,S){return j(C,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var ge=function(){function C(E){this.$L=B(E.locale,null,!0),this.parse(E)}var S=C.prototype;return S.parse=function(E){this.$d=function(I){var O=I.date,V=I.utc;if(O===null)return new Date(NaN);if(q.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var A=O.match(Z);if(A){var ne=A[2]-1||0,ue=(A[7]||"0").substring(0,3);return V?new Date(Date.UTC(A[1],ne,A[3]||1,A[4]||0,A[5]||0,A[6]||0,ue)):new Date(A[1],ne,A[3]||1,A[4]||0,A[5]||0,A[6]||0,ue)}}return new Date(O)}(E),this.$x=E.x||{},this.init()},S.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},S.$utils=function(){return q},S.isValid=function(){return this.$d.toString()!==R},S.isSame=function(E,I){var O=j(E);return this.startOf(I)<=O&&O<=this.endOf(I)},S.isAfter=function(E,I){return j(E)<this.startOf(I)},S.isBefore=function(E,I){return this.endOf(I)<j(E)},S.$g=function(E,I,O){return q.u(E)?this[I]:this.set(O,E)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(E,I){var O=this,V=!!q.u(I)||I,A=q.p(E),ne=function(me,he){var ye=q.w(O.$u?Date.UTC(O.$y,he,me):new Date(O.$y,he,me),O);return V?ye:ye.endOf(b)},ue=function(me,he){return q.w(O.toDate()[me].apply(O.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(he)),O)},le=this.$W,oe=this.$M,be=this.$D,ve="set"+(this.$u?"UTC":"");switch(A){case M:return V?ne(1,0):ne(31,11);case y:return V?ne(1,oe):ne(0,oe+1);case p:var Le=this.$locale().weekStart||0,Ne=(le<Le?le+7:le)-Le;return ne(V?be-Ne:be+(6-Ne),oe);case b:case W:return ue(ve+"Hours",0);case _:return ue(ve+"Minutes",1);case d:return ue(ve+"Seconds",2);case u:return ue(ve+"Milliseconds",3);default:return this.clone()}},S.endOf=function(E){return this.startOf(E,!1)},S.$set=function(E,I){var O,V=q.p(E),A="set"+(this.$u?"UTC":""),ne=(O={},O[b]=A+"Date",O[W]=A+"Date",O[y]=A+"Month",O[M]=A+"FullYear",O[_]=A+"Hours",O[d]=A+"Minutes",O[u]=A+"Seconds",O[l]=A+"Milliseconds",O)[V],ue=V===b?this.$D+(I-this.$W):I;if(V===y||V===M){var le=this.clone().set(W,1);le.$d[ne](ue),le.init(),this.$d=le.set(W,Math.min(this.$D,le.daysInMonth())).$d}else ne&&this.$d[ne](ue);return this.init(),this},S.set=function(E,I){return this.clone().$set(E,I)},S.get=function(E){return this[q.p(E)]()},S.add=function(E,I){var O,V=this;E=Number(E);var A=q.p(I),ne=function(oe){var be=j(V);return q.w(be.date(be.date()+Math.round(oe*E)),V)};if(A===y)return this.set(y,this.$M+E);if(A===M)return this.set(M,this.$y+E);if(A===b)return ne(1);if(A===p)return ne(7);var ue=(O={},O[d]=i,O[_]=o,O[u]=t,O)[A]||1,le=this.$d.getTime()+E*ue;return q.w(le,this)},S.subtract=function(E,I){return this.add(-1*E,I)},S.format=function(E){var I=this,O=this.$locale();if(!this.isValid())return O.invalidDate||R;var V=E||"YYYY-MM-DDTHH:mm:ssZ",A=q.z(this),ne=this.$H,ue=this.$m,le=this.$M,oe=O.weekdays,be=O.months,ve=function(he,ye,We,Ee){return he&&(he[ye]||he(I,V))||We[ye].substr(0,Ee)},Le=function(he){return q.s(ne%12||12,he,"0")},Ne=O.meridiem||function(he,ye,We){var Ee=he<12?"AM":"PM";return We?Ee.toLowerCase():Ee},me={YY:String(this.$y).slice(-2),YYYY:this.$y,M:le+1,MM:q.s(le+1,2,"0"),MMM:ve(O.monthsShort,le,be,3),MMMM:ve(be,le),D:this.$D,DD:q.s(this.$D,2,"0"),d:String(this.$W),dd:ve(O.weekdaysMin,this.$W,oe,2),ddd:ve(O.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(ne),HH:q.s(ne,2,"0"),h:Le(1),hh:Le(2),a:Ne(ne,ue,!0),A:Ne(ne,ue,!1),m:String(ue),mm:q.s(ue,2,"0"),s:String(this.$s),ss:q.s(this.$s,2,"0"),SSS:q.s(this.$ms,3,"0"),Z:A};return V.replace($,function(he,ye){return ye||me[he]||A.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(E,I,O){var V,A=q.p(I),ne=j(E),ue=(ne.utcOffset()-this.utcOffset())*i,le=this-ne,oe=q.m(this,ne);return oe=(V={},V[M]=oe/12,V[y]=oe,V[x]=oe/3,V[p]=(le-ue)/6048e5,V[b]=(le-ue)/864e5,V[_]=le/o,V[d]=le/i,V[u]=le/t,V)[A]||le,O?oe:q.a(oe)},S.daysInMonth=function(){return this.endOf(y).$D},S.$locale=function(){return U[this.$L]},S.locale=function(E,I){if(!E)return this.$L;var O=this.clone(),V=B(E,I,!0);return V&&(O.$L=V),O},S.clone=function(){return q.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},C}(),ke=ge.prototype;return j.prototype=ke,[["$ms",l],["$s",u],["$m",d],["$H",_],["$W",b],["$M",y],["$y",M],["$D",W]].forEach(function(C){ke[C[1]]=function(S){return this.$g(S,C[0],C[1])}}),j.extend=function(C,S){return C.$i||(C(S,ge,j),C.$i=!0),j},j.locale=B,j.isDayjs=pe,j.unix=function(C){return j(1e3*C)},j.en=U[g],j.Ls=U,j.p={},j})});var qt=Lt((_t,pt)=>{(function(){var t,i,o,l,u,d,_,b,p,y,x,M,W,R,Z,$,N,Y,fe,g,U,pe,B,j,q,ge,ke,C,S,E,I,O,V,A,ne,ue,le,oe,be,ve,Le,Ne,me,he,ye,We,Ee,Oe,Ge,vt,er,ee,tr,rr,nr,ir,Me,sr,or,ar,lr,cr,fr,ur,Ct,Dt,At,dr,hr,_r,yt,wt,pr,Ce,gr,Je,Ae,Ft,de,_e,Te,xt,kt,je=[].slice;de=function(){var e,r,n,s,a;for(e={},a="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),s=0,r=a.length;s<r;s++)n=a[s],e["[object "+n+"]"]=n.toLowerCase();return function(c){var f;return f=Object.prototype.toString.call(c),e[f]||"object"}}(),Oe=function(e,r,n){return r==null&&(r=0),n==null&&(n=1),e<r&&(e=r),e>n&&(e=n),e},_e=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},U=function(e){var r,n;for(e._clipped=!1,e._unclipped=e.slice(0),r=n=0;n<3;r=++n)r<3?((e[r]<0||e[r]>255)&&(e._clipped=!0),e[r]<0&&(e[r]=0),e[r]>255&&(e[r]=255)):r===3&&(e[r]<0&&(e[r]=0),e[r]>1&&(e[r]=1));return e._clipped||delete e._unclipped,e},l=Math.PI,Ce=Math.round,j=Math.cos,S=Math.floor,Me=Math.pow,Ge=Math.log,Je=Math.sin,Ae=Math.sqrt,R=Math.atan2,ee=Math.max,W=Math.abs,_=l*2,u=l/3,i=l/180,d=180/l,g=function(){return arguments[0]instanceof t?arguments[0]:function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,arguments,function(){})},g.default=g,M=[],typeof pt!="undefined"&&pt!==null&&pt.exports!=null&&(pt.exports=g),typeof define=="function"&&define.amd?define([],function(){return g}):(pr=typeof _t!="undefined"&&_t!==null?_t:this,pr.chroma=g),g.version="1.4.1",x={},p=[],y=!1,t=function(){function e(){var r,n,s,a,c,f,h,m,w;for(f=this,n=[],m=0,a=arguments.length;m<a;m++)r=arguments[m],r!=null&&n.push(r);if(n.length>1&&(h=n[n.length-1]),x[h]!=null)f._rgb=U(x[h](_e(n.slice(0,-1))));else{for(y||(p=p.sort(function(L,H){return H.p-L.p}),y=!0),w=0,c=p.length;w<c&&(s=p[w],h=s.test.apply(s,n),!h);w++);h&&(f._rgb=U(x[h].apply(x,n)))}f._rgb==null&&console.warn("unknown format: "+n),f._rgb==null&&(f._rgb=[0,0,0]),f._rgb.length===3&&f._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e}(),g._input=x;g.brewer=Y={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,r;r=[];for(e in Y)r.push(Y[e.toLowerCase()]=Y[e]);return r}(),Te={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g.colors=B=Te,me=function(){var e,r,n,s,a,c,f,h,m;return r=_e(arguments),a=r[0],e=r[1],n=r[2],h=(a+16)/116,f=isNaN(e)?h:h+e/500,m=isNaN(n)?h:h-n/200,h=o.Yn*he(h),f=o.Xn*he(f),m=o.Zn*he(m),c=kt(3.2404542*f-1.5371385*h-.4985314*m),s=kt(-.969266*f+1.8760108*h+.041556*m),n=kt(.0556434*f-.2040259*h+1.0572252*m),[c,s,n,r.length>3?r[3]:1]},kt=function(e){return 255*(e<=.00304?12.92*e:1.055*Me(e,1/2.4)-.055)},he=function(e){return e>o.t1?e*e*e:o.t2*(e-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Ct=function(){var e,r,n,s,a,c,f,h;return s=_e(arguments),n=s[0],r=s[1],e=s[2],a=_r(n,r,e),c=a[0],f=a[1],h=a[2],[116*f-16,500*(c-f),200*(f-h)]},yt=function(e){return(e/=255)<=.04045?e/12.92:Me((e+.055)/1.055,2.4)},xt=function(e){return e>o.t3?Me(e,1/3):e/o.t2+o.t0},_r=function(){var e,r,n,s,a,c,f;return s=_e(arguments),n=s[0],r=s[1],e=s[2],n=yt(n),r=yt(r),e=yt(e),a=xt((.4124564*n+.3575761*r+.1804375*e)/o.Xn),c=xt((.2126729*n+.7151522*r+.072175*e)/o.Yn),f=xt((.0193339*n+.119192*r+.9503041*e)/o.Zn),[a,c,f]},g.lab=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["lab"]),function(){})},x.lab=me,t.prototype.lab=function(){return Ct(this._rgb)},Z=function(e){var r,n,s,a,c,f,h,m,w,L,H;return e=function(){var z,k,D;for(D=[],k=0,z=e.length;k<z;k++)a=e[k],D.push(g(a));return D}(),e.length===2?(w=function(){var z,k,D;for(D=[],k=0,z=e.length;k<z;k++)a=e[k],D.push(a.lab());return D}(),c=w[0],f=w[1],r=function(z){var k,D;return D=function(){var P,G;for(G=[],k=P=0;P<=2;k=++P)G.push(c[k]+z*(f[k]-c[k]));return G}(),g.lab.apply(g,D)}):e.length===3?(L=function(){var z,k,D;for(D=[],k=0,z=e.length;k<z;k++)a=e[k],D.push(a.lab());return D}(),c=L[0],f=L[1],h=L[2],r=function(z){var k,D;return D=function(){var P,G;for(G=[],k=P=0;P<=2;k=++P)G.push((1-z)*(1-z)*c[k]+2*(1-z)*z*f[k]+z*z*h[k]);return G}(),g.lab.apply(g,D)}):e.length===4?(H=function(){var z,k,D;for(D=[],k=0,z=e.length;k<z;k++)a=e[k],D.push(a.lab());return D}(),c=H[0],f=H[1],h=H[2],m=H[3],r=function(z){var k,D;return D=function(){var P,G;for(G=[],k=P=0;P<=2;k=++P)G.push((1-z)*(1-z)*(1-z)*c[k]+3*(1-z)*(1-z)*z*f[k]+3*(1-z)*z*z*h[k]+z*z*z*m[k]);return G}(),g.lab.apply(g,D)}):e.length===5&&(n=Z(e.slice(0,3)),s=Z(e.slice(2,5)),r=function(z){return z<.5?n(z*2):s((z-.5)*2)}),r},g.bezier=function(e){var r;return r=Z(e),r.scale=function(){return g.scale(r)},r},g.cubehelix=function(e,r,n,s,a){var c,f,h;return e==null&&(e=300),r==null&&(r=-1.5),n==null&&(n=1),s==null&&(s=1),a==null&&(a=[0,1]),c=0,de(a)==="array"?f=a[1]-a[0]:(f=0,a=[a,a]),h=function(m){var w,L,H,z,k,D,P,G,ie;return w=_*((e+120)/360+r*m),P=Me(a[0]+f*m,s),D=c!==0?n[0]+m*c:n,L=D*P*(1-P)/2,z=j(w),ie=Je(w),G=P+L*(-.14861*z+1.78277*ie),k=P+L*(-.29227*z-.90649*ie),H=P+L*(1.97294*z),g(U([G*255,k*255,H*255,1]))},h.start=function(m){return m==null?e:(e=m,h)},h.rotations=function(m){return m==null?r:(r=m,h)},h.gamma=function(m){return m==null?s:(s=m,h)},h.hue=function(m){return m==null?n:(n=m,de(n)==="array"?(c=n[1]-n[0],c===0&&(n=n[1])):c=0,h)},h.lightness=function(m){return m==null?a:(de(m)==="array"?(a=m,f=m[1]-m[0]):(a=[m,m],f=0),h)},h.scale=function(){return g.scale(h)},h.hue(n),h},g.random=function(){var e,r,n,s;for(r="0123456789abcdef",e="#",n=s=0;s<6;n=++s)e+=r.charAt(S(Math.random()*16));return new t(e)},M=[],ue=function(e,r,n,s){var a,c,f,h;for(n==null&&(n=.5),s==null&&(s="rgb"),de(e)!=="object"&&(e=g(e)),de(r)!=="object"&&(r=g(r)),f=0,c=M.length;f<c;f++)if(a=M[f],s===a[0]){h=a[1](e,r,n,s);break}if(h==null)throw"color mode "+s+" is not supported";return h.alpha(e.alpha()+n*(r.alpha()-e.alpha()))},g.interpolate=ue,t.prototype.interpolate=function(e,r,n){return ue(this,e,r,n)},g.mix=ue,t.prototype.mix=t.prototype.interpolate,x.rgb=function(){var e,r,n,s;r=_e(arguments),n=[];for(e in r)s=r[e],n.push(s);return n},g.rgb=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(e){return e==null&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},t.prototype.rgba=function(e){return e==null&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},p.push({p:3,test:function(e){var r;if(r=_e(arguments),de(r)==="array"&&r.length===3||r.length===4&&de(r[3])==="number"&&r[3]>=0&&r[3]<=1)return"rgb"}}),x.lrgb=x.rgb,be=function(e,r,n,s){var a,c;return a=e._rgb,c=r._rgb,new t(Ae(Me(a[0],2)*(1-n)+Me(c[0],2)*n),Ae(Me(a[1],2)*(1-n)+Me(c[1],2)*n),Ae(Me(a[2],2)*(1-n)+Me(c[2],2)*n),s)},b=function(e){var r,n,s,a,c,f;for(n=1/e.length,f=[0,0,0,0],a=0,s=e.length;a<s;a++)r=e[a],c=r._rgb,f[0]+=Me(c[0],2)*n,f[1]+=Me(c[1],2)*n,f[2]+=Me(c[2],2)*n,f[3]+=c[3]*n;return f[0]=Ae(f[0]),f[1]=Ae(f[1]),f[2]=Ae(f[2]),f[3]>1&&(f[3]=1),new t(U(f))},M.push(["lrgb",be]),g.average=function(e,r){var n,s,a,c,f,h,m,w,L,H,z,k,D;if(r==null&&(r="rgb"),L=e.length,e=e.map(function(P){return g(P)}),m=e.splice(0,1)[0],r==="lrgb")return b(e);k=m.get(r),c=[],f=0,h=0;for(w in k)k[w]=k[w]||0,c.push(isNaN(k[w])?0:1),r.charAt(w)==="h"&&!isNaN(k[w])&&(n=k[w]/180*l,f+=j(n),h+=Je(n));for(s=m.alpha(),z=0,H=e.length;z<H;z++){a=e[z],D=a.get(r),s+=a.alpha();for(w in k)isNaN(D[w])||(c[w]+=1,r.charAt(w)==="h"?(n=D[w]/180*l,f+=j(n),h+=Je(n)):k[w]+=D[w])}for(w in k)if(r.charAt(w)==="h"){for(n=R(h/c[w],f/c[w])/l*180;n<0;)n+=360;for(;n>=360;)n-=360;k[w]=n}else k[w]=k[w]/c[w];return g(k,r).alpha(s/L)},I=function(e){var r,n,s,a,c,f;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),f=parseInt(e,16),a=f>>16,s=f>>8&255,n=f&255,[a,s,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return e.length===9&&(e=e.substr(1)),f=parseInt(e,16),a=f>>24&255,s=f>>16&255,n=f>>8&255,r=Ce((f&255)/255*100)/100,[a,s,n,r];if(x.css!=null&&(c=x.css(e)))return c;throw"unknown color: "+e},lr=function(e,r){var n,s,a,c,f,h,m;return r==null&&(r="auto"),f=e[0],a=e[1],s=e[2],n=e[3],r==="auto"&&(r=n<1?"rgba":"rgb"),f=Math.round(f),a=Math.round(a),s=Math.round(s),m=f<<16|a<<8|s,h="000000"+m.toString(16),h=h.substr(h.length-6),c="0"+Ce(n*255).toString(16),c=c.substr(c.length-2),"#"+function(){switch(r.toLowerCase()){case"rgba":return h+c;case"argb":return c+h;default:return h}}()},x.hex=function(e){return I(e)},g.hex=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(e){return e==null&&(e="auto"),lr(this._rgb,e)},p.push({p:4,test:function(e){if(arguments.length===1&&de(e)==="string")return"hex"}}),A=function(){var e,r,n,s,a,c,f,h,m,w,L,H,z,k;if(e=_e(arguments),a=e[0],L=e[1],f=e[2],L===0)m=s=r=f*255;else{for(k=[0,0,0],n=[0,0,0],z=f<.5?f*(1+L):f+L-f*L,H=2*f-z,a/=360,k[0]=a+1/3,k[1]=a,k[2]=a-1/3,c=h=0;h<=2;c=++h)k[c]<0&&(k[c]+=1),k[c]>1&&(k[c]-=1),6*k[c]<1?n[c]=H+(z-H)*6*k[c]:2*k[c]<1?n[c]=z:3*k[c]<2?n[c]=H+(z-H)*(2/3-k[c])*6:n[c]=H;w=[Ce(n[0]*255),Ce(n[1]*255),Ce(n[2]*255)],m=w[0],s=w[1],r=w[2]}return e.length>3?[m,s,r,e[3]]:[m,s,r]},fr=function(e,r,n){var s,a,c,f,h;return e!==void 0&&e.length>=3&&(f=e,e=f[0],r=f[1],n=f[2]),e/=255,r/=255,n/=255,c=Math.min(e,r,n),ee=Math.max(e,r,n),a=(ee+c)/2,ee===c?(h=0,s=Number.NaN):h=a<.5?(ee-c)/(ee+c):(ee-c)/(2-ee-c),e===ee?s=(r-n)/(ee-c):r===ee?s=2+(n-e)/(ee-c):n===ee&&(s=4+(e-r)/(ee-c)),s*=60,s<0&&(s+=360),[s,h,a]},g.hsl=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["hsl"]),function(){})},x.hsl=A,t.prototype.hsl=function(){return fr(this._rgb)},ne=function(){var e,r,n,s,a,c,f,h,m,w,L,H,z,k,D,P,G,ie;if(e=_e(arguments),a=e[0],P=e[1],ie=e[2],ie*=255,P===0)m=s=r=ie;else switch(a===360&&(a=0),a>360&&(a-=360),a<0&&(a+=360),a/=60,c=S(a),n=a-c,f=ie*(1-P),h=ie*(1-P*n),G=ie*(1-P*(1-n)),c){case 0:w=[ie,G,f],m=w[0],s=w[1],r=w[2];break;case 1:L=[h,ie,f],m=L[0],s=L[1],r=L[2];break;case 2:H=[f,ie,G],m=H[0],s=H[1],r=H[2];break;case 3:z=[f,h,ie],m=z[0],s=z[1],r=z[2];break;case 4:k=[G,f,ie],m=k[0],s=k[1],r=k[2];break;case 5:D=[ie,f,h],m=D[0],s=D[1],r=D[2]}return[m,s,r,e.length>3?e[3]:1]},ur=function(){var e,r,n,s,a,c,f,h,m;return f=_e(arguments),c=f[0],n=f[1],e=f[2],a=Math.min(c,n,e),ee=Math.max(c,n,e),r=ee-a,m=ee/255,ee===0?(s=Number.NaN,h=0):(h=r/ee,c===ee&&(s=(n-e)/r),n===ee&&(s=2+(e-c)/r),e===ee&&(s=4+(c-n)/r),s*=60,s<0&&(s+=360)),[s,h,m]},g.hsv=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["hsv"]),function(){})},x.hsv=ne,t.prototype.hsv=function(){return ur(this._rgb)},nr=function(e){var r,n,s;return de(e)==="number"&&e>=0&&e<=16777215?(s=e>>16,n=e>>8&255,r=e&255,[s,n,r,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},dr=function(){var e,r,n,s;return s=_e(arguments),n=s[0],r=s[1],e=s[2],(n<<16)+(r<<8)+e},g.num=function(e){return new t(e,"num")},t.prototype.num=function(e){return e==null&&(e="rgb"),dr(this._rgb,e)},x.num=nr,p.push({p:1,test:function(e){if(arguments.length===1&&de(e)==="number"&&e>=0&&e<=16777215)return"num"}}),E=function(){var e,r,n,s,a,c,f,h,m,w,L,H,z,k,D,P,G,ie,we,T;if(n=_e(arguments),h=n[0],a=n[1],r=n[2],a=a/100,f=f/100*255,e=a*255,a===0)H=f=s=r;else switch(h===360&&(h=0),h>360&&(h-=360),h<0&&(h+=360),h/=60,m=S(h),c=h-m,w=r*(1-a),L=w+e*(1-c),we=w+e*c,T=w+e,m){case 0:z=[T,we,w],H=z[0],f=z[1],s=z[2];break;case 1:k=[L,T,w],H=k[0],f=k[1],s=k[2];break;case 2:D=[w,T,we],H=D[0],f=D[1],s=D[2];break;case 3:P=[w,L,T],H=P[0],f=P[1],s=P[2];break;case 4:G=[we,w,T],H=G[0],f=G[1],s=G[2];break;case 5:ie=[T,w,L],H=ie[0],f=ie[1],s=ie[2]}return[H,f,s,n.length>3?n[3]:1]},ar=function(){var e,r,n,s,a,c,f,h,m;return m=_e(arguments),h=m[0],a=m[1],r=m[2],f=Math.min(h,a,r),ee=Math.max(h,a,r),s=ee-f,n=s*100/255,e=f/(255-s)*100,s===0?c=Number.NaN:(h===ee&&(c=(a-r)/s),a===ee&&(c=2+(r-h)/s),r===ee&&(c=4+(h-a)/s),c*=60,c<0&&(c+=360)),[c,n,e]},g.hcg=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["hcg"]),function(){})},x.hcg=E,t.prototype.hcg=function(){return ar(this._rgb)},q=function(e){var r,n,s,a,c,f,h,m;if(e=e.toLowerCase(),g.colors!=null&&g.colors[e])return I(g.colors[e]);if(c=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(h=c.slice(1,4),a=f=0;f<=2;a=++f)h[a]=+h[a];h[3]=1}else if(c=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(h=c.slice(1,5),a=m=0;m<=3;a=++m)h[a]=+h[a];else if(c=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(h=c.slice(1,4),a=r=0;r<=2;a=++r)h[a]=Ce(h[a]*2.55);h[3]=1}else if(c=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(h=c.slice(1,5),a=n=0;n<=2;a=++n)h[a]=Ce(h[a]*2.55);h[3]=+h[3]}else(c=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(s=c.slice(1,4),s[1]*=.01,s[2]*=.01,h=A(s),h[3]=1):(c=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(s=c.slice(1,4),s[1]*=.01,s[2]*=.01,h=A(s),h[3]=+c[4]);return h},or=function(e){var r;if(r=e[3]<1?"rgba":"rgb",r==="rgb")return r+"("+e.slice(0,3).map(Ce).join(",")+")";if(r==="rgba")return r+"("+e.slice(0,3).map(Ce).join(",")+","+e[3]+")"},wt=function(e){return Ce(e*100)/100},V=function(e,r){var n;return n=r<1?"hsla":"hsl",e[0]=wt(e[0]||0),e[1]=wt(e[1]*100)+"%",e[2]=wt(e[2]*100)+"%",n==="hsla"&&(e[3]=r),n+"("+e.join(",")+")"},x.css=function(e){return q(e)},g.css=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(e){if(e==null&&(e="rgb"),e.slice(0,3)==="rgb")return or(this._rgb);if(e.slice(0,3)==="hsl")return V(this.hsl(),this.alpha())},x.named=function(e){return I(Te[e])},p.push({p:5,test:function(e){if(arguments.length===1&&Te[e]!=null)return"named"}}),t.prototype.name=function(e){var r,n;arguments.length&&(Te[e]&&(this._rgb=I(Te[e])),this._rgb[3]=1),r=this.hex("rgb");for(n in Te)if(r===Te[n])return n;return r},ye=function(){var e,r,n,s;return s=_e(arguments),n=s[0],e=s[1],r=s[2],r=r*i,[n,j(r)*e,Je(r)*e]},We=function(){var e,r,n,s,a,c,f,h,m,w,L;return n=_e(arguments),h=n[0],a=n[1],f=n[2],w=ye(h,a,f),e=w[0],r=w[1],s=w[2],L=me(e,r,s),m=L[0],c=L[1],s=L[2],[m,c,s,n.length>3?n[3]:1]},Ne=function(){var e,r,n,s,a,c;return c=_e(arguments),a=c[0],e=c[1],r=c[2],n=Ae(e*e+r*r),s=(R(r,e)*d+360)%360,Ce(n*1e4)===0&&(s=Number.NaN),[a,n,s]},Dt=function(){var e,r,n,s,a,c,f;return c=_e(arguments),a=c[0],n=c[1],r=c[2],f=Ct(a,n,r),s=f[0],e=f[1],r=f[2],Ne(s,e,r)},g.lch=function(){var e;return e=_e(arguments),new t(e,"lch")},g.hcl=function(){var e;return e=_e(arguments),new t(e,"hcl")},x.lch=We,x.hcl=function(){var e,r,n,s;return s=_e(arguments),r=s[0],e=s[1],n=s[2],We([n,e,r])},t.prototype.lch=function(){return Dt(this._rgb)},t.prototype.hcl=function(){return Dt(this._rgb).reverse()},sr=function(e){var r,n,s,a,c,f,h,m,w;return e==null&&(e="rgb"),m=_e(arguments),h=m[0],a=m[1],r=m[2],h=h/255,a=a/255,r=r/255,c=1-Math.max(h,Math.max(a,r)),s=c<1?1/(1-c):0,n=(1-h-c)*s,f=(1-a-c)*s,w=(1-r-c)*s,[n,f,w,c]},pe=function(){var e,r,n,s,a,c,f,h,m;return r=_e(arguments),s=r[0],f=r[1],m=r[2],c=r[3],e=r.length>4?r[4]:1,c===1?[0,0,0,e]:(h=s>=1?0:255*(1-s)*(1-c),a=f>=1?0:255*(1-f)*(1-c),n=m>=1?0:255*(1-m)*(1-c),[h,a,n,e])},x.cmyk=function(){return pe(_e(arguments))},g.cmyk=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return sr(this._rgb)},x.gl=function(){var e,r,n,s,a;for(s=function(){var c,f;c=_e(arguments),f=[];for(r in c)a=c[r],f.push(a);return f}.apply(this,arguments),e=n=0;n<=2;e=++n)s[e]*=255;return s},g.gl=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},At=function(e,r,n){var s;return s=_e(arguments),e=s[0],r=s[1],n=s[2],e=vt(e),r=vt(r),n=vt(n),.2126*e+.7152*r+.0722*n},vt=function(e){return e/=255,e<=.03928?e/12.92:Me((e+.055)/1.055,2.4)},Le=function(e,r,n,s){var a,c;return a=e._rgb,c=r._rgb,new t(a[0]+n*(c[0]-a[0]),a[1]+n*(c[1]-a[1]),a[2]+n*(c[2]-a[2]),s)},M.push(["rgb",Le]),t.prototype.luminance=function(e,r){var n,s,a,c,f;return r==null&&(r="rgb"),arguments.length?(c=this._rgb,e===0?c=[0,0,0,this._rgb[3]]:e===1?c=[255,255,255,this[3]]:(n=At(this._rgb),s=1e-7,a=20,f=function(h,m){var w,L;return L=h.interpolate(m,.5,r),w=L.luminance(),Math.abs(e-w)<s||!a--?L:w>e?f(h,L):f(L,m)},n>e?c=f(g("black"),this).rgba():c=f(this,g("white")).rgba()),g(c).alpha(this.alpha())):At(this._rgb)},Ft=function(e){var r,n,s,a;return a=e/100,a<66?(s=255,n=-155.25485562709179-.44596950469579133*(n=a-2)+104.49216199393888*Ge(n),r=a<20?0:-254.76935184120902+.8274096064007395*(r=a-10)+115.67994401066147*Ge(r)):(s=351.97690566805693+.114206453784165*(s=a-55)-40.25366309332127*Ge(s),n=325.4494125711974+.07943456536662342*(n=a-50)-28.0852963507957*Ge(n),r=255),[s,n,r]},hr=function(){var e,r,n,s,a,c,f,h,m;for(f=_e(arguments),c=f[0],n=f[1],e=f[2],a=1e3,s=4e4,r=.4;s-a>r;)m=(s+a)*.5,h=Ft(m),h[2]/h[0]>=e/c?s=m:a=m;return Ce(m)},g.temperature=g.kelvin=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["temperature"]),function(){})},x.temperature=x.kelvin=x.K=Ft,t.prototype.temperature=function(){return hr(this._rgb)},t.prototype.kelvin=t.prototype.temperature,g.contrast=function(e,r){var n,s,a,c;return((a=de(e))==="string"||a==="number")&&(e=new t(e)),((c=de(r))==="string"||c==="number")&&(r=new t(r)),n=e.luminance(),s=r.luminance(),n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)},g.distance=function(e,r,n){var s,a,c,f,h,m,w;n==null&&(n="lab"),((h=de(e))==="string"||h==="number")&&(e=new t(e)),((m=de(r))==="string"||m==="number")&&(r=new t(r)),c=e.get(n),f=r.get(n),w=0;for(a in c)s=(c[a]||0)-(f[a]||0),w+=s*s;return Math.sqrt(w)},g.deltaE=function(e,r,n,s){var a,c,f,h,m,w,L,H,z,k,D,P,G,ie,we,T,Pe,De,J,se,Se,v,F,K,Q,X,te;for(n==null&&(n=1),s==null&&(s=1),((Pe=de(e))==="string"||Pe==="number")&&(e=new t(e)),((De=de(r))==="string"||De==="number")&&(r=new t(r)),J=e.lab(),a=J[0],f=J[1],m=J[2],se=r.lab(),c=se[0],h=se[1],w=se[2],L=Ae(f*f+m*m),H=Ae(h*h+w*w),F=a<16?.511:.040975*a/(1+.01765*a),Se=.0638*L/(1+.0131*L)+.638,T=L<1e-6?0:R(m,f)*180/l;T<0;)T+=360;for(;T>=360;)T-=360;return K=T>=164&&T<=345?.56+W(.2*j(l*(T+168)/180)):.36+W(.4*j(l*(T+35)/180)),z=L*L*L*L,we=Ae(z/(z+1900)),v=Se*(we*K+1-we),ie=a-c,G=L-H,D=f-h,P=m-w,k=D*D+P*P-G*G,Q=ie/(n*F),X=G/(s*Se),te=v,Ae(Q*Q+X*X+k/(te*te))},t.prototype.get=function(e){var r,n,s,a,c,f;return s=this,c=e.split("."),a=c[0],r=c[1],f=s[a](),r?(n=a.indexOf(r),n>-1?f[n]:console.warn("unknown channel "+r+" in mode "+a)):f},t.prototype.set=function(e,r){var n,s,a,c,f,h;if(a=this,f=e.split("."),c=f[0],n=f[1],n)if(h=a[c](),s=c.indexOf(n),s>-1)if(de(r)==="string")switch(r.charAt(0)){case"+":h[s]+=+r;break;case"-":h[s]+=+r;break;case"*":h[s]*=+r.substr(1);break;case"/":h[s]/=+r.substr(1);break;default:h[s]=+r}else h[s]=r;else console.warn("unknown channel "+n+" in mode "+c);else h=r;return g(h,c).alpha(a.alpha())},t.prototype.clipped=function(){return this._rgb._clipped||!1},t.prototype.alpha=function(e){return arguments.length?g.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},t.prototype.darken=function(e){var r,n;return e==null&&(e=1),n=this,r=n.lab(),r[0]-=o.Kn*e,g.lab(r).alpha(n.alpha())},t.prototype.brighten=function(e){return e==null&&(e=1),this.darken(-e)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(e){var r,n;return e==null&&(e=1),n=this,r=n.lch(),r[1]+=e*o.Kn,r[1]<0&&(r[1]=0),g.lch(r).alpha(n.alpha())},t.prototype.desaturate=function(e){return e==null&&(e=1),this.saturate(-e)},t.prototype.premultiply=function(){var e,r;return r=this.rgb(),e=this.alpha(),g(r[0]*e,r[1]*e,r[2]*e,e)},$=function(e,r,n){if(!$[n])throw"unknown blend mode "+n;return $[n](e,r)},N=function(e){return function(r,n){var s,a;return s=g(n).rgb(),a=g(r).rgb(),g(e(s,a),"rgb")}},C=function(e){return function(r,n){var s,a,c;for(c=[],s=a=0;a<=3;s=++a)c[s]=e(r[s],n[s]);return c}},rr=function(e,r){return e},tr=function(e,r){return e*r/255},ge=function(e,r){return e>r?r:e},Ee=function(e,r){return e>r?e:r},gr=function(e,r){return 255*(1-(1-e/255)*(1-r/255))},ir=function(e,r){return r<128?2*e*r/255:255*(1-2*(1-e/255)*(1-r/255))},fe=function(e,r){return 255*(1-(1-r/255)/(e/255))},ke=function(e,r){return e===255||(e=255*(r/255)/(1-e/255),e>255)?255:e},$.normal=N(C(rr)),$.multiply=N(C(tr)),$.screen=N(C(gr)),$.overlay=N(C(ir)),$.darken=N(C(ge)),$.lighten=N(C(Ee)),$.dodge=N(C(ke)),$.burn=N(C(fe)),g.blend=$,g.analyze=function(e){var r,n,s,a;for(s={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},n=0,r=e.length;n<r;n++)a=e[n],a!=null&&!isNaN(a)&&(s.values.push(a),s.sum+=a,a<s.min&&(s.min=a),a>s.max&&(s.max=a),s.count+=1);return s.domain=[s.min,s.max],s.limits=function(c,f){return g.limits(s,c,f)},s},g.scale=function(e,r){var n,s,a,c,f,h,m,w,L,H,z,k,D,P,G,ie,we,T,Pe,De,J,se,Se;return H="rgb",z=g("#ccc"),G=0,h=!1,f=[0,1],P=[],D=[0,0],n=!1,a=[],k=!1,L=0,w=1,c=!1,s={},ie=!0,m=1,se=function(v){var F,K,Q,X,te,ce;if(v==null&&(v=["#fff","#000"]),v!=null&&de(v)==="string"&&g.brewer!=null&&(v=g.brewer[v]||g.brewer[v.toLowerCase()]||v),de(v)==="array"){for(v.length===1&&(v=[v[0],v[0]]),v=v.slice(0),F=Q=0,X=v.length-1;0<=X?Q<=X:Q>=X;F=0<=X?++Q:--Q)K=v[F],de(K)==="string"&&(v[F]=g(K));for(P.length=0,F=ce=0,te=v.length-1;0<=te?ce<=te:ce>=te;F=0<=te?++ce:--ce)P.push(F/(v.length-1))}return J(),a=v},Pe=function(v){var F,K;if(n!=null){for(K=n.length-1,F=0;F<K&&v>=n[F];)F++;return F-1}return 0},Se=function(v){return v},we=function(v){var F,K,Q,X,te;return te=v,n.length>2&&(X=n.length-1,F=Pe(v),Q=n[0]+(n[1]-n[0])*(0+G*.5),K=n[X-1]+(n[X]-n[X-1])*(1-G*.5),te=L+(n[F]+(n[F+1]-n[F])*.5-Q)/(K-Q)*(w-L)),te},De=function(v,F){var K,Q,X,te,ce,ae,xe,re;if(F==null&&(F=!1),isNaN(v)||v===null)return z;if(F?re=v:n&&n.length>2?(K=Pe(v),re=K/(n.length-2)):w!==L?re=(v-L)/(w-L):re=1,F||(re=Se(re)),m!==1&&(re=Me(re,m)),re=D[0]+re*(1-D[0]-D[1]),re=Math.min(1,Math.max(0,re)),te=Math.floor(re*1e4),ie&&s[te])Q=s[te];else{if(de(a)==="array")for(X=ce=0,xe=P.length-1;0<=xe?ce<=xe:ce>=xe;X=0<=xe?++ce:--ce){if(ae=P[X],re<=ae){Q=a[X];break}if(re>=ae&&X===P.length-1){Q=a[X];break}if(re>ae&&re<P[X+1]){re=(re-ae)/(P[X+1]-ae),Q=g.interpolate(a[X],a[X+1],re,H);break}}else de(a)==="function"&&(Q=a(re));ie&&(s[te]=Q)}return Q},J=function(){return s={}},se(e),T=function(v){var F;return F=g(De(v)),k&&F[k]?F[k]():F},T.classes=function(v){var F;return v!=null?(de(v)==="array"?(n=v,f=[v[0],v[v.length-1]]):(F=g.analyze(f),v===0?n=[F.min,F.max]:n=g.limits(F,"e",v)),T):n},T.domain=function(v){var F,K,Q,X,te,ce,ae;if(!arguments.length)return f;if(L=v[0],w=v[v.length-1],P=[],Q=a.length,v.length===Q&&L!==w)for(te=0,X=v.length;te<X;te++)K=v[te],P.push((K-L)/(w-L));else for(F=ae=0,ce=Q-1;0<=ce?ae<=ce:ae>=ce;F=0<=ce?++ae:--ae)P.push(F/(Q-1));return f=[L,w],T},T.mode=function(v){return arguments.length?(H=v,J(),T):H},T.range=function(v,F){return se(v,F),T},T.out=function(v){return k=v,T},T.spread=function(v){return arguments.length?(G=v,T):G},T.correctLightness=function(v){return v==null&&(v=!0),c=v,J(),c?Se=function(F){var K,Q,X,te,ce,ae,xe,re,ze;for(K=De(0,!0).lab()[0],Q=De(1,!0).lab()[0],xe=K>Q,X=De(F,!0).lab()[0],ce=K+(Q-K)*F,te=X-ce,re=0,ze=1,ae=20;Math.abs(te)>.01&&ae-- >0;)(function(){return xe&&(te*=-1),te<0?(re=F,F+=(ze-F)*.5):(ze=F,F+=(re-F)*.5),X=De(F,!0).lab()[0],te=X-ce})();return F}:Se=function(F){return F},T},T.padding=function(v){return v!=null?(de(v)==="number"&&(v=[v,v]),D=v,T):D},T.colors=function(v,F){var K,Q,X,te,ce,ae,xe,re,ze;if(arguments.length<2&&(F="hex"),ae=[],arguments.length===0)ae=a.slice(0);else if(v===1)ae=[T(.5)];else if(v>1)Q=f[0],K=f[1]-Q,ae=function(){xe=[];for(var $e=0;0<=v?$e<v:$e>v;0<=v?$e++:$e--)xe.push($e);return xe}.apply(this).map(function($e){return T(Q+$e/(v-1)*K)});else{if(e=[],re=[],n&&n.length>2)for(X=ze=1,ce=n.length;1<=ce?ze<ce:ze>ce;X=1<=ce?++ze:--ze)re.push((n[X-1]+n[X])*.5);else re=f;ae=re.map(function($e){return T($e)})}return g[F]&&(ae=ae.map(function($e){return $e[F]()})),ae},T.cache=function(v){return v!=null?(ie=v,T):ie},T.gamma=function(v){return v!=null?(m=v,T):m},T.nodata=function(v){return v!=null?(z=g(v),T):z},T},g.scales==null&&(g.scales={}),g.scales.cool=function(){return g.scale([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},g.scales.hot=function(){return g.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},g.analyze=function(e,r,n){var s,a,c,f,h,m,w;if(h={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},n==null&&(n=function(){return!0}),s=function(L){L!=null&&!isNaN(L)&&(h.values.push(L),h.sum+=L,L<h.min&&(h.min=L),L>h.max&&(h.max=L),h.count+=1)},w=function(L,H){if(n(L,H))return r!=null&&de(r)==="function"?s(r(L)):r!=null&&de(r)==="string"||de(r)==="number"?s(L[r]):s(L)},de(e)==="array")for(f=0,c=e.length;f<c;f++)m=e[f],w(m);else for(a in e)m=e[a],w(m,a);return h.domain=[h.min,h.max],h.limits=function(L,H){return g.limits(h,L,H)},h},g.limits=function(e,r,n){var s,a,c,f,h,m,w,L,H,z,k,D,P,G,ie,we,T,Pe,De,J,se,Se,v,F,K,Q,X,te,ce,ae,xe,re,ze,$e,Ze,Qe,et,tt,rt,nt,mr,it,st,ot,at,lt,ct,ft,ut,dt,Ur,Re,Mt,br,Ie,ht;if(r==null&&(r="equal"),n==null&&(n=7),de(e)==="array"&&(e=g.analyze(e)),K=e.min,ee=e.max,Ur=e.sum,Ie=e.values.sort(function(jt,Pt){return jt-Pt}),n===1)return[K,ee];if(v=[],r.substr(0,1)==="c"&&(v.push(K),v.push(ee)),r.substr(0,1)==="e"){for(v.push(K),J=xe=1,Ze=n-1;1<=Ze?xe<=Ze:xe>=Ze;J=1<=Ze?++xe:--xe)v.push(K+J/n*(ee-K));v.push(ee)}else if(r.substr(0,1)==="l"){if(K<=0)throw"Logarithmic scales are only possible for values > 0";for(Q=Math.LOG10E*Ge(K),F=Math.LOG10E*Ge(ee),v.push(K),J=ht=1,Qe=n-1;1<=Qe?ht<=Qe:ht>=Qe;J=1<=Qe?++ht:--ht)v.push(Me(10,Q+J/n*(F-Q)));v.push(ee)}else if(r.substr(0,1)==="q"){for(v.push(K),J=s=1,it=n-1;1<=it?s<=it:s>=it;J=1<=it?++s:--s)re=(Ie.length-1)*J/n,ze=S(re),ze===re?v.push(Ie[ze]):($e=re-ze,v.push(Ie[ze]*(1-$e)+Ie[ze+1]*$e));v.push(ee)}else if(r.substr(0,1)==="k"){for(te=Ie.length,G=new Array(te),Pe=new Array(n),dt=!0,ce=0,we=null,we=[],we.push(K),J=a=1,st=n-1;1<=st?a<=st:a>=st;J=1<=st?++a:--a)we.push(K+J/n*(ee-K));for(we.push(ee);dt;){for(se=c=0,ot=n-1;0<=ot?c<=ot:c>=ot;se=0<=ot?++c:--c)Pe[se]=0;for(J=f=0,at=te-1;0<=at?f<=at:f>=at;J=0<=at?++f:--f){for(br=Ie[J],X=Number.MAX_VALUE,se=h=0,lt=n-1;0<=lt?h<=lt:h>=lt;se=0<=lt?++h:--h)De=W(we[se]-br),De<X&&(X=De,ie=se);Pe[ie]++,G[J]=ie}for(ae=new Array(n),se=m=0,ct=n-1;0<=ct?m<=ct:m>=ct;se=0<=ct?++m:--m)ae[se]=null;for(J=w=0,ft=te-1;0<=ft?w<=ft:w>=ft;J=0<=ft?++w:--w)T=G[J],ae[T]===null?ae[T]=Ie[J]:ae[T]+=Ie[J];for(se=L=0,ut=n-1;0<=ut?L<=ut:L>=ut;se=0<=ut?++L:--L)ae[se]*=1/Pe[se];for(dt=!1,se=H=0,et=n-1;0<=et?H<=et:H>=et;se=0<=et?++H:--H)if(ae[se]!==we[J]){dt=!0;break}we=ae,ce++,ce>200&&(dt=!1)}for(Se={},se=z=0,tt=n-1;0<=tt?z<=tt:z>=tt;se=0<=tt?++z:--z)Se[se]=[];for(J=k=0,rt=te-1;0<=rt?k<=rt:k>=rt;J=0<=rt?++k:--k)T=G[J],Se[T].push(Ie[J]);for(Re=[],se=D=0,nt=n-1;0<=nt?D<=nt:D>=nt;se=0<=nt?++D:--D)Re.push(Se[se][0]),Re.push(Se[se][Se[se].length-1]);for(Re=Re.sort(function(jt,Pt){return jt-Pt}),v.push(Re[0]),J=P=1,mr=Re.length-1;P<=mr;J=P+=2)Mt=Re[J],!isNaN(Mt)&&v.indexOf(Mt)===-1&&v.push(Mt)}return v},O=function(e,r,n){var s,a,c,f;return s=_e(arguments),e=s[0],r=s[1],n=s[2],isNaN(e)&&(e=0),e/=360,e<1/3?(a=(1-r)/3,f=(1+r*j(_*e)/j(u-_*e))/3,c=1-(a+f)):e<2/3?(e-=1/3,f=(1-r)/3,c=(1+r*j(_*e)/j(u-_*e))/3,a=1-(f+c)):(e-=2/3,c=(1-r)/3,a=(1+r*j(_*e)/j(u-_*e))/3,f=1-(c+a)),f=Oe(n*f*3),c=Oe(n*c*3),a=Oe(n*a*3),[f*255,c*255,a*255,s.length>3?s[3]:1]},cr=function(){var e,r,n,s,a,c,f,h;return f=_e(arguments),c=f[0],r=f[1],e=f[2],_=Math.PI*2,c/=255,r/=255,e/=255,a=Math.min(c,r,e),s=(c+r+e)/3,h=1-a/s,h===0?n=0:(n=(c-r+(c-e))/2,n/=Math.sqrt((c-r)*(c-r)+(c-e)*(r-e)),n=Math.acos(n),e>r&&(n=_-n),n/=_),[n*360,h,s]},g.hsi=function(){return function(e,r,n){n.prototype=e.prototype;var s=new n,a=e.apply(s,r);return Object(a)===a?a:s}(t,je.call(arguments).concat(["hsi"]),function(){})},x.hsi=O,t.prototype.hsi=function(){return cr(this._rgb)},le=function(e,r,n,s){var a,c,f,h,m,w,L,H,z,k,D,P,G;return s==="hsl"?(P=e.hsl(),G=r.hsl()):s==="hsv"?(P=e.hsv(),G=r.hsv()):s==="hcg"?(P=e.hcg(),G=r.hcg()):s==="hsi"?(P=e.hsi(),G=r.hsi()):(s==="lch"||s==="hcl")&&(s="hcl",P=e.hcl(),G=r.hcl()),s.substr(0,1)==="h"&&(f=P[0],k=P[1],w=P[2],h=G[0],D=G[1],L=G[2]),!isNaN(f)&&!isNaN(h)?(h>f&&h-f>180?a=h-(f+360):h<f&&f-h>180?a=h+360-f:a=h-f,c=f+n*a):isNaN(f)?isNaN(h)?c=Number.NaN:(c=h,(w===1||w===0)&&s!=="hsv"&&(z=D)):(c=f,(L===1||L===0)&&s!=="hsv"&&(z=k)),z==null&&(z=k+n*(D-k)),m=w+n*(L-w),H=g[s](c,z,m)},M=M.concat(function(){var e,r,n,s;for(n=["hsv","hsl","hsi","hcl","lch","hcg"],s=[],r=0,e=n.length;r<e;r++)er=n[r],s.push([er,le]);return s}()),ve=function(e,r,n,s){var a,c;return a=e.num(),c=r.num(),g.num(a+(c-a)*n,"num")},M.push(["num",ve]),oe=function(e,r,n,s){var a,c,f;return c=e.lab(),f=r.lab(),a=new t(c[0]+n*(f[0]-c[0]),c[1]+n*(f[1]-c[1]),c[2]+n*(f[2]-c[2]),s)},M.push(["lab",oe])}).call(_t)});var qe=new WeakMap,nn=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?5e6:1e7;function vr(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function yr(t,i,o,l,u){var d={};return Object.keys(l).forEach(function(_){d[_]=l[_]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=o.slice().reverse().reduce(function(_,b){return b(t,i,_)||_},d),u&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(u):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(t,i,d),d=null),d}var Et=0,Xe=0,wr=performance.now(),xr=(t,...i)=>t.map((o,l)=>[o,i[l]]).flat().filter(o=>!!o).join("");function kr(t,i,o){let l=Symbol("private lock"),u=o.value;return o.value=async function(...d){if(this[l]&&(await this[l],this[l]))return void await this[l];let _;this[l]=(()=>{let b,p=new Promise(y=>{b=y});return p.resolve=b,p})();try{_=await u.call(this,...d)}finally{let b=this[l];this[l]=void 0,b.resolve()}return _},o.value.flush=function(){return this[l]},o}var Ot;function Wt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(Wt.prototype,HTMLElement.prototype),Object.setPrototypeOf(Wt,HTMLElement);var sn=(yr((Ot=class extends Wt{create_shadow_dom(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=xr` <style> ${":host{bottom:0;overflow:scroll;overflow-anchor:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch}:host,div.rt-virtual-panel{position:absolute;top:0;left:0;right:0}div.rt-virtual-panel{pointer-events:none}div.rt-scroll-table-clip{position:sticky;contain:strict;overflow-anchor:none;width:100%;height:100%}div.rt-tree-container{display:flex;align-items:center;height:100%}slot{position:absolute;overflow:hidden;overflow-anchor:none}"} </style> <div class="rt-virtual-panel"></div> <div class="rt-scroll-table-clip"> ${"<slot></slot>"} </div> `;let[,t,i]=this.shadowRoot.children;this._table_clip=i,this._virtual_panel=t,this._setup_virtual_scroll()}_setup_virtual_scroll(){this._table_clip&&(this._virtual_mode!=="both"&&this._virtual_mode!=="vertical"||(this._table_clip.style.top="0px"),this._virtual_mode!=="both"&&this._virtual_mode!=="horizontal"||(this._table_clip.style.left="0px"))}_calculate_viewport(t,i,o,l){let{start_row:u,end_row:d}=this._calculate_row_range(t,o),{start_col:_,end_col:b}=this._calculate_column_range(i,l);return this._nrows=t,{start_col:_,end_col:b,start_row:u,end_row:d}}_calculate_row_range(t,i){let{height:o}=this._container_size,l=this._column_sizes.row_height||19,u=this._view_cache.config.column_pivots.length+1,d=Math.max(1,this._virtual_panel.offsetHeight-this.clientHeight),_=Math.max(this.scrollTop,0)/d,b=o/l,p=i?t:this._nrows||0,y=Math.max(0,p+(u-b)),x=Math.ceil(y*_);return{start_row:x,end_row:Math.min(Math.ceil(x+b),t)}}_calculate_column_range(t,i){let o=Math.max(1,this._virtual_panel.offsetWidth-this._container_size.width),l=this.scrollLeft/o,u=this._max_scroll_column(t)+.5;if(this._virtual_mode==="none"||this._virtual_mode==="vertical")return{start_col:0,end_col:1/0};{let d=Math.floor(u*l);return{start_col:d,end_col:d+(!i&&this.table_model.num_columns()||Math.min(t,Math.ceil(this._container_size.width/60)))+1}}}_max_scroll_column(t){let i=0;if(this._view_cache.config.row_pivots.length>0)for(let l of this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length))i+=l;let o=t;for(;i<this._container_size.width&&o>=0;)o--,i+=this._column_sizes.indices[o]||60;return Math.min(t-1,o+1)}_validate_viewport({start_col:t,end_col:i,start_row:o,end_row:l}){let u=this._start_col!==t,d=this._start_row!==o||this._end_row!==l||this._end_col!==i;return this._start_col=t,this._end_col=i,this._start_row=o,this._end_row=l,{invalid_column:u,invalid_row:d}}_update_virtual_panel_width(t,i){if(t)if(this._virtual_mode==="vertical"||this._virtual_mode==="none")this._virtual_panel.style.width=this._column_sizes.indices.reduce((o,l)=>o+l,0)+"px";else{let o=Math.max(1,this._virtual_panel.offsetWidth-this._container_size.width),l=this.scrollLeft/o,u=this._max_scroll_column(i),d=0,_=0;for(;d<u;)_+=this._column_sizes.indices[d]||60,d++;let b=this._container_size.width+_;this._virtual_panel.style.width=b+"px",this.scrollLeft=l*_}}_update_virtual_panel_height(t){let{row_height:i=19}=this._column_sizes,o=this.table_model.header.num_rows()*i,l;if(this._virtual_mode==="horizontal"||this._virtual_mode==="none")l=t*i+o;else{let u=this.clientHeight/(this._table_clip.offsetHeight-o);l=Math.min(nn,t*i*u)}this._virtual_panel.style.height=l+"px"}async draw(t={}){let i=performance.now(),{invalid_viewport:o=!0,preserve_width:l=!1,reset_scroll_position:u=!1,invalid_columns:d=!1}=t;u&&this.reset_scroll(),this._invalid_schema=d||this._invalid_schema;let{num_columns:_,num_rows:b}=await this._view_cache.view(0,0,0,0);this._container_size={width:this._virtual_mode==="none"||this._virtual_mode==="vertical"?1/0:this._table_clip.clientWidth,height:this._virtual_mode==="none"||this._virtual_mode==="horizontal"?1/0:this._table_clip.clientHeight};let p=this._calculate_viewport(b,_,u,d),{invalid_row:y,invalid_column:x}=this._validate_viewport(p);if(this._update_virtual_panel_height(b),this._invalid_schema||y||x||o||x){this.dispatchEvent(new CustomEvent("regular-table-before-update",{bubbles:!0,detail:this}));let W=[];for await(W of this.table_model.draw(this._container_size,this._view_cache,this._selected_id,l,p,_)){this._is_styling=!0;let R=this._style_callbacks;for(let Z of R)await Z({detail:this});if(this._is_styling=!1,!this._invalidated&&W!==void 0)break;this._invalidated=!1}this.table_model.autosize_cells(W),this.table_model.header.reset_header_cache(),l||this._update_virtual_panel_width(this._invalid_schema||x||o,_),this._invalid_schema=!1}var M;M=performance.now()-i,Et=(Et*Xe+M)/(Xe+1),Xe+=1}}).prototype,"draw",[kr],Object.getOwnPropertyDescriptor(Ot.prototype,"draw"),Ot.prototype),Ot),St,on=(yr((St=class extends sn{register_listeners(){this.addEventListener("mousedown",this._on_click.bind(this)),this.addEventListener("dblclick",this._on_dblclick.bind(this)),this.addEventListener("scroll",this._on_scroll.bind(this),{passive:!1}),this._register_glitch_scroll_listeners()}async _on_scroll(t){t.stopPropagation(),t.returnValue=!1,await this.draw({invalid_viewport:!1}),this.dispatchEvent(new CustomEvent("regular-table-scroll"))}_register_glitch_scroll_listeners(){this.addEventListener("mousewheel",this._on_mousewheel.bind(this),{passive:!1}),this.addEventListener("touchstart",this._on_touchstart.bind(this),{passive:!1}),this.addEventListener("touchmove",this._on_touchmove.bind(this),{passive:!1})}_on_mousewheel(t){if(!window.safari)return;let{clientWidth:i,clientHeight:o,scrollTop:l,scrollLeft:u,scrollHeight:d}=this;if(t.deltaY>0&&l+o>=d||t.deltaY<0&&l<=0){t.preventDefault(),t.returnValue=!1;let _=Math.max(1,this._virtual_panel.offsetHeight-o),b=Math.max(1,this._virtual_panel.offsetWidth-i);this.scrollTop=Math.min(_,l+t.deltaY),this.scrollLeft=Math.min(b,u+t.deltaX),this._on_scroll(t)}}_on_touchmove(t){t.preventDefault(),t.returnValue=!1;let{clientWidth:i,clientHeight:o,scrollTop:l,scrollLeft:u}=this,d=Math.max(1,this._virtual_panel.offsetHeight-o),_=Math.max(1,this._virtual_panel.offsetWidth-i);this.scrollTop=Math.min(d,l+(this._memo_touch_startY-t.touches[0].screenY)),this.scrollLeft=Math.min(_,u+(this._memo_touch_startX-t.touches[0].screenX)),this._on_scroll(t)}_on_touchstart(t){this._memo_touch_startY=t.touches[0].screenY,this._memo_touch_startX=t.touches[0].screenX}async _on_dblclick(t){let i=t.target;for(;i.tagName!=="TD"&&i.tagName!=="TH";)if(i=i.parentElement,!this.contains(i))return;let o=t.target.classList.contains("rt-column-resize"),l=qe.get(i);if(o){t.stopImmediatePropagation(),i.style.minWidth="",i.style.maxWidth="",t.shiftKey?(this._column_sizes.override=[],this._column_sizes.auto=[],this._column_sizes.indices=[]):(delete this._column_sizes.override[l.size_key],delete this._column_sizes.auto[l.size_key],delete this._column_sizes.indices[l.size_key]);for(let u of t.shiftKey?[this.table_model.header.cells[this.table_model.header.cells.length-1],...this.table_model.body.cells]:this.table_model.body.cells)for(let d of t.shiftKey?u:[u[l._virtual_x]])d&&(d.style.minWidth="",d.style.maxWidth="",d.classList.remove("rt-cell-clip"));await this.draw()}}async _on_click(t){if(t.button!==0)return;let i=t.target;for(;i.tagName!=="TD"&&i.tagName!=="TH";)if(i=i.parentElement,!this.contains(i))return;let o=t.target.classList.contains("rt-column-resize"),l=qe.get(i);o&&(this._on_resize_column(t,i,l),t.stopImmediatePropagation())}_on_resize_column(t,i,o){let{_virtual_x:l,size_key:u}=o,d=t.pageX,_=l+i.colSpan-1,b=this.table_model.header.get_column_header(_),p=this._column_sizes.indices[u],y=M=>this._on_resize_column_move(M,b,d,p,u,_),x=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x);let M=this._column_sizes.override[u],W=this._column_sizes.indices[u]!==M;this._column_sizes.indices[u]=M,W&&this.draw()};document.addEventListener("mousemove",y),document.addEventListener("mouseup",x)}async _on_resize_column_move(t,i,o,l,u,d){await new Promise(setTimeout);let _=t.pageX-o,b=Math.max(1,l+_);if(this._column_sizes.override[u]=b,_<0)await this.draw({preserve_width:!0});else{i.style.minWidth=b+"px",i.style.maxWidth=b+"px";let p=this._column_sizes.auto[u];for(let y of this.table_model.body.cells){let x=y[d];x&&(x.style.maxWidth=x.style.minWidth=b+"px",x.classList.toggle("rt-cell-clip",p>b))}}}}).prototype,"_on_resize_column_move",[kr],Object.getOwnPropertyDescriptor(St.prototype,"_on_resize_column_move"),St.prototype),St),Mr=class{constructor(i){this._name=i,this._elements=[],this._index=0}reset(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let i=this._elements[this._index];return this._index+=1,i}},Ht=class{constructor(i,o,l){this._column_sizes=i,this._container=o,this._span_factory=new Mr("span"),this.table=l,this.cells=[],this.rows=[]}num_columns(){return this._get_row(Math.max(0,this.rows.length-1)).row_container.length}num_rows(){return this.cells.length}_set_metadata(i,o){qe.set(i,o)}_get_or_create_metadata(i){if(i===void 0)return{};if(qe.has(i))return qe.get(i);{let o={};return qe.set(i,o),o}}_replace_cell(i,o){let{tr:l,row_container:u}=this._get_row(i),d=u[o];return d&&(l.removeChild(d),u.splice(o,1,void 0)),d}_fetch_cell(i,o){if(i<0||o<0)return;let{row_container:l}=this._get_row(i);return l[o]}_get_cell(i="TD",o,l){let{tr:u,row_container:d}=this._get_row(o),_=d[l];if(_||(l<d.length?(_=d[l]=document.createElement(i),u.insertBefore(_,d.slice(l+1).find(b=>b))):(_=d[l]=document.createElement(i),u.appendChild(_))),_.tagName!==i){let b=document.createElement(i);u.replaceChild(b,_),this.cells[o].splice(l,1,b),_=b}return _}_get_row(i){let o=this.rows[i];o||(o=this.rows[i]=document.createElement("tr"),this.table.appendChild(o));let l=this.cells[i];return l||(l=this.cells[i]=[]),{tr:o,row_container:l}}_clean_columns(i){for(let o=0;o<this.rows.length;o++){let l=this.rows[o],u=this.cells[o];this.cells[o]=u.slice(0,i[o]||i);let d=this.cells[o].filter(_=>_!==void 0).length;for(;l.children[d];)l.removeChild(l.children[d])}}_clean_rows(i){for(;this.table.children[i];)this.table.removeChild(this.table.children[i]);this.rows=this.rows.slice(0,i),this.cells=this.cells.slice(0,i)}},Lr=class extends Ht{constructor(...i){super(...i),vr(this,"_group_header_cache",[]),vr(this,"_offset_cache",[])}_draw_group_th(i,o,l){let u=this._get_cell("TH",o,i[o]||0);if(i[o]+=1,u.removeAttribute("colspan"),u.style.minWidth="0",u.textContent="",l instanceof HTMLElement)u.appendChild(l);else{let _=this._span_factory.get("span");_.textContent=l,u.appendChild(_)}let d=this._span_factory.get("span");return d.className="rt-column-resize",u.appendChild(d),u}_draw_group(i,o,l){let u=this._get_or_create_metadata(l);return u.column_header=i,u.value=o,u.value=o,u}_draw_th(i,o,l,u,d){let _=this._get_or_create_metadata(l);if(_.column_header=i,_.value=o,_.size_key=d.length?d[0]:d,!(d.length>1)){let b=this._column_sizes.override[_.size_key],p=this._column_sizes.auto[_.size_key];b?(l.classList.toggle("rt-cell-clip",p>b),l.style.minWidth=b+"px",l.style.maxWidth=b+"px"):p?(l.classList.remove("rt-cell-clip"),l.style.maxWidth="",l.style.minWidth=p+"px"):(l.style.maxWidth="",l.style.maxWidth="")}return _}get_column_header(i){return this._get_cell("TH",this.num_rows()-1,i)}draw(i,o,l,u,d,_,b){let p=o==null?void 0:o.length;if(p===0)return{};let y,x,M;for(let $=0;$<p;$++){if(M=o[$]?o[$]:"",this._offset_cache[$]=this._offset_cache[$]||0,$<p-1){var W,R,Z;((W=this._group_header_cache)===null||W===void 0||(R=W[$])===null||R===void 0||(Z=R[0])===null||Z===void 0?void 0:Z.value)===M?(y=this._group_header_cache[$][1],this._group_header_cache[$][2]+=1,l===1&&(this._group_header_cache[$][0].row_header_x=d),y.setAttribute("colspan",this._group_header_cache[$][2])):(y=this._draw_group_th(this._offset_cache,$,M),x=this._draw_group(o,M,y),this._group_header_cache[$]=[x,y,1])}else{y=this._draw_group_th(this._offset_cache,$,M),x=this._draw_th(i||o,M,y,u,d);for(let[N]of this._group_header_cache)N.size_key=x.size_key;y.removeAttribute("colspan")}x&&(x.x=u,x.column_header_y=$,x.x0=_,x._virtual_x=b,l===1&&(x.row_header_x=d))}return this._clean_rows(this._offset_cache.length),{th:y,metadata:x}}clean(){this._clean_columns(this._offset_cache)}reset_header_cache(){this._offset_cache=[],this._group_header_cache=[]}},zr=class extends Ht{_draw_td(i,o,l,u,{column_name:d},{ridx_offset:_},b){let p=this._get_cell(i,o,u),y=this._get_or_create_metadata(p);y.y=o+_,y.size_key=b,i==="TD"&&(y.column_header=d);let x=this._column_sizes.override[y.size_key];if(x){let M=this._column_sizes.auto[y.size_key];p.classList.toggle("rt-cell-clip",M>x),p.style.minWidth=x+"px",p.style.maxWidth=x+"px"}else p.classList.remove("rt-cell-clip"),p.style.minWidth="",p.style.maxWidth="";return l instanceof HTMLElement?(p.textContent="",p.appendChild(l)):p.textContent=l,y.value=l,{td:p,metadata:y}}draw(i,o,l,u=!1,d,_,b){let{cidx:p,column_data:y,row_headers:x,column_data_listener_metadata:M}=o,W,{row_height:R}=l,Z=[],$=[],N=0,Y=[];for(let g=0;g<(u?l.row_headers_length:1);g++){N=0;for(let U of y){var fe;let pe=x==null?void 0:x[N],B;if(u){let j=U[g],q=this._fetch_cell(N-(Z[g]||1),p+g),ge=this._get_or_create_metadata(q),ke=this._fetch_cell(N,p+g-(Y[N]||1)),C=this._get_or_create_metadata(ke);!ke||C.value!==j&&j!==void 0||ke.hasAttribute("rowspan")?q&&ge.value===j&&!q.hasAttribute("colspan")?(Z[g]=Z[g]?Z[g]+1:2,q.setAttribute("rowspan",Z[g]),this._replace_cell(N,p+g)):(B=this._draw_td("TH",N,j,p+g,o,l,g),B.td.style.display="",B.td.removeAttribute("rowspan"),B.td.removeAttribute("colspan"),B.metadata.row_header=U,B.metadata.row_header_x=g,B.metadata.x0=_,B.metadata.y0=l.ridx_offset,B.metadata.y1=l.y1,B.metadata._virtual_x=g,Z[g]=1,Y[N]=1,$[g]=B):(Y[N]=Y[N]?Y[N]+1:2,ke.setAttribute("colspan",Y[N]),this._replace_cell(N,p+g))}else B=this._draw_td("TD",N,U,p,o,l,b),M&&(B.metadata.user=M[N]),B.metadata.x=d,B.metadata.x0=_,B.metadata.x1=l.x1,B.metadata.row_header=pe||[],B.metadata.y0=l.ridx_offset,B.metadata.y1=l.y1,B.metadata.dx=d-_,B.metadata.dy=B.metadata.y-B.metadata.y0,B.metadata._virtual_x=p,$[0]=B;if(N++,W=B?B.metadata:W,R=R||((fe=B)===null||fe===void 0?void 0:fe.td.offsetHeight),N*R>i)break}}return this._clean_rows(N),{tds:$,ridx:N,metadata:W,row_height:R}}clean({ridx:i,cidx:o}){this._clean_rows(i),this._clean_columns(o)}},Tt=class{constructor(i,o,l){this.clear(l);let[u]=l.children,[d,_]=u.children;this.table=u,this._column_sizes=o,this.header=new Lr(o,i,d),this.body=new zr(o,i,_),this.fragment=document.createDocumentFragment()}num_columns(){return this.header.num_columns()}clear(i){i.innerHTML=xr` <table cellspacing="0"> <thead></thead> <tbody></tbody> </table> `}autosize_cells(i){for(;i.length>0;){let[o,l,u]=i.pop(),d,_=getComputedStyle(o);_.boxSizing!=="border-box"?(d=o.clientWidth,d-=parseFloat(_.paddingLeft),d-=parseFloat(_.paddingRight)):d=parseFloat(window.getComputedStyle(o).width),this._column_sizes.row_height=this._column_sizes.row_height||u.offsetHeight,this._column_sizes.indices[l.size_key]=d;let b=this._column_sizes.override.hasOwnProperty(l.size_key);d&&!b&&(this._column_sizes.auto[l.size_key]=d),o.style.minWidth==="0px"&&(o.style.minWidth=d+"px")}}async*draw(i,o,l,u,d,_){var b,p,y,x;let{width:M,height:W}=i,{view:R,config:Z}=o,{data:$,row_headers:N,column_headers:Y,metadata:fe}=await R(d.start_col,d.start_row,d.end_col,d.end_row),{start_row:g=0,start_col:U=0,end_col:pe=0,end_row:B=0}=d;N&&(this._row_headers_length=N.reduce((A,ne)=>Math.max(A,ne.length),0),N=N.map(A=>(A.length=this._row_headers_length,A))),o.config.column_pivots=Array.from(Array((Y==null||(b=Y[0])===null||b===void 0?void 0:b.length)-1||0).keys()),o.config.row_pivots=Array.from(Array(((p=N)===null||p===void 0||(y=p[0])===null||y===void 0?void 0:y.length)||0).keys());let j={viewport_width:0,selected_id:l,ridx_offset:g,x0:U,x1:pe,y1:B,row_height:this._column_sizes.row_height,row_headers_length:this._row_headers_length},q,ge=0,ke=[],C=!0;if(((x=N)===null||x===void 0?void 0:x.length)>0){let A=Z.row_pivots.join(","),ne={column_name:A,cidx:0,column_data:N,row_headers:N,first_col:C},ue=ge+U;q=this.body.draw(W,ne,{...j,x0:0},!0,void 0,void 0,ue);let le=[];for(let oe=0;oe<o.config.row_pivots.length;oe++)le.push(this.header.draw(A,Array(o.config.column_pivots.length+1).fill(""),1,void 0,oe,U,oe));if(C=!1,j.viewport_width+=le.reduce((oe,{th:be},ve)=>oe+(this._column_sizes.indices[ve]||be.offsetWidth),0),j.row_height=j.row_height||q.row_height,ge=N[0].length,!u)for(let oe=0;oe<o.config.row_pivots.length;oe++){let{td:be,metadata:ve}=q.tds[oe]||{},{th:Le,metadata:Ne}=le[oe];ke.push([Le||be,Ne||ve,be||Le])}}try{var S;let A=0,ne=_-d.start_col;for(;A<ne;){if(!$[A]){let me=Math.max(d.end_col,0);d.start_col=me;let he=0,ye=0;for(;this._column_sizes.indices.length>ge+U+he+1&&ye+j.viewport_width<M;)he++,ye+=this._column_sizes.indices[ge+U+he];if(ye+j.viewport_width<M){let Oe=Math.min(_,me+5);d.end_col=Math.max(1,Math.min(_,Oe))}else d.end_col=Math.max(1,Math.min(_,me+he));let We=R(d.start_col,d.start_row,d.end_col,d.end_row);yield;let Ee=await We;if(Ee.data.length===0)return void(yield ke);d.end_col=d.start_col+Ee.data.length;for(let Oe=0;Oe<Ee.data.length;Oe++){var E;$[A+Oe]=Ee.data[Oe],Ee.metadata&&(fe[A+Oe]=Ee.metadata[Oe]),Y&&(Y[A+Oe]=(E=Ee.column_headers)===null||E===void 0?void 0:E[Oe])}}let ue=(Y==null?void 0:Y[A])||"",le=$[A],oe={column_name:ue,cidx:ge,column_data:le,column_data_listener_metadata:fe==null?void 0:fe[A],row_headers:N,first_col:C},be=A+U,ve=ge+U,Le=this.header.draw(void 0,ue,void 0,be,ve,U,ge);if(q=this.body.draw(W,oe,j,!1,be,U,ve),C=!1,!u)for(let{td:me,metadata:he}of q.tds)ke.push([Le.th||me,Le.metadata||he,me||Le.th]);let Ne=this._column_sizes.indices[ge+U];var I;if(Ne?j.viewport_width+=Ne:j.viewport_width+=((I=Le.th)===null||I===void 0?void 0:I.offsetWidth)||q.tds.reduce((me,he)=>{var ye;return me+((ye=he.td)===null||ye===void 0?void 0:ye.offsetWidth)},0),j.row_height=j.row_height||q.row_height,ge++,A++,j.viewport_width>M){var O;this.body.clean({ridx:((O=q)===null||O===void 0?void 0:O.ridx)||0,cidx:ge}),this.header.clean(),yield ke,j.viewport_width=0;for(let[me]of ke)j.viewport_width+=me.offsetWidth;if(j.viewport_width>M)return}}this.body.clean({ridx:((S=q)===null||S===void 0?void 0:S.ridx)||0,cidx:ge}),this.header.clean(),yield ke}finally{var V;this.body.clean({ridx:((V=q)===null||V===void 0?void 0:V.ridx)||0,cidx:ge}),this.header.clean(),this.body._span_factory.reset(),this.header._span_factory.reset()}}},an=["both","horizontal","vertical","none"],Er=class extends on{constructor(){super(),this._column_sizes={auto:{},override:{},indices:[]},this._style_callbacks=[],this._initialized=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this.register_listeners(),this.setAttribute("tabindex","0"),this._initialized=!0,this.table_model=new Tt(this._table_clip,this._column_sizes,this))}_reset_viewport(){this._start_row=void 0,this._end_row=void 0,this._start_col=void 0,this._end_col=void 0}_reset_scroll(){this._column_sizes.indices=[],this.scrollTop=0,this.scrollLeft=0,this._reset_viewport()}_resetAutoSize(){this._column_sizes.auto={},this._column_sizes.override={},this._column_sizes.indices=[];for(let i=0;i<this.table_model.header.num_columns();i++){let o=this.table_model.header.get_column_header(i);o.style.minWidth="",o.style.maxWidth=""}}clear(){this.table_model=new Tt(this._table_clip,this._column_sizes,this)}addStyleListener(i){this._style_callbacks=this._style_callbacks.concat(i);let o=!0;return()=>{if(!o)return;o=!1;let l=this._style_callbacks=this._style_callbacks.slice(),u=l.indexOf(i);l.splice(u,1)}}invalidate(){if(!this._is_styling)throw new Error("Cannot call `invalidate()` outside of a `StyleListener`");this._invalidated=!0}getMeta(i){if(i!==void 0){if(i instanceof HTMLElement)return qe.get(i);if(i.row_header_x>=0){if(i.row_header_x<this._view_cache.config.row_pivots.length){let o=this.table_model.body._fetch_cell(i.y,i.row_header_x);return this.getMeta(o)}}else{if(!(i.column_header_y>=0))return this.getMeta(this.table_model.body._fetch_cell(i.dy,i.dx+this.table_model._row_headers_length));if(i.column_header_y<this._view_cache.config.column_pivots.length){let o=this.table_model.body._fetch_cell(i.column_header_y,i.y);return this.getMeta(o)}}}}getDrawFPS(){return function(){let i=performance.now(),o=i-wr,l=Et,u=1e3*Xe/o,d=Xe;return Et=0,Xe=0,wr=i,{avg:l,real_fps:u,virtual_fps:1e3/l,num_frames:d,elapsed:o}}()}async scrollToCell(i,o,l,u){let d=this._virtual_panel.offsetHeight/u;this.scrollTop=d*o,this.scrollLeft=i/(this._max_scroll_column(l)||l)*(this.scrollWidth-this.clientWidth),await this.draw.flush()}setDataListener(i,{virtual_mode:o="both"}={}){console.assert(an.indexOf(o)>-1,`Unknown virtual_mode ${o};  valid options are "both" (default), "horizontal", "vertical" or "none"`),this._virtual_mode=o,this._invalid_schema=!0,this._view_cache={view:i,config:{row_pivots:[],column_pivots:[]},schema:{}},this._setup_virtual_scroll()}__noop_jsdoc_hints(){}};document.createElement("regular-table").constructor===HTMLElement&&window.customElements.define("regular-table",Er);var Ar=zt(Nr()),Pn=zt(Cr());var gt=zt(qt()),Fe=Symbol("Plugin Symbol"),Ye;function Nt(t){let[i,o,l]=t.rgb(),[u,d,_]=t.set("hsl.h",(t.get("hsl.h")-15)%360).rgb(),[b,p,y]=t.set("hsl.h",(t.get("hsl.h")+15)%360).rgb();return`linear-gradient(to right top,rgb(${u},${d},${_}),rgb(${i},${o},${l}) 50%,rgb(${b},${p},${y}))`}function Dr(t,i,o){Ye=Ye||document.createElement("perspective-column-style");let l=t.getMeta(i),u=l.column_header[l.column_header.length-1],d=this._schema[u],_={gradient:o,pos_color:this._pos_color[0],neg_color:this._neg_color[0],color_mode:"foreground"};if(d==="float")_.fixed=2;else if(d==="integer")_.fixed=0;else{this._open_column_styles_menu.pop(),t.draw();return}let b=()=>Ye.blur(),p=W=>{let R=W.detail;R.pos_color&&(R.pos_color=[R.pos_color,...(0,gt.default)(R.pos_color).rgb(),Nt((0,gt.default)(R.pos_color))],R.neg_color=[R.neg_color,...(0,gt.default)(R.neg_color).rgb(),Nt((0,gt.default)(R.neg_color))]),t[Fe]=t[Fe]||{},t[Fe][u]=R,t.draw({preserve_width:!0}),t.parentElement.dispatchEvent(new Event("perspective-config-update"))},y=async()=>{t.removeEventListener("regular-table-scroll",b),Ye.removeEventListener("perspective-column-style-change",p),Ye.removeEventListener("blur",y),this._open_column_styles_menu.pop(),await t.draw(),t.parentElement.dispatchEvent(new Event("perspective-config-update"))};Ye.addEventListener("perspective-column-style-change",p),Ye.addEventListener("blur",y),t.addEventListener("regular-table-scroll",b);let x=t[Fe]||{},M=Object.assign({},x[u]=x[u]||{});M.pos_color&&(M.pos_color=M.pos_color[0],M.neg_color=M.neg_color[0]),Ye.open(i,M,_)}function Bt([t,i,o,l],u=[255,255,255]){function d(_,b){return((1-l)*(u[_]/255)+l*(b/255))*255}return[d(0,t),d(1,i),d(2,o)]}function Vt([t,i,o]){return Math.sqrt(t*t*.299+i*i*.587+o*o*.114)>130?"#161616":"#ffffff"}var Xt=zt(qt());function ln(t){let i=t._view_cache.config.row_pivots.length-1,o=Array.from(t.children[0].children[0].children),l=t[Fe]||{};if(o.length>0){let[b]=o.splice(o.length-1,1);for(let p of b?.children){let y=t.getMeta(p),x=y.column_header?.[y.column_header?.length-1],M=this._config.sort.find(N=>N[0]===x),W=y.row_header_x===i,R=typeof y.x=="undefined";W=W||(y.x+1)%this._config.columns.length==0,p.classList.toggle("psp-header-border",W),p.classList.toggle("psp-header-group",!1),p.classList.toggle("psp-header-leaf",!0),p.classList.toggle("psp-is-top",!1),p.classList.toggle("psp-header-corner",R),p.classList.toggle("psp-header-sort-asc",!!M&&M[1]==="asc"),p.classList.toggle("psp-header-sort-desc",!!M&&M[1]==="desc"),p.classList.toggle("psp-header-sort-col-asc",!!M&&M[1]==="col asc"),p.classList.toggle("psp-header-sort-col-desc",!!M&&M[1]==="col desc");let Z=Zt.call(this,y),$=Z==="integer"||Z==="float";p.classList.toggle("psp-align-right",$),p.classList.toggle("psp-align-left",!$),p.classList.toggle("psp-menu-open",this._open_column_styles_menu[0]===y._virtual_x),p.classList.toggle("psp-menu-enabled",$&&!R),p.classList.toggle("psp-is-width-override",t._column_sizes?.override[y.size_key]!==void 0)}}let u=[],d=new Set,_=t.children[0];for(let b=0;b<o.length;b++){let p=_.rows[b],y=new Set;for(let x=0;x<p.cells.length;x++){let M=p.cells[x];M.style.backgroundColor="";let W=t.getMeta(M),R=W.row_header_x===i||W.x>=0;M.classList.toggle("psp-align-right",!1),M.classList.toggle("psp-align-left",!1),M.classList.toggle("psp-header-group",!0),M.classList.toggle("psp-header-leaf",!1),M.classList.toggle("psp-header-border",R),M.classList.toggle("psp-header-group-corner",typeof W.x=="undefined"),M.classList.toggle("psp-color-mode-bar",!1),M.classList.toggle("psp-header-sort-asc",!1),M.classList.toggle("psp-header-sort-desc",!1),M.classList.toggle("psp-header-sort-col-asc",!1),M.classList.toggle("psp-header-sort-col-desc",!1);let Z=p.cells[x],$=x,N,Y;for(;u[b]&&u[b][$];++$);for(y.add($),N=$;N<$+Z.colSpan;++N)for(Y=b;Y<b+Z.rowSpan;++Y)u[Y]||(u[Y]=[]),u[Y][N]=!0;Z.classList.toggle("psp-is-top",b===0||!d.has(N))}d=y}for(let b of t.children[0].children[1].children)for(let p of b.children){let y=t.getMeta(p),x=y.column_header?.[y.column_header?.length-1],M=l[x],W=Zt.call(this,y),R=W==="integer"||W==="float";if(R){let $=y.user>0,N=y.user<0,[Y,fe,g,U,pe]=(()=>M?.pos_color!==void 0?$?M.pos_color:N?M.neg_color:["",0,0,0,""]:$?this._pos_color:N?this._neg_color:["",0,0,0,""])();if(p.style.position="",M?.color_mode==="background"){let B=this._plugin_background,j=Vt(Bt([fe,g,U,1],B));p.style.color=j,p.style.backgroundColor=Y}else if(M?.color_mode==="gradient"){let B=Math.max(0,Math.min(1,Math.abs(y.user/M.gradient))),j=this._plugin_background,q=Vt(Bt([fe,g,U,B],j));p.style.color=q,p.style.backgroundColor=`rgba(${fe},${g},${U},${B})`}else M?.color_mode==="disabled"?(p.style.backgroundColor="",p.style.color=""):M?.color_mode==="bar"?(p.style.backgroundColor="",p.style.color="",p.style.position="relative",pe!==""&&p.children.length>0&&p.children[0].nodeType===Node.ELEMENT_NODE&&(p.children[0].style.background=pe)):(p.style.backgroundColor="",p.style.color=Y)}else if(W==="boolean"){let[$]=y.user===!0?this._pos_color:y.user===!1?this._neg_color:["",0,0,0,""];p.style.backgroundColor="",p.style.color=$}else p.style.backgroundColor="",p.style.color="";p.classList.toggle("psp-bool-type",W==="boolean"&&y.user!==null);let Z=p.tagName==="TH";if(Z){let $=typeof y.value!=null&&typeof y.value!=null&&y.value?.toString()?.trim().length>0,N=y.row_header_x>=this._config.row_pivots.length,Y=t.getMeta({dx:0,dy:y.y-y.y0+1}),fe=Y&&Y.row_header&&typeof Y.row_header[y.row_header_x+1]!="undefined";p.classList.toggle("psp-tree-label",$&&!N),p.classList.toggle("psp-tree-label-expand",$&&!N&&!fe),p.classList.toggle("psp-tree-label-collapse",$&&!N&&fe),p.classList.toggle("psp-tree-leaf",$&&N)}p.classList.toggle("psp-align-right",!Z&&R),p.classList.toggle("psp-align-left",Z||!R),p.classList.toggle("psp-color-mode-bar",M?.color_mode==="bar")}}async function cn(t,i,o){let l=t.getMeta(o),u=l.column_header[l.column_header.length-1],_=(i.shiftKey?fn:un).call(this,u);t.dispatchEvent(new CustomEvent("regular-table-psp-sort",{detail:{sort:_}}))}function fn(t){let i=[],o=!1;for(let l of this._config.sort){let[u,d]=l;if(u===t){o=!0;let _=Fr.call(this,t,d);_&&i.push(_)}else i.push(l)}return o||i.push([t,"desc"]),i}function un(t){for(let[i,o]of this._config.sort)if(i===t){let l=Fr.call(this,t,o);return l?[l]:[]}return[[t,"desc"]]}function Fr(t,i){let l=this._config.column_pivots.length>0?hn:dn,u=i?l[i]:"desc";if(u)return[t,u]}var dn={desc:"asc",asc:void 0},hn={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0};async function _n(t,i){let o=t.getMeta(i.target),l=i.target.classList.contains("psp-tree-label-collapse");i.shiftKey&&l?this._view.set_depth(o.row_header.filter(u=>u!==void 0).length-2):i.shiftKey?this._view.set_depth(o.row_header.filter(u=>u!==void 0).length-1):l?this._view.collapse(o.y):this._view.expand(o.y),this._num_rows=await this._view.num_rows(),this._num_columns=await this._view.num_columns(),t.draw()}async function pn(t,i){if(i.which!==1)return;let o=i.target;for(;o.tagName!=="TD"&&o.tagName!=="TH";)if(o=o.parentElement,!t.contains(o))return;if(o.classList.contains("psp-tree-label")&&i.offsetX<26){_n.call(this,t,i),i.stopImmediatePropagation();return}let l=o.getBoundingClientRect();if(o.classList.contains("psp-menu-enabled")&&i.clientY-l.top>16){let u=t.getMeta(o),d=u.column_header?.[u.column_header?.length-1],[,_]=await this._view.get_min_max(d);this._open_column_styles_menu.unshift(u._virtual_x),t.draw(),Dr.call(this,t,o,_),i.preventDefault(),i.stopImmediatePropagation()}else o.classList.contains("psp-header-leaf")&&!o.classList.contains("psp-header-corner")&&(cn.call(this,t,i,o),i.stopImmediatePropagation())}function gn(t,i){if(i.which!==1)return;let o=i.target;for(;o.tagName!=="TD"&&o.tagName!=="TH";)if(o=o.parentElement,!t.contains(o))return;(o.classList.contains("psp-tree-label")&&i.offsetX<26||o.classList.contains("psp-header-leaf")&&!o.classList.contains("psp-header-corner"))&&i.stopImmediatePropagation()}var Be={datetime:t=>dayjs(t).format("YYYY-MM-DD[D]HH:mm:ss.SSS"),date:t=>dayjs(t).format("YYYY-MM-DD"),integer:Intl.NumberFormat("en-us").format,float:new Intl.NumberFormat("en-us",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:7}).format,boolean:t=>t?"check":"close"},Ut={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat,boolean:class{format(t){return t?"check":"close"}}},jr=Be;function Pr(t,i,o={},l=!1){if(i===null)return"-";let u=t[t.length-1],d=o[u],_=l&&this._table_schema[u]||this._schema[u]||"string",b=_==="integer"||_==="float";if(b&&d?.color_mode==="bar"){let p=Math.max(0,Math.min(.95,Math.abs(i/d.gradient)*.95)),y=this._div_factory.get(),x=i>=0?"left":"right";return y.setAttribute("style",`width:${(p*100).toFixed(2)}%;position:absolute;${x}:0;height:80%;top:10%;pointer-events:none;`),y}else{let p=b&&d&&d.fixed!==void 0,y=p?`${_}${d.fixed}`:_;if(Be[y]===void 0){let x=(0,Ar.get_type_config)(_);if(p){let M={minimumFractionDigits:d.fixed,maximumFractionDigits:d.fixed};Be[y]=new Ut[_]("en-us",M)}else Ut[_]?Be[y]=new Ut[_]("en-us",x.format):Be[y]=!1}return Be[y]?Be[y](i):i}}function*mn(t=[],i,o){let l=o[Fe];for(let u of t){u=["TOTAL",...u];let d=u[u.length-1];u=u.slice(0,u.length-1).fill("");let _=Pr.call(this,[i[u.length-1]],d,l,!0);u=u.concat({toString:()=>_}),u.length=i.length+1,yield u}}async function bn(t,i,o,l,u){let d={};l-i>0&&u-o>0?(d=await this._view.to_columns({start_row:o,start_col:i,end_row:u,end_col:l,id:!0}),this._ids=d.__ID__):this._div_factory.clear();let _=[],b=[],p=[];for(let y of this._column_paths.slice(i,l)){let x=y.split("|"),M=d[y]||new Array(u-o).fill(null);_.push(M.map(W=>Pr.call(this,x,W,t[Fe]))),b.push(M),p.push(x)}return{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(mn.call(this,d.__ROW_PATH__,this._config.row_pivots,t)),column_headers:p,data:_,metadata:b}}function Kt(t,i,o){let l=window.getComputedStyle(t).getPropertyValue(i).trim();return l.length>0?l:o}var Ir=class{constructor(i){this._name=i,this._elements=[],this._index=0}clear(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let i=this._elements[this._index];return this._index+=1,i}};function mt(t){let i=(0,Xt.default)(t),o=Nt(i);return[t,...i.rgb(),o]}async function Jt(t,i,o,l={}){let u=await o.get_config(),d=u.expressions.map(pe=>pe[1]),[_,b,p,y,x,M]=await Promise.all([i.schema(),i.validate_expressions(d),o.num_rows(),o.schema(),o.expression_schema(),o.column_paths()]),W=(0,Xt.default)(Kt(t,"--plugin--background","#FFFFFF")).rgb(),R=mt(Kt(t,"--rt-pos-cell--color","#338DCD")),Z=mt(Kt(t,"--rt-neg-cell--color","#FF5942")),$={...y,...x},N={..._,...b.expression_schema},Y=M.filter(pe=>pe!=="__ROW_PATH__"&&pe!=="__ID__"),fe=[],g=[];for(let pe of Y){let B=pe.split("|"),j=B[B.length-1];g.push($[j]),fe.push(!!_[j])}let U=Object.assign(l,{_view:o,_table:i,_table_schema:N,_config:u,_num_rows:p,_schema:$,_ids:[],_open_column_styles_menu:[],_plugin_background:W,_pos_color:R,_neg_color:Z,_column_paths:Y,_column_types:g,_is_editable:fe,_row_header_types:u.row_pivots.map(pe=>N[pe]),get_psp_type:Zt});return U._div_factory=U._div_factory||new Ir("div"),t.setDataListener(bn.bind(U,t),{virtual_mode:t.parentElement.virtual_mode||"both"}),U}function Zt(t){return t.x>=0?this._column_types[t.x]:this._row_header_types[t.row_header_x-1]}async function Wr(t,i){t.addStyleListener(ln.bind(i,t)),t.addEventListener("mousedown",pn.bind(i,t)),t.addEventListener("click",gn.bind(i,t)),await t.draw()}var Hr=`regular-table{padding:12px 0 0 12px;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none}regular-table:hover{scrollbar-color:rgba(0,0,0,.3) transparent}regular-table{font-family:"Open Sans"}regular-table div[tabindex]{outline:none}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}regular-table th{text-align:center}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0px}regular-table thead tr:last-child .rt-float,regular-table tbody .rt-float{text-align:right}regular-table thead .rt-integer,regular-table tbody .rt-integer{text-align:right}regular-table tbody th{text-align:left}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%}regular-table thead .rt-string,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table tbody .rt-date,regular-table thead .rt-datetime,regular-table tbody .rt-datetime{text-align:left}regular-table thead tr:last-child th{border-bottom:1px solid #ddd}regular-table th{position:relative}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid #eee;height:100%}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding:0 5px;height:19px}regular-table tr:hover td{background:#eee;opacity:1}regular-table tr:hover{color:#333}regular-table table *{box-sizing:border-box}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:"Material Icons"}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:"Material Icons"}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px #1a7da1}regular-table .rt-selected td{background-color:#eee}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%}regular-table th span.rt-group-name{text-align:left}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#0000;border-radius:5px}regular-table::-webkit-scrollbar-thumb:horizontal{border-bottom:2px solid transparent;border-top:2px solid transparent}regular-table::-webkit-scrollbar-thumb:vertical{border-left:2px solid transparent;border-right:2px solid transparent}regular-table:hover::-webkit-scrollbar-thumb{background-color:#00000026}regular-table::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0 var(--pv-divider--color, #eaedef)}.psp-header-group{box-shadow:0 10px 0 -9px var(--pv-divider--color, #eaedef)}.psp-is-top{box-shadow:5px 4px 0 -4px var(--pv-divider--color, #eaedef)}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0 -4px var(--pv-divider--color, #eaedef),0 10px 0 -9px var(--pv-divider--color, #eaedef)}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0 var(--pv-divider--color, #eaedef),0 10px 0 -9px var(--pv-divider--color, #eaedef)}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0 -4px var(--pv-divider--color, #eaedef)}tr:only-child th{box-shadow:none!important}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected){border-color:var(--rt-hover--border-color, #c5c9d080)!important;background-color:transparent;box-shadow:0 1px 0 var(--rt-hover--border-color, #c5c9d080),0 3px #0000000d,0 5px #00000003}regular-table tbody tr:hover+tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent}regular-table tbody tr th:first-child:not(:empty),regular-table tbody tr th:first-child:empty+th:not(:empty),regular-table tbody tr th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent}regular-table tbody tr th:last-child,regular-table tbody tr td:last-child{border-right-width:1px;border-right-color:transparent}regular-table tbody tr:hover{color:#161616}regular-table tbody tr:hover th:first-child:not(:empty),regular-table tbody tr:hover th:first-child:empty+th:not(:empty),regular-table tbody tr:hover th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color, #c5c9d080)!important}regular-table tbody tr:hover th:last-child,regular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color, #c5c9d080)!important}perspective-viewer[settings] regular-table .psp-header-leaf{height:36px;vertical-align:top;padding-top:2px}perspective-viewer[settings] regular-table .psp-header-leaf:not(.psp-header-corner):before{font-family:"Material Icons";content:"menu";position:absolute;width:calc(100% - 8px);left:5px;bottom:0px;color:var(--inactive--color, #b4b7be)}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:not(.psp-header-corner):before{color:inherit;cursor:pointer}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner){pointer-events:none}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner):before{content:"expand_less"}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:hover:before{color:#338dcd}perspective-viewer[settings] regular-table .psp-header-leaf .rt-column-resize{height:18px}.psp-row-selected,:hover .psp-row-selected,:hover th.psp-tree-leaf.psp-row-selected,:hover th.psp-tree-label.psp-row-selected{color:#fff!important;background-color:#ea7319!important;border-color:#ea7319!important}.psp-row-selected.psp-tree-label:not(:hover):before{color:#fff}.psp-row-subselected,:hover .psp-row-subselected,:hover th.psp-tree-leaf.psp-row-subselected,:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,.2)!important}.psp-error{color:red}td:focus{outline:#666;outline-style:dotted;outline-width:1px}perspective-viewer.dragging regular-table{pointer-events:none}.psp-header-border:last-child{border-right-width:0px}.psp-header-sort-desc:after{font-family:"Material Icons";font-size:10px;content:"arrow_downward"}.psp-header-sort-asc:after{font-family:"Material Icons";font-size:10px;content:"arrow_upward"}.psp-header-sort-col-desc:after{font-family:"Material Icons";font-size:10px;content:"arrow_back"}.psp-header-sort-col-asc:after{font-family:"Material Icons";font-size:10px;content:"arrow_forward"}tbody th:last-of-type{border-right:1px solid #eaedef;overflow:hidden;text-overflow:ellipsis}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,#eee 10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none}.psp-tree-label{max-width:0px;min-width:0px}.psp-tree-label:before{color:#ccc;font-family:"Material Icons";padding-right:11px;vertical-align:-1px}.psp-tree-label-expand:before{content:"add"}.psp-tree-label-collapse:before{content:"remove"}.psp-tree-label:hover:before{color:#338dcd;text-shadow:0px 0px 5px #338dcd}regular-table thead tr:last-child th{border-bottom-width:0px}.psp-tree-leaf{padding-left:24px}.psp-align-right{text-align:right}.psp-align-left{text-align:left}.psp-positive:not(:focus){color:var(--rt-pos-cell--color, #338dcd)}.psp-negative:not(:focus){color:var(--rt-neg-cell--color, #ff5942)}regular-table table tbody td{min-width:52px!important}.psp-is-width-override .rt-column-resize,.rt-column-resize:hover{border:1px dashed #999;border-bottom-width:0px;border-left-width:0px}.psp-bool-type{font-family:"Material Icons"}.boolean-editable{cursor:pointer}regular-table table{user-select:none;color:#161616;border-collapse:separate}regular-table table th{font-weight:400}regular-table table td,regular-table table th{border-color:#eaedef;height:23px}regular-table table .psp-header-group{text-overflow:ellipsis}regular-table table .psp-header-leaf{border-bottom-width:0px}regular-table table td,regular-table table th.psp-tree-label,regular-table table th.psp-tree-label,regular-table table th.psp-tree-leaf,regular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px}regular-table table tbody th:empty{background-position:0px -10px}
`;async function bt({_view:t,_config:i},o,l){let u=i.row_pivots,d=i.column_pivots,_=o>=0?o:0,b=_+1,p=await t.to_json({start_row:_,end_row:b}),x=p.map(Y=>Y.__ROW_PATH__)[0]||[],M=u.map((Y,fe)=>{let g=x[fe];return g?[Y,"==",g]:void 0}).filter(Y=>Y),W=u.length>0?l+1:l,R=Object.keys(p[0])[W],Z={row:p[0]},$=[];if(R){let Y=R.split("|");Z.column_names=[Y[Y.length-1]],$=d.map((fe,g)=>{let U=Y[g];return U?[fe,"==",U]:void 0}).filter(fe=>fe).filter(([,,fe])=>fe!=="__ROW_PATH__")}let N=i.filter.concat(M).concat($);return Z.config={filter:N},Z}var Ue=new WeakMap;async function yn(t,i,o){let l=t.getMeta(o.target);if(!i.hasAttribute("selectable")||o.handled||o.which!==1||!l)return;let u=this._ids[l.y-l.y0];if(l&&l.y>=0){let d=Ue.get(t),_=!!d&&d.reduce((y,x,M)=>y&&x===u[M],!0),b=!!d&&u.length===d.length&&_,p=[];b?Ue.delete(t):(Ue.set(t,u),p=await bt(this,l.y,l.x),p=p.config.filter),await t.draw(),o.handled=!0,i.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:{selected:!b,config:{filter:p}}}))}}function wn(t,i){if(!i.hasAttribute("selectable"))return;let o=Ue.has(t),l=Ue.get(t);for(let u of t.querySelectorAll("td"))if(!o)u.classList.toggle("psp-row-selected",!1),u.classList.toggle("psp-row-subselected",!1);else{let d=t.getMeta(u),_=this._ids[d.y-d.y0],b=l.reduce((p,y,x)=>p&&y===_[x],!0);u.classList.toggle("psp-row-selected",_.length===l.length&&b),u.classList.toggle("psp-row-subselected",_.length!==l.length&&b)}for(let u of t.querySelectorAll("tbody th")){let d=t.getMeta(u),_=this._ids[d.y-d.y0];if(!o||!!_[d.row_header_x])u.classList.toggle("psp-row-selected",!1),u.classList.toggle("psp-row-subselected",!1);else{let b=l.reduce((p,y,x)=>p&&y===_[x],!0);u.classList.toggle("psp-row-selected",_.length===l.length&&b),u.classList.toggle("psp-row-subselected",_.length!==l.length&&b)}}}function Tr(t,i){t.addStyleListener(wn.bind(this,t,i)),t.addEventListener("mousedown",yn.bind(this,t,i))}async function Rr(t){Ue.delete(t);for(let i of t.querySelectorAll("td,th"))i.classList.toggle("psp-row-selected",!1),i.classList.toggle("psp-row-subselected",!1)}async function xn(t,i,o){let l=t.getMeta(o.target);if(!l)return;let{x:u,y:d}=l,{row:_,column_names:b,config:p}=await bt(this,d,u);i.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:_,column_names:b,config:p}}))}function Yr(t,i){t.addEventListener("click",xn.bind(this,t,i))}var Ve=new WeakMap;function kn(t){let i;return async function(...o){if(!!i&&await i&&!!i)return;let l;i=new Promise(u=>l=u),await t.apply(this,o),i=void 0,l()}}function Gr(){if(this.isContentEditable){let t=document.getSelection().getRangeAt(0),i=t.cloneRange();return i.selectNodeContents(this),i.setEnd(t.endContainer,t.endOffset),i.toString().length}else return this.target.selectionStart}function qr(t,i,o){let l=t.getMeta(o),u=i._schema[i._column_paths[l.x]];if(l){let d=o.textContent,_=i._ids[l.y-l.y0];if(u==="float"||u==="integer"){if(d=parseFloat(d.replace(/,/g,"")),isNaN(d))return!1}else if(u==="date"||u==="datetime"){if(d=Date.parse(d),isNaN(d))return!1}else u==="boolean"&&(d=d==="check"?!1:d==="close"?!0:null);let b={__INDEX__:_,[i._column_paths[l.x]]:d};return i._table.update([b],{port_id:i._edit_port}),!0}}function Qt(t){let i=this._config.row_pivots.length===0&&this._config.column_pivots.length===0,o=t.hasAttribute("selectable"),l=t.hasAttribute("editable");return i&&!o&&l}var Ke=kn(async function(t,i,o,l){let u=t.getMeta(i),d=this._column_paths.length,_=this._num_rows,b=Ve.get(t);if(!b)return;u.x+o<d&&0<=u.x+o&&(b.x=u.x+o),u.y+l<_&&0<=u.y+l&&(b.y=u.y+l);let p=Math.max(u.x0-10,0),y=Math.min(u.x0+10,d),x=Math.max(u.y0-5,0),M=Math.min(u.y0+10,_),W=u.x0+o,R=u.y0+l;for(;!Br(t)&&W>=p&&W<y&&R>=x&&R<M;)await t.scrollToCell(W,R,d,_),Ve.set(t,b),W+=o,R+=l});function Mn(t,i){if(!i.hasAttribute("editable"))return;let o=Qt.call(this,i);for(let l of t.querySelectorAll("td")){let u=t.getMeta(l),d=this.get_psp_type(u);this._is_editable[u.x]?d==="boolean"?(l.toggleAttribute("contenteditable",!1),l.classList.toggle("boolean-editable",u.user!==null)):(l.toggleAttribute("contenteditable",o),l.classList.toggle("boolean-editable",!1)):(l.toggleAttribute("contenteditable",!1),l.classList.toggle("boolean-editable",!1))}}var Br=t=>{let i=t.querySelectorAll("td"),o=Ve.get(t);if(o){for(let l of i){let u=t.getMeta(l);if(u.x===o.x&&u.y===o.y)return document.activeElement!==l&&l.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&t.contains(document.activeElement)&&document.activeElement.blur()}};function Ln(t,i,o){if(!Qt.call(this,i))return;let l=document.activeElement;switch(o.target.classList.remove("psp-error"),o.keyCode){case 13:o.preventDefault(),o.shiftKey?Ke.call(this,t,l,0,-1):Ke.call(this,t,l,0,1);break;case 37:Gr.call(l)==0&&(o.preventDefault(),Ke.call(this,t,l,-1,0));break;case 38:o.preventDefault(),Ke.call(this,t,l,0,-1);break;case 39:Gr.call(l)==l.textContent.length&&(o.preventDefault(),Ke.call(this,t,l,1,0));break;case 40:o.preventDefault(),Ke.call(this,t,l,0,1);break;default:}}function zn(t,i,o){if(Qt.call(this,i)&&Ve.has(t)){o.target.classList.remove("psp-error");let l=Ve.get(t);Ve.delete(t),l.content!==o.target.textContent&&(qr(t,this,o.target)||(o.target.textContent=l.content,o.target.classList.add("psp-error"),o.target.focus()))}}function En(t,i,o){let l=t.getMeta(o.target);if(l){let u={x:l.x,y:l.y,content:o.target.textContent};Ve.set(t,u)}}function On(t,i,o){let l=t.getMeta(o.target);if(typeof l?.x!="undefined"){let u=this._is_editable[l.x],d=this.get_psp_type(l)==="boolean",_=o.target.textContent==="-";u&&d&&!_&&qr(t,this,o.target)}}async function Vr(t,i){this._edit_port=await i.getEditPort(),t.addStyleListener(Mn.bind(this,t,i)),t.addStyleListener(Br.bind(this,t,i)),t.addEventListener("click",On.bind(this,t,i)),t.addEventListener("focusin",En.bind(this,t,i)),t.addEventListener("focusout",zn.bind(this,t,i)),t.addEventListener("keydown",Ln.bind(this,t,i))}async function Xr(t,i){t.addEventListener("regular-table-psp-sort",o=>{this._preserve_focus_state=!0,i.restore({sort:o.detail.sort})})}customElements.define("perspective-viewer-datagrid",class extends HTMLElement{constructor(){super();this.datagrid=document.createElement("regular-table"),this.datagrid.formatters=jr}async activate(t){let i=this.parentElement,o=await i.getTable(!0);this._initialized?await Jt(this.datagrid,o,t,this.model):(this.innerHTML="",this.appendChild(this.datagrid),this.model=await Jt(this.datagrid,o,t),Wr(this.datagrid,this.model),await Tr.call(this.model,this.datagrid,i),await Yr.call(this.model,this.datagrid,i),await Vr.call(this.model,this.datagrid,i),await Xr.call(this.model,this.datagrid,i),this._initialized=!0)}get name(){return"Datagrid"}get select_mode(){return"toggle"}get min_config_columns(){}get config_column_names(){}async draw(t){let i=this._save_column_size_overrides();await this.activate(t);let o=this.parentElement,l=this.datagrid.draw({invalid_columns:!0});this.model._preserve_focus_state?this.model._preserve_focus_state=!1:(this.datagrid.scrollTop=0,this.datagrid.scrollLeft=0,Rr(this.datagrid,o),this.datagrid._resetAutoSize()),this._restore_column_size_overrides(i),await l}async update(t){this.model._num_rows=await t.num_rows(),await this.datagrid.draw()}async resize(){this._initialized&&await this.datagrid.draw()}async clear(){this.datagrid._resetAutoSize(),this.datagrid.clear()}save(){if(this.datagrid){let t=this.datagrid,i={};for(let l of Object.keys(t[Fe]||{})){let u=Object.assign({},t[Fe][l]);u?.pos_color&&(u.pos_color=u.pos_color[0],u.neg_color=u.neg_color[0]),i[l]=u}let o=this._save_column_size_overrides();for(let l of Object.keys(o||{}))i[l]||(i[l]={}),i[l].column_size_override=o[l];return JSON.parse(JSON.stringify(i))}return{}}restore(t){t=JSON.parse(JSON.stringify(t));let i={};for(let l of Object.keys(t)){let u=t[l];u.column_size_override!==void 0&&(i[l]=u.column_size_override,delete u.column_size_override),u?.pos_color&&(u.pos_color=mt(u.pos_color),u.neg_color=mt(u.neg_color)),Object.keys(u).length===0&&delete t[l]}let o=this.datagrid;try{o._resetAutoSize()}catch{}this._restore_column_size_overrides(i,!0),o[Fe]=t}async restyle(){}delete(){this.datagrid.table_model&&this.datagrid._resetAutoSize(),this.datagrid.clear()}_save_column_size_overrides(){if(!this._initialized)return[];if(this._cached_column_sizes){let d=this._cached_column_sizes;return this._cached_column_sizes=void 0,d}let t=this.datagrid._column_sizes.override,{row_pivots:i,columns:o}=this.model._config,l=i?.length>0?i.length+1:0,u={};for(let d of Object.keys(t))if(t[d]!==void 0){let _=d-l;_>-1&&(u[this.model._column_paths[_]]=t[d])}return u}_restore_column_size_overrides(t,i=!1){if(!this._initialized)return;i&&(this._cached_column_sizes=t);let o={},{row_pivots:l,columns:u}=this.model._config,d=l?.length>0?l.length+1:0;for(let _ of Object.keys(t)){let b=this.model._column_paths.indexOf(_);o[b+d]=t[_]}this.datagrid._column_sizes.override=o}});function Sn(){let t=document.createElement("style");t.textContent=Hr,document.head.insertBefore(t,document.head.firstChild)}function $n(){customElements.get("perspective-viewer").registerPlugin("perspective-viewer-datagrid")}customElements.whenDefined("perspective-viewer").then($n);Sn();})();
/**
	ColorBrewer colors for chroma.js

	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
	Pennsylvania State University.

	Licensed under the Apache License, Version 2.0 (the "License"); 
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at	
	http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software distributed
	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
	CONDITIONS OF ANY KIND, either express or implied. See the License for the
	specific language governing permissions and limitations under the License.

    @preserve
 */
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
//# sourceMappingURL=perspective-viewer-datagrid.js.map
