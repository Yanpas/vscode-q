/*! For license information please see perspective-viewer.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(self,(function(){return(()=>{var t={1053:t=>{!function(){var e=function(t,n){var i=this;e.count=(e.count||0)+1,this.count=e.count,this.isOpened=!1,this.input=r(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=n=n||{},function(t,e,n){for(var i in e){var r=e[i],o=t.input.getAttribute("data-"+i.toLowerCase());t[i]="number"==typeof r?parseInt(o):!1===r?null!==o:r instanceof Function?null:o,t[i]||0===t[i]||(t[i]=i in n?n[i]:r)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:e.DATA,filter:e.FILTER_CONTAINS,sort:!1!==n.sort&&e.SORT_BYLENGTH,container:e.CONTAINER,item:e.ITEM,replace:e.REPLACE,tabSelect:!1},n),this.index=-1,this.container=this.container(t),this.ul=r.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=r.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(t){var e=t.keyCode;i.opened&&(13===e&&i.selected?(t.preventDefault(),i.select(void 0,void 0,t)):9===e&&i.selected&&i.tabSelect?i.select(void 0,void 0,t):27===e?i.close({reason:"esc"}):38!==e&&40!==e||(t.preventDefault(),i[38===e?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(t){t.preventDefault()},click:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),i.select(e,t.target,t))}}}},r.bind(this.input,this._events.input),r.bind(this.input.form,this._events.form),r.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],e.all.push(this)};function n(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}e.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if((t=r(t))&&t.children){var e=[];i.apply(t.children).forEach((function(t){if(!t.disabled){var n=t.textContent.trim(),i=t.value||n,r=t.label||n;""!==i&&e.push({label:r,value:i})}})),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(t){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),r.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),r.fire(this.input,"awesomplete-open")},destroy:function(){if(r.unbind(this.input,this._events.input),r.unbind(this.input.form,this._events.form),!this.options.container){var t=this.container.parentNode;t.insertBefore(this.input,this.container),t.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var n=e.all.indexOf(this);-1!==n&&e.all.splice(n,1)},next:function(){var t=this.ul.children.length;this.goto(this.index<t-1?this.index+1:t?0:-1)},previous:function(){var t=this.ul.children.length,e=this.index-1;this.goto(this.selected&&-1!==e?e:t-1)},goto:function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent+", list item "+(t+1)+" of "+e.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=e[t].offsetTop-this.ul.clientHeight+e[t].clientHeight,r.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e,n){if(t?this.index=r.siblingIndex(t):t=this.ul.children[this.index],t){var i=this.suggestions[this.index];r.fire(this.input,"awesomplete-select",{text:i,origin:e||t,originalEvent:n})&&(this.replace(i),this.close({reason:"select"}),r.fire(this.input,"awesomplete-selectcomplete",{text:i,originalEvent:n}))}},evaluate:function(){var t=this,e=this.input.value;e.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map((function(i){return new n(t.data(i,e))})).filter((function(n){return t.filter(n,e)})),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach((function(n,i){t.ul.appendChild(t.item(n,e,i))})),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},e.all=[],e.FILTER_CONTAINS=function(t,e){return RegExp(r.regExpEscape(e.trim()),"i").test(t)},e.FILTER_STARTSWITH=function(t,e){return RegExp("^"+r.regExpEscape(e.trim()),"i").test(t)},e.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},e.CONTAINER=function(t){return r.create("div",{className:"awesomplete",around:t})},e.ITEM=function(t,e,n){var i=""===e.trim()?t:t.replace(RegExp(r.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>");return r.create("li",{innerHTML:i,role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},e.REPLACE=function(t){this.input.value=t.value},e.DATA=function(t){return t},Object.defineProperty(n.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),n.prototype.toString=n.prototype.valueOf=function(){return""+this.label};var i=Array.prototype.slice;function r(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function o(t,e){return i.call((e||document).querySelectorAll(t))}function s(){o("input.awesomplete").forEach((function(t){new e(t)}))}r.create=function(t,e){var n=document.createElement(t);for(var i in e){var o=e[i];if("inside"===i)r(o).appendChild(n);else if("around"===i){var s=r(o);s.parentNode.insertBefore(n,s),n.appendChild(s),null!=s.getAttribute("autofocus")&&s.focus()}else i in n?n[i]=o:n.setAttribute(i,o)}return n},r.bind=function(t,e){if(t)for(var n in e){var i=e[n];n.split(/\s+/).forEach((function(e){t.addEventListener(e,i)}))}},r.unbind=function(t,e){if(t)for(var n in e){var i=e[n];n.split(/\s+/).forEach((function(e){t.removeEventListener(e,i)}))}},r.fire=function(t,e,n){var i=document.createEvent("HTMLEvents");for(var r in i.initEvent(e,!0,!0),n)i[r]=n[r];return t.dispatchEvent(i)},r.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},r.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},"undefined"!=typeof self&&(self.Awesomplete=e),"undefined"!=typeof Document&&("loading"!==document.readyState?s():document.addEventListener("DOMContentLoaded",s)),e.$=r,e.$$=o,t.exports&&(t.exports=e)}()},3877:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Alternation:()=>mt,CstParser:()=>Sn,EMPTY_ALT:()=>Qn,EOF:()=>it,EarlyExitException:()=>Ge,EmbeddedActionsParser:()=>Ln,Flat:()=>ut,GAstVisitor:()=>xt,Lexer:()=>Y,LexerDefinitionErrorType:()=>Z,MismatchedTokenException:()=>De,NoViableAltException:()=>Pe,NonTerminal:()=>ct,NotAllInputParsedException:()=>Me,Option:()=>pt,Parser:()=>Nn,ParserDefinitionErrorType:()=>yn,Repetition:()=>_t,RepetitionMandatory:()=>dt,RepetitionMandatoryWithSeparator:()=>ht,RepetitionWithSeparator:()=>ft,Rule:()=>lt,Terminal:()=>gt,VERSION:()=>i,assignOccurrenceIndices:()=>ke,clearCache:()=>Dn,createSyntaxDiagramsCode:()=>Tn,createToken:()=>nt,createTokenInstance:()=>rt,defaultGrammarResolverErrorProvider:()=>Ne,defaultGrammarValidatorErrorProvider:()=>Se,defaultLexerErrorProvider:()=>$,defaultParserErrorProvider:()=>Qe,generateParserFactory:()=>Fn,generateParserModule:()=>On,isRecognitionException:()=>Oe,resolveGrammar:()=>Re,serializeGrammar:()=>vt,serializeProduction:()=>Et,tokenLabel:()=>q,tokenMatcher:()=>ot,tokenName:()=>tt,validateGrammar:()=>Ue});var i="6.5.0",r=n(1481),o=n(4844),s={},a=new o.RegExpParser;function c(t){var e=t.toString();if(s.hasOwnProperty(e))return s[e];var n=a.pattern(e);return s[e]=n,n}var l,u=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p="Complement Sets are not supported for first char optimization",d='Unable to use "first char" lexer optimizations:\n';function h(t,e){void 0===e&&(e=!1);try{var n=c(t);return _(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===p)e&&(0,r.rr)(d+"\tUnable to optimize: < "+t.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var i="";e&&(i="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),(0,r.WB)(d+"\n\tFailed parsing: < "+t.toString()+" >\n\tUsing the regexp-to-ast library version: "+o.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+i)}}return[]}function _(t,e,n){switch(t.type){case"Disjunction":for(var i=0;i<t.value.length;i++)_(t.value[i],e,n);break;case"Alternative":var o=t.value;for(i=0;i<o.length;i++){var s=o[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var a=s;switch(a.type){case"Character":f(a.value,e,n);break;case"Set":if(!0===a.complement)throw Error(p);(0,r.Ed)(a.value,(function(t){if("number"==typeof t)f(t,e,n);else{var i=t;if(!0===n)for(var r=i.from;r<=i.to;r++)f(r,e,n);else{for(r=i.from;r<=i.to&&r<O;r++)f(r,e,n);if(i.to>=O)for(var o=i.from>=O?i.from:O,s=i.to,a=D(o),c=D(s),l=a;l<=c;l++)e[l]=l}}}));break;case"Group":_(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}var c=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===g(a)||"Group"!==a.type&&!1===c)break}break;default:throw Error("non exhaustive match!")}return(0,r.VO)(e)}function f(t,e,n){var i=D(t);e[i]=i,!0===n&&function(t,e){var n=String.fromCharCode(t),i=n.toUpperCase();if(i!==n)e[r=D(i.charCodeAt(0))]=r;else{var r,o=n.toLowerCase();o!==n&&(e[r=D(o.charCodeAt(0))]=r)}}(t,e)}function m(t,e){return(0,r.sE)(t.value,(function(t){if("number"==typeof t)return(0,r.r3)(e,t);var n=t;return void 0!==(0,r.sE)(e,(function(t){return n.from<=t&&t<=n.to}))}))}function g(t){return!(!t.quantifier||0!==t.quantifier.atLeast)||!!t.value&&((0,r.kJ)(t.value)?(0,r.yW)(t.value,g):g(t.value))}var v=function(t){function e(e){var n=t.call(this)||this;return n.targetCharCodes=e,n.found=!1,n}return u(e,t),e.prototype.visitChildren=function(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}t.prototype.visitChildren.call(this,e)}},e.prototype.visitCharacter=function(t){(0,r.r3)(this.targetCharCodes,t.value)&&(this.found=!0)},e.prototype.visitSet=function(t){t.complement?void 0===m(t,this.targetCharCodes)&&(this.found=!0):void 0!==m(t,this.targetCharCodes)&&(this.found=!0)},e}(o.BaseRegExpVisitor);function E(t,e){if(e instanceof RegExp){var n=c(e),i=new v(t);return i.visit(n),i.found}return void 0!==(0,r.sE)(e,(function(e){return(0,r.r3)(t,e.charCodeAt(0))}))}var b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),y="defaultMode",x="modes",w="boolean"==typeof new RegExp("(?:)").sticky;function Q(t,e){var n,i=(e=(0,r.ce)(e,{useSticky:w,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(t,e){return e()}})).tracer;i("initCharCodeToOptimizedIndexMap",(function(){!function(){if((0,r.xb)(P)){P=new Array(65536);for(var t=0;t<65536;t++)P[t]=t>255?255+~~(t/255):t}}()})),i("Reject Lexer.NA",(function(){n=(0,r.d1)(t,(function(t){return t.PATTERN===Y.NA}))}));var o,s,a,c,l,u,p,_,f,m,g,v=!1;i("Transform Patterns",(function(){v=!1,o=(0,r.UI)(n,(function(t){var n=t.PATTERN;if((0,r.Kj)(n)){var i=n.source;return 1===i.length&&"^"!==i&&"$"!==i&&"."!==i?i:2!==i.length||"\\"!==i[0]||(0,r.r3)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],i[1])?e.useSticky?R(n):T(n):i[1]}if((0,r.mf)(n))return v=!0,{exec:n};if((0,r.e$)(n,"exec"))return v=!0,n;if("string"==typeof n){if(1===n.length)return n;var o=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=new RegExp(o);return e.useSticky?R(s):T(s)}throw Error("non exhaustive match")}))})),i("misc mapping",(function(){s=(0,r.UI)(n,(function(t){return t.tokenTypeIdx})),a=(0,r.UI)(n,(function(t){var e=t.GROUP;if(e!==Y.SKIPPED){if((0,r.HD)(e))return e;if((0,r.o8)(e))return!1;throw Error("non exhaustive match")}})),c=(0,r.UI)(n,(function(t){var e=t.LONGER_ALT;if(e)return(0,r.cq)(n,e)})),l=(0,r.UI)(n,(function(t){return t.PUSH_MODE})),u=(0,r.UI)(n,(function(t){return(0,r.e$)(t,"POP_MODE")}))})),i("Line Terminator Handling",(function(){var t=C(e.lineTerminatorCharacters);p=(0,r.UI)(n,(function(t){return!1})),"onlyOffset"!==e.positionTracking&&(p=(0,r.UI)(n,(function(e){return(0,r.e$)(e,"LINE_BREAKS")?e.LINE_BREAKS:!1===I(e,t)?E(t,e.PATTERN):void 0})))})),i("Misc Mapping #2",(function(){_=(0,r.UI)(n,k),f=(0,r.UI)(o,B),m=(0,r.u4)(n,(function(t,e){var n=e.GROUP;return(0,r.HD)(n)&&n!==Y.SKIPPED&&(t[n]=[]),t}),{}),g=(0,r.UI)(o,(function(t,e){return{pattern:o[e],longerAlt:c[e],canLineTerminator:p[e],isCustom:_[e],short:f[e],group:a[e],push:l[e],pop:u[e],tokenTypeIdx:s[e],tokenType:n[e]}}))}));var b=!0,y=[];return e.safeMode||i("First Char Optimization",(function(){y=(0,r.u4)(n,(function(t,n,i){if("string"==typeof n.PATTERN){var o=D(n.PATTERN.charCodeAt(0));F(t,o,g[i])}else if((0,r.kJ)(n.START_CHARS_HINT)){var s;(0,r.Ed)(n.START_CHARS_HINT,(function(e){var n=D("string"==typeof e?e.charCodeAt(0):e);s!==n&&(s=n,F(t,n,g[i]))}))}else if((0,r.Kj)(n.PATTERN))if(n.PATTERN.unicode)b=!1,e.ensureOptimizations&&(0,r.WB)(d+"\tUnable to analyze < "+n.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var a=h(n.PATTERN,e.ensureOptimizations);(0,r.xb)(a)&&(b=!1),(0,r.Ed)(a,(function(e){F(t,e,g[i])}))}else e.ensureOptimizations&&(0,r.WB)(d+"\tTokenType: <"+n.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),b=!1;return t}),[])})),i("ArrayPacking",(function(){y=(0,r.X0)(y)})),{emptyGroups:m,patternIdxToConfig:g,charCodeToPatternIdxToConfig:y,hasCustom:v,canBeOptimized:b}}function N(t,e){var n=[],i=function(t){var e=(0,r.hX)(t,(function(t){return!(0,r.e$)(t,"PATTERN")}));return{errors:(0,r.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:Z.MISSING_PATTERN,tokenTypes:[t]}})),valid:(0,r.e5)(t,e)}}(t);n=n.concat(i.errors);var s=function(t){var e=(0,r.hX)(t,(function(t){var e=t.PATTERN;return!((0,r.Kj)(e)||(0,r.mf)(e)||(0,r.e$)(e,"exec")||(0,r.HD)(e))}));return{errors:(0,r.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Z.INVALID_PATTERN,tokenTypes:[t]}})),valid:(0,r.e5)(t,e)}}(i.valid),a=s.valid;return(n=(n=(n=(n=n.concat(s.errors)).concat(function(t){var e=[],n=(0,r.hX)(t,(function(t){return(0,r.Kj)(t.PATTERN)}));return(e=(e=(e=(e=e.concat(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return b(e,t),e.prototype.visitEndAnchor=function(t){this.found=!0},e}(o.BaseRegExpVisitor),n=(0,r.hX)(t,(function(t){var n=t.PATTERN;try{var i=c(n),r=new e;return r.visit(i),r.found}catch(t){return S.test(n.source)}}));return(0,r.UI)(n,(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:Z.EOI_ANCHOR_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return b(e,t),e.prototype.visitStartAnchor=function(t){this.found=!0},e}(o.BaseRegExpVisitor),n=(0,r.hX)(t,(function(t){var n=t.PATTERN;try{var i=c(n),r=new e;return r.visit(i),r.found}catch(t){return L.test(n.source)}}));return(0,r.UI)(n,(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:Z.SOI_ANCHOR_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=(0,r.hX)(t,(function(t){var e=t.PATTERN;return e instanceof RegExp&&(e.multiline||e.global)}));return(0,r.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Z.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=[],n=(0,r.UI)(t,(function(n){return(0,r.u4)(t,(function(t,i){return n.PATTERN.source!==i.PATTERN.source||(0,r.r3)(e,i)||i.PATTERN===Y.NA||(e.push(i),t.push(i)),t}),[])}));n=(0,r.oA)(n);var i=(0,r.hX)(n,(function(t){return t.length>1}));return(0,r.UI)(i,(function(t){var e=(0,r.UI)(t,(function(t){return t.name}));return{message:"The same RegExp pattern ->"+(0,r.Ps)(t).PATTERN+"<-has been used in all of the following Token Types: "+e.join(", ")+" <-",type:Z.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}(n))).concat(function(t){var e=(0,r.hX)(t,(function(t){return t.PATTERN.test("")}));return(0,r.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:Z.EMPTY_MATCH_PATTERN,tokenTypes:[t]}}))}(n))}(a))).concat(function(t){var e=(0,r.hX)(t,(function(t){if(!(0,r.e$)(t,"GROUP"))return!1;var e=t.GROUP;return e!==Y.SKIPPED&&e!==Y.NA&&!(0,r.HD)(e)}));return(0,r.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Z.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}}))}(a))).concat(function(t,e){var n=(0,r.hX)(t,(function(t){return void 0!==t.PUSH_MODE&&!(0,r.r3)(e,t.PUSH_MODE)}));return(0,r.UI)(n,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+t.PUSH_MODE+"<-which does not exist",type:Z.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}}))}(a,e))).concat(function(t){var e=[],n=(0,r.u4)(t,(function(t,e,n){var i,o,s=e.PATTERN;return s===Y.NA||((0,r.HD)(s)?t.push({str:s,idx:n,tokenType:e}):(0,r.Kj)(s)&&(i=s,o=[".","\\","[","]","|","^","$","(",")","?","*","+","{"],void 0===(0,r.sE)(o,(function(t){return-1!==i.source.indexOf(t)})))&&t.push({str:s.source,idx:n,tokenType:e})),t}),[]);return(0,r.Ed)(t,(function(t,i){(0,r.Ed)(n,(function(n){var o=n.str,s=n.idx,a=n.tokenType;if(i<s&&function(t,e){if((0,r.Kj)(e)){var n=e.exec(t);return null!==n&&0===n.index}if((0,r.mf)(e))return e(t,0,[],{});if((0,r.e$)(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(o,t.PATTERN)){var c="Token: ->"+a.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+t.name+"<-in the lexer's definition.\nSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE";e.push({message:c,type:Z.UNREACHABLE_PATTERN,tokenTypes:[t,a]})}}))})),e}(a))}var S=/[^\\][\$]/,L=/[^\\[][\^]|^\^/;function T(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function R(t){var e=t.ignoreCase?"iy":"y";return new RegExp(""+t.source,e)}function U(t,e,n){var i=[],o=!1,s=(0,r.oA)((0,r.xH)((0,r.Q8)(t.modes,(function(t){return t})))),a=(0,r.d1)(s,(function(t){return t.PATTERN===Y.NA})),c=C(n);return e&&(0,r.Ed)(a,(function(t){var e=I(t,c);if(!1!==e){var n={message:function(t,e){if(e.issue===Z.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+t.name+"> Token Type\n\t Root cause: "+e.errMsg+".\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(e.issue===Z.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+t.name+"> Token Type\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}(t,e),type:e.issue,tokenType:t};i.push(n)}else(0,r.e$)(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(o=!0):E(c,t.PATTERN)&&(o=!0)})),e&&!o&&i.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:Z.NO_LINE_BREAKS_FLAGS}),i}function k(t){var e=t.PATTERN;if((0,r.Kj)(e))return!1;if((0,r.mf)(e))return!0;if((0,r.e$)(e,"exec"))return!0;if((0,r.HD)(e))return!1;throw Error("non exhaustive match")}function B(t){return!(!(0,r.HD)(t)||1!==t.length)&&t.charCodeAt(0)}var A={test:function(t){for(var e=t.length,n=this.lastIndex;n<e;n++){var i=t.charCodeAt(n);if(10===i)return this.lastIndex=n+1,!0;if(13===i)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function I(t,e){if((0,r.e$)(t,"LINE_BREAKS"))return!1;if((0,r.Kj)(t.PATTERN)){try{E(e,t.PATTERN)}catch(t){return{issue:Z.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if((0,r.HD)(t.PATTERN))return!1;if(k(t))return{issue:Z.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function C(t){return(0,r.UI)(t,(function(t){return(0,r.HD)(t)&&t.length>0?t.charCodeAt(0):t}))}function F(t,e,n){void 0===t[e]?t[e]=[n]:t[e].push(n)}var O=256;function D(t){return t<O?t:P[t]}var P=[];function M(t,e){var n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function G(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var V=1,j={};function H(t){var e=function(t){for(var e=(0,r.Qw)(t),n=t,i=!0;i;){n=(0,r.oA)((0,r.xH)((0,r.UI)(n,(function(t){return t.CATEGORIES}))));var o=(0,r.e5)(n,e);e=e.concat(o),(0,r.xb)(o)?i=!1:n=o}return e}(t);!function(t){(0,r.Ed)(t,(function(t){var e;W(t)||(j[V]=t,t.tokenTypeIdx=V++),z(t)&&!(0,r.kJ)(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),z(t)||(t.CATEGORIES=[]),e=t,(0,r.e$)(e,"categoryMatches")||(t.categoryMatches=[]),function(t){return(0,r.e$)(t,"categoryMatchesMap")}(t)||(t.categoryMatchesMap={})}))}(e),function(t){(0,r.Ed)(t,(function(t){J([],t)}))}(e),function(t){(0,r.Ed)(t,(function(t){t.categoryMatches=[],(0,r.Ed)(t.categoryMatchesMap,(function(e,n){t.categoryMatches.push(j[n].tokenTypeIdx)}))}))}(e),(0,r.Ed)(e,(function(t){t.isParent=t.categoryMatches.length>0}))}function J(t,e){(0,r.Ed)(t,(function(t){e.categoryMatchesMap[t.tokenTypeIdx]=!0})),(0,r.Ed)(e.CATEGORIES,(function(n){var i=t.concat(e);(0,r.r3)(i,n)||J(i,n)}))}function W(t){return(0,r.e$)(t,"tokenTypeIdx")}function z(t){return(0,r.e$)(t,"CATEGORIES")}function X(t){return(0,r.e$)(t,"tokenTypeIdx")}var Z,$={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,n,i,r){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+", skipped "+n+" characters."}};!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"}(Z||(Z={}));var K={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:$,traceInitPerf:!1,skipValidations:!1};Object.freeze(K);var Y=function(){function t(t,e){var n=this;if(void 0===e&&(e=K),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=(0,r.TS)(K,e);var i=this.config.traceInitPerf;!0===i?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof i&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var i,o=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===K.lineTerminatorsPattern)n.config.lineTerminatorsPattern=A;else if(n.config.lineTerminatorCharacters===K.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),(0,r.kJ)(t)?((i={modes:{}}).modes.defaultMode=(0,r.Qw)(t),i.defaultMode=y):(o=!1,i=(0,r.Cl)(t))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(function(t,e,n){var i=[];return(0,r.e$)(t,y)||i.push({message:"A MultiMode Lexer cannot be initialized without a <defaultMode> property in its definition\n",type:Z.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,r.e$)(t,x)||i.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:Z.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,r.e$)(t,x)&&(0,r.e$)(t,y)&&!(0,r.e$)(t.modes,t.defaultMode)&&i.push({message:"A MultiMode Lexer cannot be initialized with a defaultMode: <"+t.defaultMode+">which does not exist\n",type:Z.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,r.e$)(t,x)&&(0,r.Ed)(t.modes,(function(t,e){(0,r.Ed)(t,(function(t,n){(0,r.o8)(t)&&i.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+e+"> at index: <"+n+">\n",type:Z.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),i}(i,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(U(i,n.trackStartLines,n.config.lineTerminatorCharacters))}))),i.modes=i.modes?i.modes:{},(0,r.Ed)(i.modes,(function(t,e){i.modes[e]=(0,r.d1)(t,(function(t){return(0,r.o8)(t)}))}));var a=(0,r.XP)(i.modes);if((0,r.Ed)(i.modes,(function(t,i){n.TRACE_INIT("Mode: <"+i+"> processing",(function(){var o;n.modes.push(i),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(N(t,a))})),(0,r.xb)(n.lexerDefinitionErrors)&&(H(t),n.TRACE_INIT("analyzeTokenTypes",(function(){o=Q(t,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:n.TRACE_INIT.bind(n)})})),n.patternIdxToConfig[i]=o.patternIdxToConfig,n.charCodeToPatternIdxToConfig[i]=o.charCodeToPatternIdxToConfig,n.emptyGroups=(0,r.TS)(n.emptyGroups,o.emptyGroups),n.hasCustom=o.hasCustom||n.hasCustom,n.canModeBeOptimized[i]=o.canBeOptimized)}))})),n.defaultMode=i.defaultMode,!(0,r.xb)(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var c=(0,r.UI)(n.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+c)}(0,r.Ed)(n.lexerDefinitionWarning,(function(t){(0,r.rr)(t.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(w?(n.chopInput=r.Wd,n.match=n.matchWithTest):(n.updateLastIndex=r.dG,n.match=n.matchWithExec),o&&(n.handleModes=r.dG),!1===n.trackStartLines&&(n.computeNewColumn=r.Wd),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=r.dG),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+n.config.positionTracking+'"');n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var t=(0,r.u4)(n.canModeBeOptimized,(function(t,e,n){return!1===e&&t.push(n),t}),[]);if(e.ensureOptimizations&&!(0,r.xb)(t))throw Error("Lexer Modes: < "+t.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),n.TRACE_INIT("clearRegExpParserCache",(function(){s={}})),n.TRACE_INIT("toFastProperties",(function(){(0,r.SV)(n)}))}))}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!(0,r.xb)(this.lexerDefinitionErrors)){var n=(0,r.UI)(this.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){var n,i,o,s,a,c,l,u,p,d,h,_,f,m,g,v,E,b=this,y=t,x=y.length,w=0,Q=0,N=this.hasCustom?0:Math.floor(t.length/10),S=new Array(N),L=[],T=this.trackStartLines?1:void 0,R=this.trackStartLines?1:void 0,U=(g=this.emptyGroups,v={},E=(0,r.XP)(g),(0,r.Ed)(E,(function(t){var e=g[t];if(!(0,r.kJ)(e))throw Error("non exhaustive match");v[t]=[]})),v),k=this.trackStartLines,B=this.config.lineTerminatorsPattern,A=0,I=[],C=[],F=[],O=[];Object.freeze(O);var P=void 0;function M(){return I}function G(t){var e=D(t),n=C[e];return void 0===n?O:n}var V,j=function(t){if(1===F.length&&void 0===t.tokenType.PUSH_MODE){var e=b.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);L.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{F.pop();var n=(0,r.Z$)(F);I=b.patternIdxToConfig[n],C=b.charCodeToPatternIdxToConfig[n],A=I.length;var i=b.canModeBeOptimized[n]&&!1===b.config.safeMode;P=C&&i?G:M}};function H(t){F.push(t),C=this.charCodeToPatternIdxToConfig[t],I=this.patternIdxToConfig[t],A=I.length,A=I.length;var e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;P=C&&e?G:M}for(H.call(this,e);w<x;){a=null;var J=y.charCodeAt(w),W=P(J),z=W.length;for(n=0;n<z;n++){var X=(V=W[n]).pattern;if(c=null,!1!==(rt=V.short)?J===rt&&(a=X):!0===V.isCustom?null!==(m=X.exec(y,w,S,U))?(a=m[0],void 0!==m.payload&&(c=m.payload)):a=null:(this.updateLastIndex(X,w),a=this.match(X,t,w)),null!==a){if(void 0!==(s=V.longerAlt)){var Z=I[s],$=Z.pattern;l=null,!0===Z.isCustom?null!==(m=$.exec(y,w,S,U))?(o=m[0],void 0!==m.payload&&(l=m.payload)):o=null:(this.updateLastIndex($,w),o=this.match($,t,w)),o&&o.length>a.length&&(a=o,c=l,V=Z)}break}}if(null!==a){if(u=a.length,void 0!==(p=V.group)&&(d=V.tokenTypeIdx,h=this.createTokenInstance(a,w,d,V.tokenType,T,R,u),this.handlePayload(h,c),!1===p?Q=this.addToken(S,Q,h):U[p].push(h)),t=this.chopInput(t,u),w+=u,R=this.computeNewColumn(R,u),!0===k&&!0===V.canLineTerminator){var K=0,Y=void 0,q=void 0;B.lastIndex=0;do{!0===(Y=B.test(a))&&(q=B.lastIndex-1,K++)}while(!0===Y);0!==K&&(T+=K,R=u-q,this.updateTokenEndLineColumnLocation(h,p,q,K,T,R,u))}this.handleModes(V,j,H,h)}else{for(var tt=w,et=T,nt=R,it=!1;!it&&w<x;)for(y.charCodeAt(w),t=this.chopInput(t,1),w++,i=0;i<A;i++){var rt,ot=I[i];if(X=ot.pattern,!1!==(rt=ot.short)?y.charCodeAt(w)===rt&&(it=!0):!0===ot.isCustom?it=null!==X.exec(y,w,S,U):(this.updateLastIndex(X,w),it=null!==X.exec(t)),!0===it)break}_=w-tt,f=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,tt,_,et,nt),L.push({offset:tt,line:et,column:nt,length:_,message:f})}}return this.hasCustom||(S.length=Q),{tokens:S,groups:U,errors:L}},t.prototype.handleModes=function(t,e,n,i){if(!0===t.pop){var r=t.push;e(i),void 0!==r&&n.call(this,r)}else void 0!==t.push&&n.call(this,t.push)},t.prototype.chopInput=function(t,e){return t.substring(e)},t.prototype.updateLastIndex=function(t,e){t.lastIndex=e},t.prototype.updateTokenEndLineColumnLocation=function(t,e,n,i,r,o,s){var a,c;void 0!==e&&(c=(a=n===s-1)?-1:0,1===i&&!0===a||(t.endLine=r+c,t.endColumn=o-1-c))},t.prototype.computeNewColumn=function(t,e){return t+e},t.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},t.prototype.createOffsetOnlyToken=function(t,e,n,i){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:i}},t.prototype.createStartOnlyToken=function(t,e,n,i,r,o){return{image:t,startOffset:e,startLine:r,startColumn:o,tokenTypeIdx:n,tokenType:i}},t.prototype.createFullToken=function(t,e,n,i,r,o,s){return{image:t,startOffset:e,endOffset:e+s-1,startLine:r,endLine:r,startColumn:o,endColumn:o+s-1,tokenTypeIdx:n,tokenType:i}},t.prototype.addToken=function(t,e,n){return 666},t.prototype.addTokenUsingPush=function(t,e,n){return t.push(n),e},t.prototype.addTokenUsingMemberAccess=function(t,e,n){return t[e]=n,++e},t.prototype.handlePayload=function(t,e){},t.prototype.handlePayloadNoCustom=function(t,e){},t.prototype.handlePayloadWithCustom=function(t,e){null!==e&&(t.payload=e)},t.prototype.match=function(t,e,n){return null},t.prototype.matchWithTest=function(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null},t.prototype.matchWithExec=function(t,e){var n=t.exec(e);return null!==n?n[0]:n},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+t+">");var i=(0,r.HT)(e),o=i.time,s=i.value,a=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(n+"<-- <"+t+"> time: "+o+"ms"),this.traceInitIndent--,s}return e()},t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t}();function q(t){return et(t)?t.LABEL:t.name}function tt(t){return t.name}function et(t){return(0,r.HD)(t.LABEL)&&""!==t.LABEL}function nt(t){return function(t){var e=t.pattern,n={};if(n.name=t.name,(0,r.o8)(e)||(n.PATTERN=e),(0,r.e$)(t,"parent"))throw"The parent property is no longer supported.\nSee: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.";return(0,r.e$)(t,"categories")&&(n.CATEGORIES=t.categories),H([n]),(0,r.e$)(t,"label")&&(n.LABEL=t.label),(0,r.e$)(t,"group")&&(n.GROUP=t.group),(0,r.e$)(t,"pop_mode")&&(n.POP_MODE=t.pop_mode),(0,r.e$)(t,"push_mode")&&(n.PUSH_MODE=t.push_mode),(0,r.e$)(t,"longer_alt")&&(n.LONGER_ALT=t.longer_alt),(0,r.e$)(t,"line_breaks")&&(n.LINE_BREAKS=t.line_breaks),(0,r.e$)(t,"start_chars_hint")&&(n.START_CHARS_HINT=t.start_chars_hint),n}(t)}var it=nt({name:"EOF",pattern:Y.NA});function rt(t,e,n,i,r,o,s,a){return{image:e,startOffset:n,endOffset:i,startLine:r,endLine:o,startColumn:s,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function ot(t,e){return M(t,e)}H([it]);var st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),at=function(){function t(t){this.definition=t}return t.prototype.accept=function(t){t.visit(this),(0,r.Ed)(this.definition,(function(e){e.accept(t)}))},t}(),ct=function(t){function e(e){var n=t.call(this,[])||this;return n.idx=1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(at),lt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.orgText="",(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),ut=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.ignoreAmbiguities=!1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),pt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),dt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),ht=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),_t=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),ft=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),mt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,(0,r.f0)(n,(0,r.ei)(e,(function(t){return void 0!==t}))),n}return st(e,t),e}(at),gt=function(){function t(t){this.idx=1,(0,r.f0)(this,(0,r.ei)(t,(function(t){return void 0!==t})))}return t.prototype.accept=function(t){t.visit(this)},t}();function vt(t){return(0,r.UI)(t,Et)}function Et(t){function e(t){return(0,r.UI)(t,Et)}if(t instanceof ct)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof ut)return{type:"Flat",definition:e(t.definition)};if(t instanceof pt)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof dt)return{type:"RepetitionMandatory",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof ht)return{type:"RepetitionMandatoryWithSeparator",name:t.name,idx:t.idx,separator:Et(new gt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ft)return{type:"RepetitionWithSeparator",name:t.name,idx:t.idx,separator:Et(new gt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof _t)return{type:"Repetition",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof mt)return{type:"Alternation",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof gt){var n={type:"Terminal",name:t.terminalType.name,label:q(t.terminalType),idx:t.idx},i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=(0,r.Kj)(i)?i.source:i),n}if(t instanceof lt)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}var bt=function(){function t(){}return t.prototype.walk=function(t,e){var n=this;void 0===e&&(e=[]),(0,r.Ed)(t.definition,(function(i,o){var s=(0,r.Cw)(t.definition,o+1);if(i instanceof ct)n.walkProdRef(i,s,e);else if(i instanceof gt)n.walkTerminal(i,s,e);else if(i instanceof ut)n.walkFlat(i,s,e);else if(i instanceof pt)n.walkOption(i,s,e);else if(i instanceof dt)n.walkAtLeastOne(i,s,e);else if(i instanceof ht)n.walkAtLeastOneSep(i,s,e);else if(i instanceof ft)n.walkManySep(i,s,e);else if(i instanceof _t)n.walkMany(i,s,e);else{if(!(i instanceof mt))throw Error("non exhaustive match");n.walkOr(i,s,e)}}))},t.prototype.walkTerminal=function(t,e,n){},t.prototype.walkProdRef=function(t,e,n){},t.prototype.walkFlat=function(t,e,n){var i=e.concat(n);this.walk(t,i)},t.prototype.walkOption=function(t,e,n){var i=e.concat(n);this.walk(t,i)},t.prototype.walkAtLeastOne=function(t,e,n){var i=[new pt({definition:t.definition})].concat(e,n);this.walk(t,i)},t.prototype.walkAtLeastOneSep=function(t,e,n){var i=yt(t,e,n);this.walk(t,i)},t.prototype.walkMany=function(t,e,n){var i=[new pt({definition:t.definition})].concat(e,n);this.walk(t,i)},t.prototype.walkManySep=function(t,e,n){var i=yt(t,e,n);this.walk(t,i)},t.prototype.walkOr=function(t,e,n){var i=this,o=e.concat(n);(0,r.Ed)(t.definition,(function(t){var e=new ut({definition:[t]});i.walk(e,o)}))},t}();function yt(t,e,n){return[new pt({definition:[new gt({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}var xt=function(){function t(){}return t.prototype.visit=function(t){var e=t;switch(e.constructor){case ct:return this.visitNonTerminal(e);case ut:return this.visitFlat(e);case pt:return this.visitOption(e);case dt:return this.visitRepetitionMandatory(e);case ht:return this.visitRepetitionMandatoryWithSeparator(e);case ft:return this.visitRepetitionWithSeparator(e);case _t:return this.visitRepetition(e);case mt:return this.visitAlternation(e);case gt:return this.visitTerminal(e);case lt:return this.visitRule(e);default:throw Error("non exhaustive match")}},t.prototype.visitNonTerminal=function(t){},t.prototype.visitFlat=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}(),wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Qt(t,e){return void 0===e&&(e=[]),!!(t instanceof pt||t instanceof _t||t instanceof ft)||(t instanceof mt?(0,r.G)(t.definition,(function(t){return Qt(t,e)})):!(t instanceof ct&&(0,r.r3)(e,t))&&t instanceof at&&(t instanceof ct&&e.push(t),(0,r.yW)(t.definition,(function(t){return Qt(t,e)}))))}function Nt(t){if(t instanceof ct)return"SUBRULE";if(t instanceof pt)return"OPTION";if(t instanceof mt)return"OR";if(t instanceof dt)return"AT_LEAST_ONE";if(t instanceof ht)return"AT_LEAST_ONE_SEP";if(t instanceof ft)return"MANY_SEP";if(t instanceof _t)return"MANY";if(t instanceof gt)return"CONSUME";throw Error("non exhaustive match")}var St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.separator="-",e.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return wt(e,t),e.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},e.prototype.visitTerminal=function(t){var e=t.terminalType.name+this.separator+"Terminal";(0,r.e$)(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitNonTerminal=function(t){var e=t.nonTerminalName+this.separator+"Terminal";(0,r.e$)(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitOption=function(t){this.dslMethods.option.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.dslMethods.repetitionWithSeparator.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.dslMethods.repetitionMandatory.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)},e.prototype.visitRepetition=function(t){this.dslMethods.repetition.push(t)},e.prototype.visitAlternation=function(t){this.dslMethods.alternation.push(t)},e}(xt),Lt=new St;function Tt(t){if(t instanceof ct)return Tt(t.referencedRule);if(t instanceof gt)return[t.terminalType];if(function(t){return t instanceof ut||t instanceof pt||t instanceof _t||t instanceof dt||t instanceof ht||t instanceof ft||t instanceof gt||t instanceof lt}(t))return function(t){for(var e,n=[],i=t.definition,o=0,s=i.length>o,a=!0;s&&a;)a=Qt(e=i[o]),n=n.concat(Tt(e)),o+=1,s=i.length>o;return(0,r.jj)(n)}(t);if(function(t){return t instanceof mt}(t))return function(t){var e=(0,r.UI)(t.definition,(function(t){return Tt(t)}));return(0,r.jj)((0,r.xH)(e))}(t);throw Error("non exhaustive match")}var Rt="_~IN~_",Ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kt=function(t){function e(e){var n=t.call(this)||this;return n.topProd=e,n.follows={},n}return Ut(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,n){},e.prototype.walkProdRef=function(t,e,n){var i,r,o=(i=t.referencedRule,r=t.idx,i.name+r+Rt+this.topProd.name),s=e.concat(n),a=Tt(new ut({definition:s}));this.follows[o]=a},e}(bt),Bt=256,At=512,It=768,Ct=1024,Ft=1280,Ot=1536;function Dt(t,e,n){return n|e|t}function Pt(t,e,n,i){var r=i+1<<24;return Dt(t,e,n)|r}var Mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Gt(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset)}function Vt(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function jt(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)}var Ht=function(t){function e(e){var n=t.call(this)||this;return n.result=[],n.ruleIdx=e,n}return Mt(e,t),e.prototype.collectNamedDSLMethod=function(t,e,n){if(!(0,r.o8)(t.name)){var i=void 0;if(t instanceof pt||t instanceof _t||t instanceof dt||t instanceof mt)i=new e({definition:t.definition,idx:t.idx});else{if(!(t instanceof ht||t instanceof ft))throw Error("non exhaustive match");i=new e({definition:t.definition,idx:t.idx,separator:t.separator})}var o=[i],s=Dt(this.ruleIdx,n,t.idx);this.result.push({def:o,key:s,name:t.name,orgProd:t})}},e.prototype.visitOption=function(t){this.collectNamedDSLMethod(t,pt,At)},e.prototype.visitRepetition=function(t){this.collectNamedDSLMethod(t,_t,It)},e.prototype.visitRepetitionMandatory=function(t){this.collectNamedDSLMethod(t,dt,Ct)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.collectNamedDSLMethod(t,ht,Ot)},e.prototype.visitRepetitionWithSeparator=function(t){this.collectNamedDSLMethod(t,ft,Ft)},e.prototype.visitAlternation=function(t){var e=this;this.collectNamedDSLMethod(t,mt,Bt);var n=t.definition.length>1;(0,r.Ed)(t.definition,(function(i,o){if(!(0,r.o8)(i.name)){var s=i.definition;s=n?[new pt({definition:i.definition})]:i.definition;var a=Pt(e.ruleIdx,Bt,t.idx,o);e.result.push({def:s,key:a,name:i.name,orgProd:i})}}))},e}(xt),Jt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Wt=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.path=n,i.nextTerminalName="",i.nextTerminalOccurrence=0,i.nextTerminalName=i.path.lastTok.name,i.nextTerminalOccurrence=i.path.lastTokOccurrence,i}return Jt(e,t),e.prototype.walkTerminal=function(t,e,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){var i=e.concat(n),r=new ut({definition:i});this.possibleTokTypes=Tt(r),this.found=!0}},e}(function(t){function e(e,n){var i=t.call(this)||this;return i.topProd=e,i.path=n,i.possibleTokTypes=[],i.nextProductionName="",i.nextProductionOccurrence=0,i.found=!1,i.isAtEndOfPath=!1,i}return Jt(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,r.Qw)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,r.Qw)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,n){void 0===n&&(n=[]),this.found||t.prototype.walk.call(this,e,n)},e.prototype.walkProdRef=function(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){var i=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,i)}},e.prototype.updateExpectedNext=function(){(0,r.xb)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(bt)),zt=function(t){function e(e,n){var i=t.call(this)||this;return i.topRule=e,i.occurrence=n,i.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},i}return Jt(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(bt),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jt(e,t),e.prototype.walkMany=function(e,n,i){if(e.idx===this.occurrence){var o=(0,r.Ps)(n.concat(i));this.result.isEndOfRule=void 0===o,o instanceof gt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkMany.call(this,e,n,i)},e}(zt),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jt(e,t),e.prototype.walkManySep=function(e,n,i){if(e.idx===this.occurrence){var o=(0,r.Ps)(n.concat(i));this.result.isEndOfRule=void 0===o,o instanceof gt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkManySep.call(this,e,n,i)},e}(zt),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jt(e,t),e.prototype.walkAtLeastOne=function(e,n,i){if(e.idx===this.occurrence){var o=(0,r.Ps)(n.concat(i));this.result.isEndOfRule=void 0===o,o instanceof gt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkAtLeastOne.call(this,e,n,i)},e}(zt),Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jt(e,t),e.prototype.walkAtLeastOneSep=function(e,n,i){if(e.idx===this.occurrence){var o=(0,r.Ps)(n.concat(i));this.result.isEndOfRule=void 0===o,o instanceof gt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkAtLeastOneSep.call(this,e,n,i)},e}(zt);function Yt(t,e,n){void 0===n&&(n=[]),n=(0,r.Qw)(n);var i=[],o=0;function s(s){var a=Yt(s.concat((0,r.Cw)(t,o+1)),e,n);return i.concat(a)}for(;n.length<e&&o<t.length;){var a=t[o];if(a instanceof ut)return s(a.definition);if(a instanceof ct)return s(a.definition);if(a instanceof pt)i=s(a.definition);else{if(a instanceof dt)return s(c=a.definition.concat([new _t({definition:a.definition})]));if(a instanceof ht)return s(c=[new ut({definition:a.definition}),new _t({definition:[new gt({terminalType:a.separator})].concat(a.definition)})]);if(a instanceof ft){var c=a.definition.concat([new _t({definition:[new gt({terminalType:a.separator})].concat(a.definition)})]);i=s(c)}else if(a instanceof _t)c=a.definition.concat([new _t({definition:a.definition})]),i=s(c);else{if(a instanceof mt)return(0,r.Ed)(a.definition,(function(t){i=s(t.definition)})),i;if(!(a instanceof gt))throw Error("non exhaustive match");n.push(a.terminalType)}}o++}return i.push({partialPath:n,suffixDef:(0,r.Cw)(t,o)}),i}function qt(t,e,n,i){var o="EXIT_NONE_TERMINAL",s=[o],a="EXIT_ALTERNATIVE",c=!1,l=e.length,u=l-i-1,p=[],d=[];for(d.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!(0,r.xb)(d);){var h=d.pop();if(h!==a){var _=h.def,f=h.idx,m=h.ruleStack,g=h.occurrenceStack;if(!(0,r.xb)(_)){var v=_[0];if(v===o){var E={idx:f,def:(0,r.Cw)(_),ruleStack:(0,r.j7)(m),occurrenceStack:(0,r.j7)(g)};d.push(E)}else if(v instanceof gt)if(f<l-1){var b=f+1;n(e[b],v.terminalType)&&(E={idx:b,def:(0,r.Cw)(_),ruleStack:m,occurrenceStack:g},d.push(E))}else{if(f!==l-1)throw Error("non exhaustive match");p.push({nextTokenType:v.terminalType,nextTokenOccurrence:v.idx,ruleStack:m,occurrenceStack:g}),c=!0}else if(v instanceof ct){var y=(0,r.Qw)(m);y.push(v.nonTerminalName);var x=(0,r.Qw)(g);x.push(v.idx),E={idx:f,def:v.definition.concat(s,(0,r.Cw)(_)),ruleStack:y,occurrenceStack:x},d.push(E)}else if(v instanceof pt){var w={idx:f,def:(0,r.Cw)(_),ruleStack:m,occurrenceStack:g};d.push(w),d.push(a);var Q={idx:f,def:v.definition.concat((0,r.Cw)(_)),ruleStack:m,occurrenceStack:g};d.push(Q)}else if(v instanceof dt){var N=new _t({definition:v.definition,idx:v.idx});E={idx:f,def:v.definition.concat([N],(0,r.Cw)(_)),ruleStack:m,occurrenceStack:g},d.push(E)}else if(v instanceof ht){var S=new gt({terminalType:v.separator});N=new _t({definition:[S].concat(v.definition),idx:v.idx}),E={idx:f,def:v.definition.concat([N],(0,r.Cw)(_)),ruleStack:m,occurrenceStack:g},d.push(E)}else if(v instanceof ft){w={idx:f,def:(0,r.Cw)(_),ruleStack:m,occurrenceStack:g},d.push(w),d.push(a),S=new gt({terminalType:v.separator});var L=new _t({definition:[S].concat(v.definition),idx:v.idx});Q={idx:f,def:v.definition.concat([L],(0,r.Cw)(_)),ruleStack:m,occurrenceStack:g},d.push(Q)}else if(v instanceof _t)w={idx:f,def:(0,r.Cw)(_),ruleStack:m,occurrenceStack:g},d.push(w),d.push(a),L=new _t({definition:v.definition,idx:v.idx}),Q={idx:f,def:v.definition.concat([L],(0,r.Cw)(_)),ruleStack:m,occurrenceStack:g},d.push(Q);else if(v instanceof mt)for(var T=v.definition.length-1;T>=0;T--){var R={idx:f,def:v.definition[T].definition.concat((0,r.Cw)(_)),ruleStack:m,occurrenceStack:g};d.push(R),d.push(a)}else if(v instanceof ut)d.push({idx:f,def:v.definition.concat((0,r.Cw)(_)),ruleStack:m,occurrenceStack:g});else{if(!(v instanceof lt))throw Error("non exhaustive match");d.push(te(v,f,m,g))}}}else c&&(0,r.Z$)(d).idx<=u&&d.pop()}return p}function te(t,e,n,i){var o=(0,r.Qw)(n);o.push(t.name);var s=(0,r.Qw)(i);return s.push(1),{idx:e,def:t.definition,ruleStack:o,occurrenceStack:s}}var ee,ne=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(ee||(ee={}));var ie=function(t){function e(e,n,i){var r=t.call(this)||this;return r.topProd=e,r.targetOccurrence=n,r.targetProdType=i,r}return ne(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,n,i){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(i),!0)},e.prototype.walkOption=function(e,n,i){this.checkIsTarget(e,ee.OPTION,n,i)||t.prototype.walkOption.call(this,e,n,i)},e.prototype.walkAtLeastOne=function(e,n,i){this.checkIsTarget(e,ee.REPETITION_MANDATORY,n,i)||t.prototype.walkOption.call(this,e,n,i)},e.prototype.walkAtLeastOneSep=function(e,n,i){this.checkIsTarget(e,ee.REPETITION_MANDATORY_WITH_SEPARATOR,n,i)||t.prototype.walkOption.call(this,e,n,i)},e.prototype.walkMany=function(e,n,i){this.checkIsTarget(e,ee.REPETITION,n,i)||t.prototype.walkOption.call(this,e,n,i)},e.prototype.walkManySep=function(e,n,i){this.checkIsTarget(e,ee.REPETITION_WITH_SEPARATOR,n,i)||t.prototype.walkOption.call(this,e,n,i)},e}(bt),re=function(t){function e(e,n,i){var r=t.call(this)||this;return r.targetOccurrence=e,r.targetProdType=n,r.targetRef=i,r.result=[],r}return ne(e,t),e.prototype.checkIsTarget=function(t,e){t.idx!==this.targetOccurrence||this.targetProdType!==e||void 0!==this.targetRef&&t!==this.targetRef||(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,ee.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,ee.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,ee.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,ee.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,ee.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,ee.ALTERNATION)},e}(xt);function oe(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=[];return e}function se(t){for(var e=[""],n=0;n<t.length;n++){for(var i=t[n],r=[],o=0;o<e.length;o++){var s=e[o];r.push(s+"_"+i.tokenTypeIdx);for(var a=0;a<i.categoryMatches.length;a++){var c="_"+i.categoryMatches[a];r.push(s+c)}}e=r}return e}function ae(t,e,n){for(var i=0;i<t.length;i++)if(i!==n)for(var r=t[i],o=0;o<e.length;o++)if(!0===r[e[o]])return!1;return!0}function ce(t,e){for(var n=(0,r.UI)(t,(function(t){return Yt([t],1)})),i=oe(n.length),o=(0,r.UI)(n,(function(t){var e={};return(0,r.Ed)(t,(function(t){var n=se(t.partialPath);(0,r.Ed)(n,(function(t){e[t]=!0}))})),e})),s=n,a=1;a<=e;a++){var c=s;s=oe(c.length);for(var l=function(t){for(var n=c[t],l=0;l<n.length;l++){var u=n[l].partialPath,p=n[l].suffixDef,d=se(u);if(ae(o,d,t)||(0,r.xb)(p)||u.length===e){var h=i[t];if(!1===pe(h,u)){h.push(u);for(var _=0;_<d.length;_++){var f=d[_];o[t][f]=!0}}}else{var m=Yt(p,a+1,u);s[t]=s[t].concat(m),(0,r.Ed)(m,(function(e){var n=se(e.partialPath);(0,r.Ed)(n,(function(e){o[t][e]=!0}))}))}}},u=0;u<c.length;u++)l(u)}return i}function le(t,e,n,i){var r=new re(t,ee.ALTERNATION,i);return e.accept(r),ce(r.result,n)}function ue(t,e,n,i){var r=new re(t,n);e.accept(r);var o=r.result,s=new ie(e,t,n).startWalking();return ce([new ut({definition:o}),new ut({definition:s})],i)}function pe(t,e){t:for(var n=0;n<t.length;n++){var i=t[n];if(i.length===e.length){for(var r=0;r<i.length;r++){var o=e[r],s=i[r];if(!1==(o===s||void 0!==s.categoryMatchesMap[o.tokenTypeIdx]))continue t}return!0}}return!1}function de(t){return(0,r.yW)(t,(function(t){return(0,r.yW)(t,(function(t){return(0,r.yW)(t,(function(t){return(0,r.xb)(t.categoryMatches)}))}))}))}var he=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function _e(t,e,n,i,o,s){var a=r.UI(t,(function(t){return function(t,e){var n=new ge;t.accept(n);var i=n.allProductions,o=r.vM(i,fe),s=r.ei(o,(function(t){return t.length>1}));return r.UI(r.VO(s),(function(n){var i=r.Ps(n),o=e.buildDuplicateFoundError(t,n),s=Nt(i),a={message:o,type:yn.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:s,occurrence:i.idx},c=me(i);return c&&(a.parameter=c),a}))}(t,o)})),c=r.UI(t,(function(t){return be(t,t,o)})),l=[],u=[],p=[];(0,r.yW)(c,r.xb)&&(l=(0,r.UI)(t,(function(t){return function(t,e){var n=new xe;t.accept(n);var i=n.alternations;return r.u4(i,(function(n,i){var o=r.j7(i.definition),s=r.UI(o,(function(n,o){var s=qt([n],[],null,1);return r.xb(s)?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:o}),type:yn.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:o+1}:null}));return n.concat(r.oA(s))}),[])}(t,o)})),u=(0,r.UI)(t,(function(t){return function(t,e,n,i){var o=new xe;t.accept(o);var s=o.alternations,a=n[t.name];return a&&(s=(0,r.d1)(s,(function(t){return a[Nt(t)+(0===t.idx?"":t.idx)]}))),s=(0,r.d1)(s,(function(t){return!0===t.ignoreAmbiguities})),r.u4(s,(function(n,o){var s=o.idx,a=o.maxLookahead||e,c=le(s,t,a,o),l=function(t,e,n,i){var o=[],s=(0,r.u4)(t,(function(n,i,s){return!0===e.definition[s].ignoreAmbiguities||(0,r.Ed)(i,(function(i){var a=[s];(0,r.Ed)(t,(function(t,n){s!==n&&pe(t,i)&&!0!==e.definition[n].ignoreAmbiguities&&a.push(n)})),a.length>1&&!pe(o,i)&&(o.push(i),n.push({alts:a,path:i}))})),n}),[]);return r.UI(s,(function(t){var o=(0,r.UI)(t.alts,(function(t){return t+1}));return{message:i.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:o,prefixPath:t.path}),type:yn.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:[t.alts]}}))}(c,o,t,i),u=function(t,e,n,i){var o=[],s=(0,r.u4)(t,(function(t,e,n){var i=(0,r.UI)(e,(function(t){return{idx:n,path:t}}));return t.concat(i)}),[]);return(0,r.Ed)(s,(function(t){if(!0!==e.definition[t.idx].ignoreAmbiguities){var a=t.idx,c=t.path,l=(0,r.Oq)(s,(function(t){return!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<a&&(n=t.path,i=c,n.length<i.length&&(0,r.yW)(n,(function(t,e){var n=i[e];return t===n||n.categoryMatchesMap[t.tokenTypeIdx]})));var n,i})),u=(0,r.UI)(l,(function(t){var r=[t.idx+1,a+1],o=0===e.idx?"":e.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:r,prefixPath:t.path}),type:yn.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:r}}));o=o.concat(u)}})),o}(c,o,t,i);return n.concat(l,u)}),[])}(t,e,i,o)})),p=function(t,e,n){var i=[];return(0,r.Ed)(t,(function(t){var o=new we;t.accept(o);var s=o.allProductions;(0,r.Ed)(s,(function(o){var s=function(t){if(t instanceof pt)return ee.OPTION;if(t instanceof _t)return ee.REPETITION;if(t instanceof dt)return ee.REPETITION_MANDATORY;if(t instanceof ht)return ee.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof ft)return ee.REPETITION_WITH_SEPARATOR;if(t instanceof mt)return ee.ALTERNATION;throw Error("non exhaustive match")}(o),a=o.maxLookahead||e,c=ue(o.idx,t,s,a)[0];if((0,r.xb)((0,r.xH)(c))){var l=n.buildEmptyRepetitionError({topLevelRule:t,repetition:o});i.push({message:l,type:yn.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),i}(t,e,o));var d=function(t,e,n){var i=[],o=(0,r.UI)(e,(function(t){return t.name}));return(0,r.Ed)(t,(function(t){var e=t.name;if((0,r.r3)(o,e)){var s=n.buildNamespaceConflictError(t);i.push({message:s,type:yn.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),i}(t,n,o),h=r.UI(n,(function(t){return function(t,e){var n=[];return t.name.match(ve)||n.push({message:e.buildTokenNameError({tokenType:t,expectedPattern:ve}),type:yn.INVALID_TOKEN_NAME}),n}(t,o)})),_=function(t,e){var n=[];return(0,r.Ed)(t,(function(t){var i=new Ht("");t.accept(i);var o=(0,r.UI)(i.result,(function(t){return t.orgProd}));n.push((0,r.UI)(o,(function(n){return function(t,e,n){var i,r=[];return e.name.match(Ee)||(i=n.buildInvalidNestedRuleNameError(t,e),r.push({message:i,type:yn.INVALID_NESTED_RULE_NAME,ruleName:t.name})),r}(t,n,e)})))})),(0,r.xH)(n)}(t,o),f=function(t,e){var n=[];return(0,r.Ed)(t,(function(t){var i=new Ht("");t.accept(i);var o=(0,r.vM)(i.result,(function(t){return t.name})),s=(0,r.ei)(o,(function(t){return t.length>1}));(0,r.Ed)((0,r.VO)(s),(function(i){var o=(0,r.UI)(i,(function(t){return t.orgProd})),s=e.buildDuplicateNestedRuleNameError(t,o);n.push({message:s,type:yn.DUPLICATE_NESTED_NAME,ruleName:t.name})}))})),n}(t,o),m=(0,r.UI)(t,(function(t){return function(t,e){var n=new xe;t.accept(n);var i=n.alternations;return r.u4(i,(function(n,i){return i.definition.length>255&&n.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:i}),type:yn.TOO_MANY_ALTS,ruleName:t.name,occurrence:i.idx}),n}),[])}(t,o)})),g=(0,r.UI)(t,(function(t){return function(t,e){var n=[],i=t.name;return i.match(ve)||n.push({message:e.buildInvalidRuleNameError({topLevelRule:t,expectedPattern:ve}),type:yn.INVALID_RULE_NAME,ruleName:i}),n}(t,o)})),v=(0,r.UI)(t,(function(e){return function(t,e,n,i){var o=[];if((0,r.u4)(e,(function(e,n){return n.name===t.name?e+1:e}),0)>1){var s=i.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});o.push({message:s,type:yn.DUPLICATE_RULE_NAME,ruleName:t.name})}return o}(e,t,s,o)}));return r.xH(a.concat(h,_,f,p,c,l,u,d,m,g,v))}function fe(t){return Nt(t)+"_#_"+t.idx+"_#_"+me(t)}function me(t){return t instanceof gt?t.terminalType.name:t instanceof ct?t.nonTerminalName:""}var ge=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return he(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(xt),ve=/^[a-zA-Z_]\w*$/,Ee=new RegExp(ve.source.replace("^","^\\$"));function be(t,e,n,i){void 0===i&&(i=[]);var o=[],s=ye(e.definition);if(r.xb(s))return[];var a=t.name;r.r3(s,t)&&o.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:i}),type:yn.LEFT_RECURSION,ruleName:a});var c=r.e5(s,i.concat([t])),l=r.UI(c,(function(e){var o=r.Qw(i);return o.push(e),be(t,e,n,o)}));return o.concat(r.xH(l))}function ye(t){var e=[];if(r.xb(t))return e;var n=r.Ps(t);if(n instanceof ct)e.push(n.referencedRule);else if(n instanceof ut||n instanceof pt||n instanceof dt||n instanceof ht||n instanceof ft||n instanceof _t)e=e.concat(ye(n.definition));else if(n instanceof mt)e=r.xH(r.UI(n.definition,(function(t){return ye(t.definition)})));else if(!(n instanceof gt))throw Error("non exhaustive match");var i=Qt(n),o=t.length>1;if(i&&o){var s=r.Cw(t);return e.concat(ye(s))}return e}var xe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alternations=[],e}return he(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(xt),we=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return he(e,t),e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e}(xt),Qe={buildMismatchTokenMessage:function(t){var e=t.expected,n=t.actual;return t.previous,t.ruleName,"Expecting "+(et(e)?"--\x3e "+q(e)+" <--":"token of type --\x3e "+e.name+" <--")+" but found --\x3e '"+n.image+"' <--"},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;return t.ruleName,"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage:function(t){var e=t.expectedPathsPerAlt,n=t.actual,i=(t.previous,t.customUserDescription),o=(t.ruleName,"Expecting: "),s="\nbut found: '"+(0,r.Ps)(n).image+"'";if(i)return o+i+s;var a=(0,r.u4)(e,(function(t,e){return t.concat(e)}),[]),c=(0,r.UI)(a,(function(t){return"["+(0,r.UI)(t,(function(t){return q(t)})).join(", ")+"]"}));return o+"one of these possible Token sequences:\n"+(0,r.UI)(c,(function(t,e){return"  "+(e+1)+". "+t})).join("\n")+s},buildEarlyExitMessage:function(t){var e=t.expectedIterationPaths,n=t.actual,i=t.customUserDescription,o=(t.ruleName,"Expecting: "),s="\nbut found: '"+(0,r.Ps)(n).image+"'";return i?o+i+s:o+"expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+(0,r.UI)(e,(function(t){return"["+(0,r.UI)(t,(function(t){return q(t)})).join(",")+"]"})).join(" ,")+">"+s}};Object.freeze(Qe);var Ne={buildRuleNotFoundError:function(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"}},Se={buildDuplicateFoundError:function(t,e){var n,i=t.name,o=(0,r.Ps)(e),s=o.idx,a=Nt(o),c=(n=o)instanceof gt?n.terminalType.name:n instanceof ct?n.nonTerminalName:"",l="->"+a+(s>0?s:"")+"<- "+(c?"with argument: ->"+c+"<-":"")+"\n                  appears more than once ("+e.length+" times) in the top level rule: ->"+i+"<-.                  \n                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return(l=l.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildInvalidNestedRuleNameError:function(t,e){return"Invalid nested rule name: ->"+e.name+"<- inside rule: ->"+t.name+"<-\nit must match the pattern: ->"+Ee.toString()+"<-.\nNote that this means a nested rule name must start with the '$'(dollar) sign."},buildDuplicateNestedRuleNameError:function(t,e){return"Duplicate nested rule name: ->"+(0,r.Ps)(e).name+"<- inside rule: ->"+t.name+"<-\nA nested name must be unique in the scope of a top level grammar rule."},buildNamespaceConflictError:function(t){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+t.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(t){var e=(0,r.UI)(t.prefixPath,(function(t){return q(t)})).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return"Ambiguous alternatives: <"+t.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+n+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+e+"> may appears as a prefix path in all these alternatives.\nSee: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(t){var e=(0,r.UI)(t.prefixPath,(function(t){return q(t)})).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return"Ambiguous Alternatives Detected: <"+t.ambiguityIndices.join(" ,")+"> in <OR"+n+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+e+"> may appears as a prefix path in all these alternatives.\n"+"See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(t){var e=Nt(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),"The repetition <"+e+"> within Rule <"+t.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(t){return"Invalid Grammar Token name: ->"+t.tokenType.name+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-"},buildEmptyAlternationError:function(t){return"Ambiguous empty alternative: <"+(t.emptyChoiceIdx+1)+"> in <OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(t){return"An Alternation cannot have more than 256 alternatives:\n<OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\n has "+(t.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(t){var e=t.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+e+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+e+" --\x3e "+r.UI(t.leftRecursionPath,(function(t){return t.name})).concat([e]).join(" --\x3e ")+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(t){return"Invalid grammar rule name: ->"+t.topLevelRule.name+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-"},buildDuplicateRuleNameError:function(t){return"Duplicate definition, rule: ->"+(t.topLevelRule instanceof lt?t.topLevelRule.name:t.topLevelRule)+"<- is already defined in the grammar: ->"+t.grammarName+"<-"}},Le=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Te=function(t){function e(e,n){var i=t.call(this)||this;return i.nameToTopRule=e,i.errMsgProvider=n,i.errors=[],i}return Le(e,t),e.prototype.resolveRefs=function(){var t=this;(0,r.Ed)((0,r.VO)(this.nameToTopRule),(function(e){t.currTopLevel=e,e.accept(t)}))},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:yn.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(xt);function Re(t){t=(0,r.ce)(t,{errMsgProvider:Ne});var e,n,i,o={};return(0,r.Ed)(t.rules,(function(t){o[t.name]=t})),e=o,n=t.errMsgProvider,(i=new Te(e,n)).resolveRefs(),i.errors}function Ue(t){return _e((t=(0,r.ce)(t,{errMsgProvider:Se,ignoredIssues:{}})).rules,t.maxLookahead,t.tokenTypes,t.ignoredIssues,t.errMsgProvider,t.grammarName)}function ke(t){(0,r.Ed)(t.rules,(function(t){var e=new St;t.accept(e),(0,r.Ed)(e.dslMethods,(function(t){(0,r.Ed)(t,(function(t,e){t.idx=e+1}))}))}))}var Be="MismatchedTokenException",Ae="NoViableAltException",Ie="EarlyExitException",Ce="NotAllInputParsedException",Fe=[Be,Ae,Ie,Ce];function Oe(t){return(0,r.r3)(Fe,t.name)}function De(t,e,n){this.name=Be,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function Pe(t,e,n){this.name=Ae,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function Me(t,e){this.name=Ce,this.message=t,this.token=e,this.resyncedTokens=[]}function Ge(t,e,n){this.name=Ie,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}Object.freeze(Fe),De.prototype=Error.prototype,Pe.prototype=Error.prototype,Me.prototype=Error.prototype,Ge.prototype=Error.prototype;var Ve={},je="InRuleRecoveryException";function He(t){this.name=je,this.message=t}He.prototype=Error.prototype;var Je=function(){function t(){}return t.prototype.initRecoverable=function(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,r.e$)(t,"recoveryEnabled")?t.recoveryEnabled:xn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=We)},t.prototype.getTokenToInsert=function(t){var e=rt(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e},t.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},t.prototype.tryInRepetitionRecovery=function(t,e,n,i){for(var o=this,s=this.findReSyncTokenType(),a=this.exportLexerState(),c=[],l=!1,u=this.LA(1),p=this.LA(1),d=function(){var t=o.LA(0),e=new De(o.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:t,ruleName:o.getCurrRuleFullName()}),u,o.LA(0));e.resyncedTokens=(0,r.j7)(c),o.SAVE_ERROR(e)};!l;){if(this.tokenMatcher(p,i))return void d();if(n.call(this))return d(),void t.apply(this,e);this.tokenMatcher(p,s)?l=!0:(p=this.SKIP_TOKEN(),this.addToResyncTokens(p,c))}this.importLexerState(a)},t.prototype.shouldInRepetitionRecoveryBeTried=function(t,e,n){return!1!==n&&void 0!==t&&void 0!==e&&!this.tokenMatcher(this.LA(1),t)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))},t.prototype.getFollowsForInRuleRecovery=function(t,e){var n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)},t.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new He("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},t.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if((0,r.xb)(e))return!1;var i=this.LA(1);return void 0!==(0,r.sE)(e,(function(t){return n.tokenMatcher(i,t)}))},t.prototype.canRecoverWithSingleTokenDeletion=function(t){return this.tokenMatcher(this.LA(2),t)},t.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return(0,r.r3)(n,t)},t.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),n=2;;){var i=e.tokenType;if((0,r.r3)(t,i))return i;e=this.LA(n),n++}},t.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return Ve;var t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(n)}},t.prototype.buildFullFollowKeyStack=function(){var t=this,e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return(0,r.xb)(this.LAST_EXPLICIT_RULE_STACK)||(e=(0,r.UI)(this.LAST_EXPLICIT_RULE_STACK,(function(e){return t.RULE_STACK[e]})),n=(0,r.UI)(this.LAST_EXPLICIT_RULE_STACK,(function(e){return t.RULE_OCCURRENCE_STACK[e]}))),(0,r.UI)(e,(function(i,r){return 0===r?Ve:{ruleName:t.shortRuleNameToFullName(i),idxInCallingRule:n[r],inRule:t.shortRuleNameToFullName(e[r-1])}}))},t.prototype.flattenFollowSet=function(){var t=this,e=(0,r.UI)(this.buildFullFollowKeyStack(),(function(e){return t.getFollowSetFromFollowKey(e)}));return(0,r.xH)(e)},t.prototype.getFollowSetFromFollowKey=function(t){if(t===Ve)return[it];var e=t.ruleName+t.idxInCallingRule+Rt+t.inRule;return this.resyncFollows[e]},t.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,it)||e.push(t),e},t.prototype.reSyncTo=function(t){for(var e=[],n=this.LA(1);!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return(0,r.j7)(e)},t.prototype.attemptInRepetitionRecovery=function(t,e,n,i,r,o,s){},t.prototype.getCurrentGrammarPath=function(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:(0,r.Qw)(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}},t.prototype.getHumanReadableRuleStack=function(){var t=this;return(0,r.xb)(this.LAST_EXPLICIT_RULE_STACK)?(0,r.UI)(this.RULE_STACK,(function(e){return t.shortRuleNameToFullName(e)})):(0,r.UI)(this.LAST_EXPLICIT_RULE_STACK,(function(e){return t.shortRuleNameToFullName(t.RULE_STACK[e])}))},t}();function We(t,e,n,i,r,o,s){var a=this.getKeyForAutomaticLookahead(i,r),c=this.firstAfterRepMap[a];if(void 0===c){var l=this.getCurrRuleFullName();c=new o(this.getGAstProductions()[l],r).startWalking(),this.firstAfterRepMap[a]=c}var u=c.token,p=c.occurrence,d=c.isEndOfRule;1===this.RULE_STACK.length&&d&&void 0===u&&(u=it,p=1),this.shouldInRepetitionRecoveryBeTried(u,p,s)&&this.tryInRepetitionRecovery(t,e,n,u)}var ze,Xe=function(){function t(){}return t.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=(0,r.e$)(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:xn.dynamicTokensEnabled,this.maxLookahead=(0,r.e$)(t,"maxLookahead")?t.maxLookahead:xn.maxLookahead,this.lookAheadFuncsCache=(0,r.dU)()?new Map:[],(0,r.dU)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},t.prototype.preComputeLookaheadFunctions=function(t){var e=this;(0,r.Ed)(t,(function(t){e.TRACE_INIT(t.name+" Rule Lookahead",(function(){var n=function(t){Lt.reset(),t.accept(Lt);var e=Lt.dslMethods;return Lt.reset(),e}(t),i=n.alternation,o=n.repetition,s=n.option,a=n.repetitionMandatory,c=n.repetitionMandatoryWithSeparator,l=n.repetitionWithSeparator;(0,r.Ed)(i,(function(n){var i=0===n.idx?"":n.idx;e.TRACE_INIT(""+Nt(n)+i,(function(){var i,r,o,s,a,c,l=(i=n.idx,r=t,o=n.maxLookahead||e.maxLookahead,s=n.hasPredicates,a=e.dynamicTokensEnabled,(0,e.lookAheadBuilderForAlternatives)(c=le(i,r,o),s,de(c)?G:M,a)),u=Dt(e.fullRuleNameToShort[t.name],Bt,n.idx);e.setLaFuncCache(u,l)}))})),(0,r.Ed)(o,(function(n){e.computeLookaheadFunc(t,n.idx,It,ee.REPETITION,n.maxLookahead,Nt(n))})),(0,r.Ed)(s,(function(n){e.computeLookaheadFunc(t,n.idx,At,ee.OPTION,n.maxLookahead,Nt(n))})),(0,r.Ed)(a,(function(n){e.computeLookaheadFunc(t,n.idx,Ct,ee.REPETITION_MANDATORY,n.maxLookahead,Nt(n))})),(0,r.Ed)(c,(function(n){e.computeLookaheadFunc(t,n.idx,Ot,ee.REPETITION_MANDATORY_WITH_SEPARATOR,n.maxLookahead,Nt(n))})),(0,r.Ed)(l,(function(n){e.computeLookaheadFunc(t,n.idx,Ft,ee.REPETITION_WITH_SEPARATOR,n.maxLookahead,Nt(n))}))}))}))},t.prototype.computeLookaheadFunc=function(t,e,n,i,r,o){var s=this;this.TRACE_INIT(""+o+(0===e?"":e),(function(){var o=function(t,e,n,i,r,o){var s=ue(t,e,r,n),a=de(s)?G:M;return o(s[0],a,i)}(e,t,r||s.maxLookahead,s.dynamicTokensEnabled,i,s.lookAheadBuilderForOptional),a=Dt(s.fullRuleNameToShort[t.name],n,e);s.setLaFuncCache(a,o)}))},t.prototype.lookAheadBuilderForOptional=function(t,e,n){return function(t,e,n){var i=(0,r.yW)(t,(function(t){return 1===t.length})),o=t.length;if(i&&!n){var s=(0,r.xH)(t);if(1===s.length&&(0,r.xb)(s[0].categoryMatches)){var a=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}var c=(0,r.u4)(s,(function(t,e,n){return t[e.tokenTypeIdx]=!0,(0,r.Ed)(e.categoryMatches,(function(e){t[e]=!0})),t}),[]);return function(){var t=this.LA(1);return!0===c[t.tokenTypeIdx]}}return function(){t:for(var n=0;n<o;n++){for(var i=t[n],r=i.length,s=0;s<r;s++){var a=this.LA(s+1);if(!1===e(a,i[s]))continue t}return!0}return!1}}(t,e,n)},t.prototype.lookAheadBuilderForAlternatives=function(t,e,n,i){return function(t,e,n,i){var o=t.length,s=(0,r.yW)(t,(function(t){return(0,r.yW)(t,(function(t){return 1===t.length}))}));if(e)return function(e){for(var i=(0,r.UI)(e,(function(t){return t.GATE})),s=0;s<o;s++){var a=t[s],c=a.length,l=i[s];if(void 0===l||!1!==l.call(this))t:for(var u=0;u<c;u++){for(var p=a[u],d=p.length,h=0;h<d;h++){var _=this.LA(h+1);if(!1===n(_,p[h]))continue t}return s}}};if(s&&!i){var a=(0,r.UI)(t,(function(t){return(0,r.xH)(t)})),c=(0,r.u4)(a,(function(t,e,n){return(0,r.Ed)(e,(function(e){(0,r.e$)(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),(0,r.Ed)(e.categoryMatches,(function(e){(0,r.e$)(t,e)||(t[e]=n)}))})),t}),[]);return function(){var t=this.LA(1);return c[t.tokenTypeIdx]}}return function(){for(var e=0;e<o;e++){var i=t[e],r=i.length;t:for(var s=0;s<r;s++){for(var a=i[s],c=a.length,l=0;l<c;l++){var u=this.LA(l+1);if(!1===n(u,a[l]))continue t}return e}}}}(t,e,n,i)},t.prototype.getKeyForAutomaticLookahead=function(t,e){return Dt(this.getLastExplicitRuleShortName(),t,e)},t.prototype.getLaFuncFromCache=function(t){},t.prototype.getLaFuncFromMap=function(t){return this.lookAheadFuncsCache.get(t)},t.prototype.getLaFuncFromObj=function(t){return this.lookAheadFuncsCache[t]},t.prototype.setLaFuncCache=function(t,e){},t.prototype.setLaFuncCacheUsingMap=function(t,e){this.lookAheadFuncsCache.set(t,e)},t.prototype.setLaFuncUsingObj=function(t,e){this.lookAheadFuncsCache[t]=e},t}(),Ze=/^\s*function\s*(\S*)\s*\(/,$e="name";function Ke(t){return t.name||t.toString().match(Ze)[1]}function Ye(t,e){var n=Object.getOwnPropertyDescriptor(t,$e);return!(!(0,r.o8)(n)&&!n.configurable||(Object.defineProperty(t,$e,{enumerable:!1,configurable:!0,writable:!1,value:e}),0))}function qe(t,e){for(var n=(0,r.XP)(t),i=n.length,o=0;o<i;o++)for(var s=t[n[o]],a=s.length,c=0;c<a;c++){var l=s[c];void 0===l.tokenTypeIdx&&(void 0!==l.fullName?this[l.fullName](l.children,e):this[l.name](l.children,e))}}!function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"}(ze||(ze={}));var tn=["constructor","visit","validateVisitor"],en=function(){function t(){}return t.prototype.initTreeBuilder=function(t){if(this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=(0,r.e$)(t,"outputCst")?t.outputCst:xn.outputCst,this.nodeLocationTracking=(0,r.e$)(t,"nodeLocationTracking")?t.nodeLocationTracking:xn.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Vt,this.setNodeLocationFromNode=Vt,this.cstPostRule=r.dG,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=r.dG,this.setNodeLocationFromNode=r.dG,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Gt,this.setNodeLocationFromNode=Gt,this.cstPostRule=r.dG,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=r.dG,this.setNodeLocationFromNode=r.dG,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+t.nodeLocationTracking+'"');this.setNodeLocationFromToken=r.dG,this.setNodeLocationFromNode=r.dG,this.cstPostRule=r.dG,this.setInitialNodeLocation=r.dG}else this.cstInvocationStateUpdate=r.dG,this.cstFinallyStateUpdate=r.dG,this.cstPostTerminal=r.dG,this.cstPostNonTerminal=r.dG,this.cstPostRule=r.dG,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst},t.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(t){t.location={startOffset:NaN,endOffset:NaN}},t.prototype.setInitialNodeLocationOnlyOffsetRegular=function(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},t.prototype.setInitialNodeLocationFullRecovery=function(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.setInitialNodeLocationFullRegular=function(t){var e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.cstNestedInvocationStateUpdate=function(t,e){var n={name:t,fullName:this.shortRuleNameToFull[this.getLastExplicitRuleShortName()]+t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},t.prototype.cstInvocationStateUpdate=function(t,e){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);var n={name:t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},t.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},t.prototype.cstNestedFinallyStateUpdate=function(){var t=this.CST_STACK.pop();this.cstPostRule(t)},t.prototype.cstPostRuleFull=function(t){var e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?(n.endOffset=e.endOffset,n.endLine=e.endLine,n.endColumn=e.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)},t.prototype.cstPostRuleOnlyOffset=function(t){var e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?n.endOffset=e.endOffset:n.startOffset=NaN},t.prototype.cstPostTerminal=function(t,e){var n,i,r,o=this.CST_STACK[this.CST_STACK.length-1];i=e,r=t,void 0===(n=o).children[r]?n.children[r]=[i]:n.children[r].push(i),this.setNodeLocationFromToken(o.location,e)},t.prototype.cstPostNonTerminal=function(t,e){if(!0!==this.isBackTracking()){var n=this.CST_STACK[this.CST_STACK.length-1];jt(n,e,t),this.setNodeLocationFromNode(n.location,t.location)}},t.prototype.getBaseCstVisitorConstructor=function(){if((0,r.o8)(this.baseCstVisitorConstructor)){var t=(e=this.className,n=this.allRuleNames,Ye(i=function(){},e+"BaseSemantics"),(i.prototype={visit:function(t,e){if((0,r.kJ)(t)&&(t=t[0]),!(0,r.o8)(t))return void 0!==t.fullName?this[t.fullName](t.children,e):this[t.name](t.children,e)},validateVisitor:function(){var t=function(t,e){var n=function(t,e){var n=(0,r.UI)(e,(function(e){if(!(0,r.mf)(t[e]))return{msg:"Missing visitor method: <"+e+"> on "+Ke(t.constructor)+" CST Visitor.",type:ze.MISSING_METHOD,methodName:e}}));return(0,r.oA)(n)}(t,e),i=function(t,e){var n=[];for(var i in t)ve.test(i)&&(0,r.mf)(t[i])&&!(0,r.r3)(tn,i)&&!(0,r.r3)(e,i)&&n.push({msg:"Redundant visitor method: <"+i+"> on "+Ke(t.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\nFor utility methods on visitor classes use methods names that do not match /"+ve.source+"/.",type:ze.REDUNDANT_METHOD,methodName:i});return n}(t,e);return n.concat(i)}(this,n);if(!(0,r.xb)(t)){var e=(0,r.UI)(t,(function(t){return t.msg}));throw Error("Errors Detected in CST Visitor <"+Ke(this.constructor)+">:\n\t"+e.join("\n\n").replace(/\n/g,"\n\t"))}}}).constructor=i,i._RULE_NAMES=n,i);return this.baseCstVisitorConstructor=t,t}var e,n,i;return this.baseCstVisitorConstructor},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,r.o8)(this.baseCstVisitorWithDefaultsConstructor)){var t=function(t,e,n){var i=function(){};Ye(i,t+"BaseSemanticsWithDefaults");var o=Object.create(n.prototype);return(0,r.Ed)(e,(function(t){o[t]=qe})),(i.prototype=o).constructor=i,i}(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},t.prototype.nestedRuleBeforeClause=function(t,e){var n;return void 0!==t.NAME?(n=t.NAME,this.nestedRuleInvocationStateUpdate(n,e),n):void 0},t.prototype.nestedAltBeforeClause=function(t,e,n,i){var r,o=Pt(this.getLastExplicitRuleShortName(),n,e,i);return void 0!==t.NAME?(r=t.NAME,this.nestedRuleInvocationStateUpdate(r,o),{shortName:o,nestedName:r}):void 0},t.prototype.nestedRuleFinallyClause=function(t,e){var n=this.CST_STACK,i=n[n.length-1];this.nestedRuleFinallyStateUpdate();var r=n[n.length-1];jt(r,e,i),this.setNodeLocationFromNode(r.location,i.location)},t.prototype.getLastExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[t]},t.prototype.getLastExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[t]},t.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-2]},t.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[t]},t.prototype.getLastExplicitRuleOccurrenceIndexNoCst=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},t.prototype.nestedRuleInvocationStateUpdate=function(t,e){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(e),this.cstNestedInvocationStateUpdate(t,e)},t.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},t}(),nn=function(){function t(){}return t.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(t.prototype,"input",{get:function(){return this.tokVector},set:function(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!0,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):bn},t.prototype.LA=function(t){var e=this.currIdx+t;return e<0||this.tokVectorLength<=e?bn:this.tokVector[e]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(t){this.currIdx=t},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.getLexerPosition=function(){return this.exportLexerState()},t}(),rn=function(){function t(){}return t.prototype.ACTION=function(t){return t.call(this)},t.prototype.consume=function(t,e,n){return this.consumeInternal(e,t,n)},t.prototype.subrule=function(t,e,n){return this.subruleInternal(e,t,n)},t.prototype.option=function(t,e){return this.optionInternal(e,t)},t.prototype.or=function(t,e){return this.orInternal(e,t)},t.prototype.many=function(t,e){return this.manyInternal(t,e)},t.prototype.atLeastOne=function(t,e){return this.atLeastOneInternal(t,e)},t.prototype.CONSUME=function(t,e){return this.consumeInternal(t,0,e)},t.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},t.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},t.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},t.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},t.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},t.prototype.CONSUME6=function(t,e){return this.consumeInternal(t,6,e)},t.prototype.CONSUME7=function(t,e){return this.consumeInternal(t,7,e)},t.prototype.CONSUME8=function(t,e){return this.consumeInternal(t,8,e)},t.prototype.CONSUME9=function(t,e){return this.consumeInternal(t,9,e)},t.prototype.SUBRULE=function(t,e){return this.subruleInternal(t,0,e)},t.prototype.SUBRULE1=function(t,e){return this.subruleInternal(t,1,e)},t.prototype.SUBRULE2=function(t,e){return this.subruleInternal(t,2,e)},t.prototype.SUBRULE3=function(t,e){return this.subruleInternal(t,3,e)},t.prototype.SUBRULE4=function(t,e){return this.subruleInternal(t,4,e)},t.prototype.SUBRULE5=function(t,e){return this.subruleInternal(t,5,e)},t.prototype.SUBRULE6=function(t,e){return this.subruleInternal(t,6,e)},t.prototype.SUBRULE7=function(t,e){return this.subruleInternal(t,7,e)},t.prototype.SUBRULE8=function(t,e){return this.subruleInternal(t,8,e)},t.prototype.SUBRULE9=function(t,e){return this.subruleInternal(t,9,e)},t.prototype.OPTION=function(t){return this.optionInternal(t,0)},t.prototype.OPTION1=function(t){return this.optionInternal(t,1)},t.prototype.OPTION2=function(t){return this.optionInternal(t,2)},t.prototype.OPTION3=function(t){return this.optionInternal(t,3)},t.prototype.OPTION4=function(t){return this.optionInternal(t,4)},t.prototype.OPTION5=function(t){return this.optionInternal(t,5)},t.prototype.OPTION6=function(t){return this.optionInternal(t,6)},t.prototype.OPTION7=function(t){return this.optionInternal(t,7)},t.prototype.OPTION8=function(t){return this.optionInternal(t,8)},t.prototype.OPTION9=function(t){return this.optionInternal(t,9)},t.prototype.OR=function(t){return this.orInternal(t,0)},t.prototype.OR1=function(t){return this.orInternal(t,1)},t.prototype.OR2=function(t){return this.orInternal(t,2)},t.prototype.OR3=function(t){return this.orInternal(t,3)},t.prototype.OR4=function(t){return this.orInternal(t,4)},t.prototype.OR5=function(t){return this.orInternal(t,5)},t.prototype.OR6=function(t){return this.orInternal(t,6)},t.prototype.OR7=function(t){return this.orInternal(t,7)},t.prototype.OR8=function(t){return this.orInternal(t,8)},t.prototype.OR9=function(t){return this.orInternal(t,9)},t.prototype.MANY=function(t){this.manyInternal(0,t)},t.prototype.MANY1=function(t){this.manyInternal(1,t)},t.prototype.MANY2=function(t){this.manyInternal(2,t)},t.prototype.MANY3=function(t){this.manyInternal(3,t)},t.prototype.MANY4=function(t){this.manyInternal(4,t)},t.prototype.MANY5=function(t){this.manyInternal(5,t)},t.prototype.MANY6=function(t){this.manyInternal(6,t)},t.prototype.MANY7=function(t){this.manyInternal(7,t)},t.prototype.MANY8=function(t){this.manyInternal(8,t)},t.prototype.MANY9=function(t){this.manyInternal(9,t)},t.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},t.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},t.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},t.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},t.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},t.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},t.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},t.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},t.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},t.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},t.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},t.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},t.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},t.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},t.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},t.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},t.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},t.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},t.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},t.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},t.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},t.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},t.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},t.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},t.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},t.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},t.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},t.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},t.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},t.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},t.prototype.RULE=function(t,e,n){if(void 0===n&&(n=wn),(0,r.r3)(this.definedRulesNames,t)){var i={message:Se.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:yn.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(i)}this.definedRulesNames.push(t);var o=this.defineRule(t,e,n);return this[t]=o,o},t.prototype.OVERRIDE_RULE=function(t,e,n){void 0===n&&(n=wn);var i,o,s,a,c,l=[];l=l.concat((i=t,o=this.definedRulesNames,s=this.className,c=[],r.r3(o,i)||(a="Invalid rule override, rule: ->"+i+"<- cannot be overridden in the grammar: ->"+s+"<-as it is not defined in any of the super grammars ",c.push({message:a,type:yn.INVALID_RULE_OVERRIDE,ruleName:i})),c)),this.definitionErrors.push.apply(this.definitionErrors,l);var u=this.defineRule(t,e,n);return this[t]=u,u},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(Oe(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},t.prototype.getGAstProductions=function(){return this.gastProductionsCache},t.prototype.getSerializedGastProductions=function(){return vt((0,r.VO)(this.gastProductionsCache))},t}(),on=function(){function t(){}return t.prototype.initRecognizerEngine=function(t,e){if(this.className=Ke(this.constructor),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=G,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,r.e$)(e,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if((0,r.kJ)(t)){if((0,r.xb)(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if((0,r.kJ)(t))this.tokensMap=(0,r.u4)(t,(function(t,e){return t[e.name]=e,t}),{});else if((0,r.e$)(t,"modes")&&(0,r.yW)((0,r.xH)((0,r.VO)(t.modes)),X)){var n=(0,r.xH)((0,r.VO)(t.modes)),i=(0,r.jj)(n);this.tokensMap=(0,r.u4)(i,(function(t,e){return t[e.name]=e,t}),{})}else{if(!(0,r.Kn)(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=(0,r.Cl)(t)}this.tokensMap.EOF=it;var o=(0,r.yW)((0,r.VO)(t),(function(t){return(0,r.xb)(t.categoryMatches)}));this.tokenMatcher=o?G:M,H((0,r.VO)(this.tokensMap))},t.prototype.defineRule=function(t,e,n){if(this.selfAnalysisDone)throw Error("Grammar rule <"+t+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var i,o=(0,r.e$)(n,"resyncEnabled")?n.resyncEnabled:wn.resyncEnabled,s=(0,r.e$)(n,"recoveryValueFunc")?n.recoveryValueFunc:wn.recoveryValueFunc,a=this.ruleShortNameIdx<<12;function c(t){try{if(!0===this.outputCst){e.apply(this,t);var n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return e.apply(this,t)}catch(t){return this.invokeRuleCatch(t,o,s)}finally{this.ruleFinallyStateUpdate()}}return this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=t,this.fullRuleNameToShort[t]=a,(i=function(e,n){return void 0===e&&(e=0),this.ruleInvocationStateUpdate(a,t,e),c.call(this,n)}).ruleName=t,i.originalGrammarAction=e,i},t.prototype.invokeRuleCatch=function(t,e,n){var i=1===this.RULE_STACK.length,r=e&&!this.isBackTracking()&&this.recoveryEnabled;if(Oe(t)){var o=t;if(r){var s,a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))return o.resyncedTokens=this.reSyncTo(a),this.outputCst?((s=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,s):n();throw this.outputCst&&((s=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,o.partialCstResult=s),o}if(i)return this.moveToTerminatedState(),n();throw o}throw t},t.prototype.optionInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(At,e),i=this.nestedRuleBeforeClause(t,n);try{return this.optionInternalLogic(t,e,n)}finally{void 0!==i&&this.nestedRuleFinallyClause(n,i)}},t.prototype.optionInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(At,e);return this.optionInternalLogic(t,e,n)},t.prototype.optionInternalLogic=function(t,e,n){var i,r,o=this,s=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(i=t.DEF,void 0!==(r=t.GATE)){var a=s;s=function(){return r.call(o)&&a.call(o)}}}else i=t;if(!0===s.call(this))return i.call(this)},t.prototype.atLeastOneInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Ct,t),i=this.nestedRuleBeforeClause(e,n);try{return this.atLeastOneInternalLogic(t,e,n)}finally{void 0!==i&&this.nestedRuleFinallyClause(n,i)}},t.prototype.atLeastOneInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Ct,t);this.atLeastOneInternalLogic(t,e,n)},t.prototype.atLeastOneInternalLogic=function(t,e,n){var i,r,o=this,s=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(i=e.DEF,void 0!==(r=e.GATE)){var a=s;s=function(){return r.call(o)&&a.call(o)}}}else i=e;if(!0!==s.call(this))throw this.raiseEarlyExitException(t,ee.REPETITION_MANDATORY,e.ERR_MSG);for(var c=this.doSingleRepetition(i);!0===s.call(this)&&!0===c;)c=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],s,Ct,t,$t)},t.prototype.atLeastOneSepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Ot,t),i=this.nestedRuleBeforeClause(e,n);try{this.atLeastOneSepFirstInternalLogic(t,e,n)}finally{void 0!==i&&this.nestedRuleFinallyClause(n,i)}},t.prototype.atLeastOneSepFirstInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Ot,t);this.atLeastOneSepFirstInternalLogic(t,e,n)},t.prototype.atLeastOneSepFirstInternalLogic=function(t,e,n){var i=this,r=e.DEF,o=e.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(t,ee.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);r.call(this);for(var s=function(){return i.tokenMatcher(i.LA(1),o)};!0===this.tokenMatcher(this.LA(1),o);)this.CONSUME(o),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,s,r,Kt],s,Ot,t,Kt)},t.prototype.manyInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(It,t),i=this.nestedRuleBeforeClause(e,n);try{return this.manyInternalLogic(t,e,n)}finally{void 0!==i&&this.nestedRuleFinallyClause(n,i)}},t.prototype.manyInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(It,t);return this.manyInternalLogic(t,e,n)},t.prototype.manyInternalLogic=function(t,e,n){var i,r,o=this,s=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(i=e.DEF,void 0!==(r=e.GATE)){var a=s;s=function(){return r.call(o)&&a.call(o)}}}else i=e;for(var c=!0;!0===s.call(this)&&!0===c;)c=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],s,It,t,Xt,c)},t.prototype.manySepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Ft,t),i=this.nestedRuleBeforeClause(e,n);try{this.manySepFirstInternalLogic(t,e,n)}finally{void 0!==i&&this.nestedRuleFinallyClause(n,i)}},t.prototype.manySepFirstInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Ft,t);this.manySepFirstInternalLogic(t,e,n)},t.prototype.manySepFirstInternalLogic=function(t,e,n){var i=this,r=e.DEF,o=e.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){r.call(this);for(var s=function(){return i.tokenMatcher(i.LA(1),o)};!0===this.tokenMatcher(this.LA(1),o);)this.CONSUME(o),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,s,r,Zt],s,Ft,t,Zt)}},t.prototype.repetitionSepSecondInternal=function(t,e,n,i,r){for(;n();)this.CONSUME(e),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,i,r],n,Ot,t,r)},t.prototype.doSingleRepetition=function(t){var e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e},t.prototype.orInternalNoCst=function(t,e){var n=(0,r.kJ)(t)?t:t.DEF,i=this.getKeyForAutomaticLookahead(Bt,e),o=this.getLaFuncFromCache(i).call(this,n);if(void 0!==o)return n[o].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)},t.prototype.orInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Bt,e),i=this.nestedRuleBeforeClause(t,n);try{var o=(0,r.kJ)(t)?t:t.DEF,s=this.getLaFuncFromCache(n).call(this,o);if(void 0!==s){var a=o[s],c=this.nestedAltBeforeClause(a,e,Bt,s);try{return a.ALT.call(this)}finally{void 0!==c&&this.nestedRuleFinallyClause(c.shortName,c.nestedName)}}this.raiseNoAltException(e,t.ERR_MSG)}finally{void 0!==i&&this.nestedRuleFinallyClause(n,i)}},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Me(e,t))}},t.prototype.subruleInternal=function(t,e,n){var i;try{var r=void 0!==n?n.ARGS:void 0;return i=t.call(this,e,r),this.cstPostNonTerminal(i,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),i}catch(e){this.subruleInternalError(e,n,t.ruleName)}},t.prototype.subruleInternalError=function(t,e,n){throw Oe(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:n),delete t.partialCstResult),t},t.prototype.consumeInternal=function(t,e,n){var i;try{var r=this.LA(1);!0===this.tokenMatcher(r,t)?(this.consumeToken(),i=r):this.consumeInternalError(t,r,n)}catch(n){i=this.consumeInternalRecovery(t,e,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.name,i),i},t.prototype.consumeInternalError=function(t,e,n){var i,r=this.LA(0);throw i=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new De(i,e,r))},t.prototype.consumeInternalRecovery=function(t,e,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var i=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,i)}catch(t){throw t.name===je?n:t}},t.prototype.saveRecogState=function(){var t=this.errors,e=(0,r.Qw)(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},t.prototype.ruleInvocationStateUpdate=function(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},t.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},t.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull[t]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),it)},t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t}(),sn=function(){function t(){}return t.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=(0,r.ce)(t.errorMessageProvider,xn.errorMessageProvider)},t.prototype.SAVE_ERROR=function(t){if(Oe(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,r.Qw)(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(t.prototype,"errors",{get:function(){return(0,r.Qw)(this._errors)},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),t.prototype.raiseEarlyExitException=function(t,e,n){for(var i=this.getCurrRuleFullName(),r=ue(t,this.getGAstProductions()[i],e,this.maxLookahead)[0],o=[],s=1;s<=this.maxLookahead;s++)o.push(this.LA(s));var a=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:r,actual:o,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new Ge(a,this.LA(1),this.LA(0)))},t.prototype.raiseNoAltException=function(t,e){for(var n=this.getCurrRuleFullName(),i=le(t,this.getGAstProductions()[n],this.maxLookahead),r=[],o=1;o<=this.maxLookahead;o++)r.push(this.LA(o));var s=this.LA(0),a=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:r,previous:s,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Pe(a,this.LA(1),s))},t}(),an=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(t,e){var n=this.gastProductionsCache[t];if((0,r.o8)(n))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return qt([n],e,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(t){var e=(0,r.Ps)(t.ruleStack),n=this.getGAstProductions()[e];return new Wt(n,t).startWalking()},t}(),cn={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(cn);var ln=Math.pow(2,8)-1,un=nt({name:"RECORDING_PHASE_TOKEN",pattern:Y.NA});H([un]);var pn=rt(un,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(pn);var dn={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details",children:{}},hn=function(){function t(){}return t.prototype.initGastRecorder=function(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1},t.prototype.enableRecording=function(){var t=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var e=function(e){var n=e>0?e:"";t["CONSUME"+n]=function(t,n){return this.consumeInternalRecord(t,e,n)},t["SUBRULE"+n]=function(t,n){return this.subruleInternalRecord(t,e,n)},t["OPTION"+n]=function(t){return this.optionInternalRecord(t,e)},t["OR"+n]=function(t){return this.orInternalRecord(t,e)},t["MANY"+n]=function(t){this.manyInternalRecord(e,t)},t["MANY_SEP"+n]=function(t){this.manySepFirstInternalRecord(e,t)},t["AT_LEAST_ONE"+n]=function(t){this.atLeastOneInternalRecord(e,t)},t["AT_LEAST_ONE_SEP"+n]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}},n=0;n<10;n++)e(n);t.consume=function(t,e,n){return this.consumeInternalRecord(e,t,n)},t.subrule=function(t,e,n){return this.subruleInternalRecord(e,t,n)},t.option=function(t,e){return this.optionInternalRecord(e,t)},t.or=function(t,e){return this.orInternalRecord(e,t)},t.many=function(t,e){this.manyInternalRecord(t,e)},t.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},t.ACTION=t.ACTION_RECORD,t.BACKTRACK=t.BACKTRACK_RECORD,t.LA=t.LA_RECORD}))},t.prototype.disableRecording=function(){var t=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var e=0;e<10;e++){var n=e>0?e:"";delete t["CONSUME"+n],delete t["SUBRULE"+n],delete t["OPTION"+n],delete t["OR"+n],delete t["MANY"+n],delete t["MANY_SEP"+n],delete t["AT_LEAST_ONE"+n],delete t["AT_LEAST_ONE_SEP"+n]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))},t.prototype.ACTION_RECORD=function(t){},t.prototype.BACKTRACK_RECORD=function(t,e){return function(){return!0}},t.prototype.LA_RECORD=function(t){return bn},t.prototype.topLevelRuleRecord=function(t,e){try{var n=new lt({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),e.call(this),this.recordingProdStack.pop(),n}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording'}catch(e){throw t}throw t}},t.prototype.optionInternalRecord=function(t,e){return _n.call(this,pt,t,e)},t.prototype.atLeastOneInternalRecord=function(t,e){_n.call(this,dt,e,t)},t.prototype.atLeastOneSepFirstInternalRecord=function(t,e){_n.call(this,ht,e,t,!0)},t.prototype.manyInternalRecord=function(t,e){_n.call(this,_t,e,t)},t.prototype.manySepFirstInternalRecord=function(t,e){_n.call(this,ft,e,t,!0)},t.prototype.orInternalRecord=function(t,e){return fn.call(this,t,e)},t.prototype.subruleInternalRecord=function(t,e,n){if(gn(e),!t||!1===(0,r.e$)(t,"ruleName")){var i=new Error("<SUBRULE"+mn(e)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw i.KNOWN_RECORDER_ERROR=!0,i}var o=(0,r.fj)(this.recordingProdStack),s=t.ruleName,a=new ct({idx:e,nonTerminalName:s,referencedRule:void 0});return o.definition.push(a),this.outputCst?dn:cn},t.prototype.consumeInternalRecord=function(t,e,n){if(gn(e),!W(t)){var i=new Error("<CONSUME"+mn(e)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw i.KNOWN_RECORDER_ERROR=!0,i}var o=(0,r.fj)(this.recordingProdStack),s=new gt({idx:e,terminalType:t});return o.definition.push(s),pn},t}();function _n(t,e,n,i){void 0===i&&(i=!1),gn(n);var o=(0,r.fj)(this.recordingProdStack),s=(0,r.mf)(e)?e:e.DEF,a=new t({definition:[],idx:n});return(0,r.e$)(e,"NAME")&&(a.name=e.NAME),i&&(a.separator=e.SEP),(0,r.e$)(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),o.definition.push(a),this.recordingProdStack.pop(),cn}function fn(t,e){var n=this;gn(e);var i=(0,r.fj)(this.recordingProdStack),o=!1===(0,r.kJ)(t),s=!1===o?t:t.DEF,a=new mt({definition:[],idx:e,ignoreAmbiguities:o&&!0===t.IGNORE_AMBIGUITIES});(0,r.e$)(t,"NAME")&&(a.name=t.NAME),(0,r.e$)(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD);var c=(0,r.G)(s,(function(t){return(0,r.mf)(t.GATE)}));return a.hasPredicates=c,i.definition.push(a),(0,r.Ed)(s,(function(t){var e=new ut({definition:[]});a.definition.push(e),(0,r.e$)(t,"NAME")&&(e.name=t.NAME),(0,r.e$)(t,"IGNORE_AMBIGUITIES")?e.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:(0,r.e$)(t,"GATE")&&(e.ignoreAmbiguities=!0),n.recordingProdStack.push(e),t.ALT.call(n),n.recordingProdStack.pop()})),cn}function mn(t){return 0===t?"":""+t}function gn(t){if(t<0||t>ln){var e=new Error("Invalid DSL Method idx value: <"+t+">\n\tIdx value must be a none negative value smaller than "+(ln+1));throw e.KNOWN_RECORDER_ERROR=!0,e}}var vn=function(){function t(){}return t.prototype.initPerformanceTracer=function(t){if((0,r.e$)(t,"traceInitPerf")){var e=t.traceInitPerf,n="number"==typeof e;this.traceInitMaxIdent=n?e:1/0,this.traceInitPerf=n?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=xn.traceInitPerf;this.traceInitIndent=-1},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+t+">");var i=(0,r.HT)(e),o=i.time,s=i.value,a=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(n+"<-- <"+t+"> time: "+o+"ms"),this.traceInitIndent--,s}return e()},t}(),En=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),bn=rt(it,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(bn);var yn,xn=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Qe,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),wn=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});function Qn(t){return void 0===t&&(t=void 0),function(){return t}}!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",t[t.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"}(yn||(yn={}));var Nn=function(){function t(t,e){void 0===e&&(e=xn),this.ignoredIssues=xn.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;var n=this;n.initErrorHandler(e),n.initLexerAdapter(),n.initLooksAhead(e),n.initRecognizerEngine(t,e),n.initRecoverable(e),n.initTreeBuilder(e),n.initContentAssist(),n.initGastRecorder(e),n.initPerformanceTracer(e),(0,r.e$)(e,"ignoredIssues")&&e.ignoredIssues!==xn.ignoredIssues&&(0,r.rr)("The <ignoredIssues> IParserConfig property is soft-deprecated and will be removed in future versions.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead."),this.ignoredIssues=(0,r.e$)(e,"ignoredIssues")?e.ignoredIssues:xn.ignoredIssues,this.skipValidations=(0,r.e$)(e,"skipValidations")?e.skipValidations:xn.skipValidations}return t.performSelfAnalysis=function(t){t.performSelfAnalysis()},t.prototype.performSelfAnalysis=function(){var e=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;e.selfAnalysisDone=!0;var i=e.className;e.TRACE_INIT("toFastProps",(function(){(0,r.SV)(e)})),e.TRACE_INIT("Grammar Recording",(function(){try{e.enableRecording(),(0,r.Ed)(e.definedRulesNames,(function(t){var n=e[t].originalGrammarAction,i=void 0;e.TRACE_INIT(t+" Rule",(function(){i=e.topLevelRuleRecord(t,n)})),e.gastProductionsCache[t]=i}))}finally{e.disableRecording()}}));var o=[];if(e.TRACE_INIT("Grammar Resolving",(function(){o=Re({rules:(0,r.VO)(e.gastProductionsCache)}),e.definitionErrors.push.apply(e.definitionErrors,o)})),e.TRACE_INIT("Grammar Validations",(function(){if((0,r.xb)(o)&&!1===e.skipValidations){var t=Ue({rules:(0,r.VO)(e.gastProductionsCache),maxLookahead:e.maxLookahead,tokenTypes:(0,r.VO)(e.tokensMap),ignoredIssues:e.ignoredIssues,errMsgProvider:Se,grammarName:i});e.definitionErrors.push.apply(e.definitionErrors,t)}})),(0,r.xb)(e.definitionErrors)&&(e.recoveryEnabled&&e.TRACE_INIT("computeAllProdsFollows",(function(){var t,n,i=(t=(0,r.VO)(e.gastProductionsCache),n={},(0,r.Ed)(t,(function(t){var e=new kt(t).startWalking();(0,r.f0)(n,e)})),n);e.resyncFollows=i})),e.TRACE_INIT("ComputeLookaheadFunctions",(function(){e.preComputeLookaheadFunctions((0,r.VO)(e.gastProductionsCache))}))),e.TRACE_INIT("expandAllNestedRuleNames",(function(){var t,n,i,o=(t=(0,r.VO)(e.gastProductionsCache),n=e.fullRuleNameToShort,i={allRuleNames:[]},(0,r.Ed)(t,(function(t){var e=n[t.name];i.allRuleNames.push(t.name);var o=new Ht(e);t.accept(o),(0,r.Ed)(o.result,(function(e){e.def,e.key;var n=e.name;i.allRuleNames.push(t.name+n)}))})),i);e.allRuleNames=o.allRuleNames})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,r.xb)(e.definitionErrors))throw n=(0,r.UI)(e.definitionErrors,(function(t){return t.message})),new Error("Parser Definition Errors detected:\n "+n.join("\n-------------------------------\n"))}))},t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();(0,r.ef)(Nn,[Je,Xe,en,nn,on,rn,sn,an,hn,vn]);var Sn=function(t){function e(e,n){void 0===n&&(n=xn);var i=(0,r.Cl)(n);return i.outputCst=!0,t.call(this,e,i)||this}return En(e,t),e}(Nn),Ln=function(t){function e(e,n){void 0===n&&(n=xn);var i=(0,r.Cl)(n);return i.outputCst=!1,t.call(this,e,i)||this}return En(e,t),e}(Nn);function Tn(t,e){var n=void 0===e?{}:e,r=n.resourceBase,o=void 0===r?"https://unpkg.com/chevrotain@"+i+"/diagrams/":r,s=n.css;return"\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n\n<link rel='stylesheet' href='"+(void 0===s?"https://unpkg.com/chevrotain@"+i+"/diagrams/diagrams.css":s)+"'>\n\n<script src='"+o+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+o+"src/diagrams_builder.js'><\/script>\n<script src='"+o+"src/diagrams_behavior.js'><\/script>\n<script src='"+o+'src/main.js\'><\/script>\n\n<div id="diagrams" align="center"></div>    \n\n<script>\n    window.serializedGrammar = '+JSON.stringify(t,null,"  ")+';\n<\/script>\n\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}var Rn="\n";function Un(t){var e;return"\nfunction "+t.name+"(tokenVocabulary, config) {\n    // invoke super constructor\n    // No support for embedded actions currently, so we can 'hardcode'\n    // The use of CstParser.\n    chevrotain.CstParser.call(this, tokenVocabulary, config)\n\n    const $ = this\n\n    "+(e=t.rules,(0,r.UI)(e,(function(t){return n=Cn(1,'$.RULE("'+(e=t).name+'", function() {')+Rn,(n+=In(e.definition,2))+(Cn(2,"})")+Rn);var e,n})).join("\n")+"\n\n    // very important to call this after all the rules have been defined.\n    // otherwise the parser may not work correctly as it will lack information\n    // derived during the self analysis phase.\n    this.performSelfAnalysis(this)\n}\n\n// inheritance as implemented in javascript in the previous decade... :(\n")+t.name+".prototype = Object.create(chevrotain.CstParser.prototype)\n"+t.name+".prototype.constructor = "+t.name+"    \n    "}function kn(t,e){if(t instanceof ct)return function(t,e){return Cn(e,"$.SUBRULE"+t.idx+"($."+t.nonTerminalName+")"+Rn)}(t,e);if(t instanceof pt)return Bn("OPTION",t,e);if(t instanceof dt)return Bn("AT_LEAST_ONE",t,e);if(t instanceof ht)return Bn("AT_LEAST_ONE_SEP",t,e);if(t instanceof ft)return Bn("MANY_SEP",t,e);if(t instanceof _t)return Bn("MANY",t,e);if(t instanceof mt)return function(t,e){var n=Cn(e,"$.OR"+t.idx+"([")+Rn,i=(0,r.UI)(t.definition,(function(t){return function(t,e){var n=Cn(e,"{")+Rn;return t.name&&(n+=Cn(e+1,'NAME: "'+t.name+'",')+Rn),n+=Cn(e+1,"ALT: function() {")+Rn,n+=In(t.definition,e+1),(n+=Cn(e+1,"}")+Rn)+Cn(e,"}")}(t,e+1)}));return(n+=i.join(",\n"))+(Rn+Cn(e,"])\n"))}(t,e);if(t instanceof gt)return function(t,e){var n=t.terminalType.name;return Cn(e,"$.CONSUME"+t.idx+"(this.tokensMap."+n+")"+Rn)}(t,e);if(t instanceof ut)return In(t.definition,e);throw Error("non exhaustive match")}function Bn(t,e,n){var i=Cn(n,"$."+(t+e.idx)+"(");return e.name||e.separator?(i+="{\n",e.name&&(i+=Cn(n+1,'NAME: "'+e.name+'"')+","+Rn),e.separator&&(i+=Cn(n+1,"SEP: this.tokensMap."+e.separator.name)+","+Rn),i+="DEF: "+An(e.definition,n+2)+Rn,i+=Cn(n,"}")+Rn):i+=An(e.definition,n+1),i+(Cn(n,")")+Rn)}function An(t,e){var n="function() {\n";return(n+=In(t,e))+(Cn(e,"}")+Rn)}function In(t,e){var n="";return(0,r.Ed)(t,(function(t){n+=kn(t,e+1)})),n}function Cn(t,e){return Array(4*t+1).join(" ")+e}function Fn(t){var e=function(t){return"    \n"+Un(t)+"\nreturn new "+t.name+"(tokenVocabulary, config)    \n"}({name:t.name,rules:t.rules}),i=new Function("tokenVocabulary","config","chevrotain",e);return function(e){return i(t.tokenVocabulary,e,n(3877))}}function On(t){return function(t){return"\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['chevrotain'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('chevrotain'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.b);\n    }\n}(typeof self !== 'undefined' ? self : this, function (chevrotain) {\n\n"+Un(t)+"\n    \nreturn {\n    "+t.name+": "+t.name+" \n}\n}));\n"}({name:t.name,rules:t.rules})}function Dn(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")}},1481:(t,e,n)=>{"use strict";function i(t){return t&&0===t.length}function r(t){return null==t?[]:Object.keys(t)}function o(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;i++)e.push(t[n[i]]);return e}function s(t,e){for(var n=[],i=r(t),o=0;o<i.length;o++){var s=i[o];n.push(e.call(null,t[s],s))}return n}function a(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e.call(null,t[i],i));return n}function c(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];Array.isArray(i)?e=e.concat(c(i)):e.push(i)}return e}function l(t){return i(t)?void 0:t[0]}function u(t){var e=t&&t.length;return e?t[e-1]:void 0}function p(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!k(t))throw Error("non exhaustive match");var i=r(t);for(n=0;n<i.length;n++){var o=i[n],s=t[o];e.call(null,s,o)}}}function d(t){return"string"==typeof t}function h(t){return void 0===t}function _(t){return t instanceof Function}function f(t,e){return void 0===e&&(e=1),t.slice(e,t.length)}function m(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)}function g(t,e){var n=[];if(Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];e.call(null,r)&&n.push(r)}return n}function v(t,e){return g(t,(function(t){return!e(t)}))}function E(t,e){for(var n=Object.keys(t),i={},r=0;r<n.length;r++){var o=n[r],s=t[o];e(s)&&(i[o]=s)}return i}function b(t,e){return!!k(t)&&t.hasOwnProperty(e)}function y(t,e){return void 0!==Q(t,(function(t){return t===e}))}function x(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function w(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Q(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(e.call(null,i))return i}}function N(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];e.call(null,r)&&n.push(r)}return n}function S(t,e,n){for(var i=Array.isArray(t),s=i?t:o(t),a=i?[]:r(t),c=n,l=0;l<s.length;l++)c=e.call(null,c,s[l],i?l:a[l]);return c}function L(t){return v(t,(function(t){return null==t}))}function T(t,e){void 0===e&&(e=function(t){return t});var n=[];return S(t,(function(t,i){var r=e(i);return y(n,r)?t:(n.push(r),t.concat(i))}),[])}function R(t){return Array.isArray(t)}function U(t){return t instanceof RegExp}function k(t){return t instanceof Object}function B(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function A(t,e){return v(t,(function(t){return y(e,t)}))}function I(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function C(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function F(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++)for(var o=e[i],s=r(o),a=0;a<s.length;a++){var c=s[a];t[c]=o[c]}return t}function O(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++){var o=e[i];if(!h(o))for(var s=r(o),a=0;a<s.length;a++){var c=s[a];b(t,c)||(t[c]=o[c])}}return t}function D(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O.apply(null,[{}].concat(t))}function P(t,e){var n={};return p(t,(function(t){var i=e(t),r=n[i];r?r.push(t):n[i]=[t]})),n}function M(t,e){for(var n=w(t),i=r(e),o=0;o<i.length;o++){var s=i[o],a=e[s];n[s]=a}return n}function G(){}function V(t){return t}function j(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];e.push(void 0!==i?i:void 0)}return e}function H(t){console&&console.error&&console.error("Error: "+t)}function J(t){console&&console.warn&&console.warn("Warning: "+t)}function W(){return"function"==typeof Map}function z(t,e){e.forEach((function(e){var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(i){if("constructor"!==i){var r=Object.getOwnPropertyDescriptor(n,i);r&&(r.get||r.set)?Object.defineProperty(t.prototype,i,r):t.prototype[i]=e.prototype[i]}}))}))}function X(t){function e(){}e.prototype=t;var n=new e;function i(){return typeof n.bar}return i(),i(),t}function Z(t){return t[t.length-1]}function $(t){var e=(new Date).getTime(),n=t();return{time:(new Date).getTime()-e,value:n}}n.d(e,{xb:()=>i,XP:()=>r,VO:()=>o,Q8:()=>s,UI:()=>a,xH:()=>c,Ps:()=>l,Z$:()=>u,Ed:()=>p,HD:()=>d,o8:()=>h,mf:()=>_,Cw:()=>f,j7:()=>m,hX:()=>g,d1:()=>v,ei:()=>E,e$:()=>b,r3:()=>y,Qw:()=>x,Cl:()=>w,sE:()=>Q,Oq:()=>N,u4:()=>S,oA:()=>L,jj:()=>T,kJ:()=>R,Kj:()=>U,Kn:()=>k,yW:()=>B,e5:()=>A,G:()=>I,cq:()=>C,f0:()=>F,ce:()=>D,vM:()=>P,TS:()=>M,dG:()=>G,Wd:()=>V,X0:()=>j,WB:()=>H,rr:()=>J,dU:()=>W,ef:()=>z,SV:()=>X,fj:()=>Z,HT:()=>$})},3819:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},8505:(t,e,n)=>{var i=n(5052);t.exports=function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},9736:(t,e,n)=>{var i=n(95),r=n(2391),o=n(1787),s=i("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},6637:(t,e,n)=>{"use strict";var i=n(966).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},1176:(t,e,n)=>{var i=n(5052);t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},9540:(t,e,n)=>{var i=n(905),r=n(4237),o=n(3231),s=function(t){return function(e,n,s){var a,c=i(e),l=r(c.length),u=o(s,l);if(t&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},6038:(t,e,n)=>{"use strict";var i=n(4229);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},3037:(t,e,n)=>{var i=n(7400),r=n(4229),o=n(816),s=Object.defineProperty,a={},c=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var n=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:c,p=o(e,1)?e[1]:void 0;return a[t]=!!n&&!r((function(){if(l&&!i)return!0;var t={length:-1};l?s(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,u,p)}))}},3143:(t,e,n)=>{var i=n(3819),r=n(2991),o=n(9337),s=n(4237),a=function(t){return function(e,n,a,c){i(n);var l=r(e),u=o(l),p=s(l.length),d=t?p-1:0,h=t?-1:1;if(a<2)for(;;){if(d in u){c=u[d],d+=h;break}if(d+=h,t?d<0:p<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:p>d;d+=h)d in u&&(c=n(c,u[d],d,l));return c}};t.exports={left:a(!1),right:a(!0)}},7079:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},7081:(t,e,n)=>{var i=n(816),r=n(4826),o=n(7933),s=n(1787);t.exports=function(t,e){for(var n=r(e),a=s.f,c=o.f,l=0;l<n.length;l++){var u=n[l];i(t,u)||a(t,u,c(e,u))}}},7528:(t,e,n)=>{var i=n(4229);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},3723:(t,e,n)=>{"use strict";var i=n(693).IteratorPrototype,r=n(2391),o=n(5358),s=n(4555),a=n(5495),c=function(){return this};t.exports=function(t,e,n){var l=e+" Iterator";return t.prototype=r(i,{next:o(1,n)}),s(t,l,!1,!0),a[l]=c,t}},5762:(t,e,n)=>{var i=n(7400),r=n(1787),o=n(5358);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},5358:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7675:(t,e,n)=>{"use strict";var i=n(3103),r=n(3723),o=n(7567),s=n(6540),a=n(4555),c=n(5762),l=n(7487),u=n(95),p=n(4231),d=n(5495),h=n(693),_=h.IteratorPrototype,f=h.BUGGY_SAFARI_ITERATORS,m=u("iterator"),g="keys",v="values",E="entries",b=function(){return this};t.exports=function(t,e,n,u,h,y,x){r(n,e,u);var w,Q,N,S=function(t){if(t===h&&k)return k;if(!f&&t in R)return R[t];switch(t){case g:case v:case E:return function(){return new n(this,t)}}return function(){return new n(this)}},L=e+" Iterator",T=!1,R=t.prototype,U=R[m]||R["@@iterator"]||h&&R[h],k=!f&&U||S(h),B="Array"==e&&R.entries||U;if(B&&(w=o(B.call(new t)),_!==Object.prototype&&w.next&&(p||o(w)===_||(s?s(w,_):"function"!=typeof w[m]&&c(w,m,b)),a(w,L,!0,!0),p&&(d[L]=b))),h==v&&U&&U.name!==v&&(T=!0,k=function(){return U.call(this)}),p&&!x||R[m]===k||c(R,m,k),d[e]=k,h)if(Q={values:S(v),keys:y?k:S(g),entries:S(E)},x)for(N in Q)(f||T||!(N in R))&&l(R,N,Q[N]);else i({target:e,proto:!0,forced:f||T},Q);return Q}},7400:(t,e,n)=>{var i=n(4229);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2635:(t,e,n)=>{var i=n(9859),r=n(5052),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},5694:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8801:(t,e,n)=>{var i=n(7079),r=n(9859);t.exports="process"==i(r.process)},598:(t,e,n)=>{var i=n(1333);t.exports=i("navigator","userAgent")||""},6358:(t,e,n)=>{var i,r,o=n(9859),s=n(598),a=o.process,c=a&&a.versions,l=c&&c.v8;l?r=(i=l.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),t.exports=r&&+r},3837:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(t,e,n)=>{var i=n(9859),r=n(7933).f,o=n(5762),s=n(7487),a=n(2079),c=n(7081),l=n(6541);t.exports=function(t,e){var n,u,p,d,h,_=t.target,f=t.global,m=t.stat;if(n=f?i:m?i[_]||a(_,{}):(i[_]||{}).prototype)for(u in e){if(d=e[u],p=t.noTargetGet?(h=r(n,u))&&h.value:n[u],!l(f?u:_+(m?".":"#")+u,t.forced)&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(t.sham||p&&p.sham)&&o(d,"sham",!0),s(n,u,d,t)}}},4229:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},4954:(t,e,n)=>{"use strict";n(7950);var i=n(7487),r=n(4229),o=n(95),s=n(3466),a=n(5762),c=o("species"),l=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u="$0"==="a".replace(/./,"$0"),p=o("replace"),d=!!/./[p]&&""===/./[p]("a","$0"),h=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,p){var _=o(t),f=!r((function(){var e={};return e[_]=function(){return 7},7!=""[t](e)})),m=f&&!r((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[_]=/./[_]),n.exec=function(){return e=!0,null},n[_](""),!e}));if(!f||!m||"replace"===t&&(!l||!u||d)||"split"===t&&!h){var g=/./[_],v=n(_,""[t],(function(t,e,n,i,r){return e.exec===s?f&&!r?{done:!0,value:g.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),E=v[0],b=v[1];i(String.prototype,t,E),i(RegExp.prototype,_,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}p&&a(RegExp.prototype[_],"sham",!0)}},1333:(t,e,n)=>{var i=n(9276),r=n(9859),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t])||o(r[t]):i[t]&&i[t][e]||r[t]&&r[t][e]}},17:(t,e,n)=>{var i=n(2991),r=Math.floor,o="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,a=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,n,c,l,u){var p=n+t.length,d=c.length,h=a;return void 0!==l&&(l=i(l),h=s),o.call(u,h,(function(i,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(p);case"<":s=l[o.slice(1,-1)];break;default:var a=+o;if(0===a)return i;if(a>d){var u=r(a/10);return 0===u?i:u<=d?void 0===c[u-1]?o.charAt(1):c[u-1]+o.charAt(1):i}s=c[a-1]}return void 0===s?"":s}))}},9859:(t,e,n)=>{var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},816:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},5977:t=>{t.exports={}},3777:(t,e,n)=>{var i=n(1333);t.exports=i("document","documentElement")},4394:(t,e,n)=>{var i=n(7400),r=n(4229),o=n(2635);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},9337:(t,e,n)=>{var i=n(4229),r=n(7079),o="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},8511:(t,e,n)=>{var i=n(5353),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return r.call(t)}),t.exports=i.inspectSource},6407:(t,e,n)=>{var i,r,o,s=n(8694),a=n(9859),c=n(5052),l=n(5762),u=n(816),p=n(5353),d=n(4399),h=n(5977),_=a.WeakMap;if(s){var f=p.state||(p.state=new _),m=f.get,g=f.has,v=f.set;i=function(t,e){return e.facade=t,v.call(f,t,e),e},r=function(t){return m.call(f,t)||{}},o=function(t){return g.call(f,t)}}else{var E=d("state");h[E]=!0,i=function(t,e){return e.facade=t,l(t,E,e),e},r=function(t){return u(t,E)?t[E]:{}},o=function(t){return u(t,E)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},6541:(t,e,n)=>{var i=n(4229),r=/#|\.prototype\./,o=function(t,e){var n=a[s(t)];return n==l||n!=c&&("function"==typeof e?i(e):!!e)},s=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},5052:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},4231:t=>{t.exports=!1},693:(t,e,n)=>{"use strict";var i,r,o,s=n(7567),a=n(5762),c=n(816),l=n(95),u=n(4231),p=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(r=s(s(o)))!==Object.prototype&&(i=r):d=!0),null==i&&(i={}),u||c(i,p)||a(i,p,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},5495:t=>{t.exports={}},4226:(t,e,n)=>{var i=n(9859);t.exports=i.Promise},3839:(t,e,n)=>{var i=n(4229);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},8694:(t,e,n)=>{var i=n(9859),r=n(8511),o=i.WeakMap;t.exports="function"==typeof o&&/native code/.test(r(o))},6485:(t,e,n)=>{"use strict";var i=n(3819),r=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new r(t)}},2391:(t,e,n)=>{var i,r=n(1176),o=n(219),s=n(3837),a=n(5977),c=n(3777),l=n(2635),u=n(4399)("IE_PROTO"),p=function(){},d=function(t){return"<script>"+t+"<\/script>"},h=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;h=i?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(i):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var n=s.length;n--;)delete h.prototype[s[n]];return h()};a[u]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=r(t),n=new p,p.prototype=null,n[u]=t):n=h(),void 0===e?n:o(n,e)}},219:(t,e,n)=>{var i=n(7400),r=n(1787),o=n(1176),s=n(5632);t.exports=i?Object.defineProperties:function(t,e){o(t);for(var n,i=s(e),a=i.length,c=0;a>c;)r.f(t,n=i[c++],e[n]);return t}},1787:(t,e,n)=>{var i=n(7400),r=n(4394),o=n(1176),s=n(2066),a=Object.defineProperty;e.f=i?a:function(t,e,n){if(o(t),e=s(e,!0),o(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7933:(t,e,n)=>{var i=n(7400),r=n(9195),o=n(5358),s=n(905),a=n(2066),c=n(816),l=n(4394),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=s(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},8151:(t,e,n)=>{var i=n(140),r=n(3837).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},894:(t,e)=>{e.f=Object.getOwnPropertySymbols},7567:(t,e,n)=>{var i=n(816),r=n(2991),o=n(4399),s=n(7528),a=o("IE_PROTO"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},140:(t,e,n)=>{var i=n(816),r=n(905),o=n(9540).indexOf,s=n(5977);t.exports=function(t,e){var n,a=r(t),c=0,l=[];for(n in a)!i(s,n)&&i(a,n)&&l.push(n);for(;e.length>c;)i(a,n=e[c++])&&(~o(l,n)||l.push(n));return l}},5632:(t,e,n)=>{var i=n(140),r=n(3837);t.exports=Object.keys||function(t){return i(t,r)}},9195:(t,e)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},6540:(t,e,n)=>{var i=n(1176),r=n(8505);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return i(n),r(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},4826:(t,e,n)=>{var i=n(1333),r=n(8151),o=n(894),s=n(1176);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},9276:(t,e,n)=>{var i=n(9859);t.exports=i},7757:(t,e,n)=>{var i=n(1176),r=n(5052),o=n(6485);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},7487:(t,e,n)=>{var i=n(9859),r=n(5762),o=n(816),s=n(2079),a=n(8511),c=n(6407),l=c.get,u=c.enforce,p=String(String).split("String");(t.exports=function(t,e,n,a){var c,l=!!a&&!!a.unsafe,d=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||r(n,"name",e),(c=u(n)).source||(c.source=p.join("string"==typeof e?e:""))),t!==i?(l?!h&&t[e]&&(d=!0):delete t[e],d?t[e]=n:r(t,e,n)):d?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},8115:(t,e,n)=>{var i=n(7079),r=n(3466);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},3466:(t,e,n)=>{"use strict";var i,r,o=n(895),s=n(5650),a=RegExp.prototype.exec,c=String.prototype.replace,l=a,u=(i=/a/,r=/b*/g,a.call(i,"a"),a.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),p=s.UNSUPPORTED_Y||s.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||p)&&(l=function(t){var e,n,i,r,s=this,l=p&&s.sticky,h=o.call(s),_=s.source,f=0,m=t;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),m=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(_="(?: "+_+")",m=" "+m,f++),n=new RegExp("^(?:"+_+")",h)),d&&(n=new RegExp("^"+_+"$(?!\\s)",h)),u&&(e=s.lastIndex),i=a.call(l?n:s,m),l?i?(i.input=i.input.slice(f),i[0]=i[0].slice(f),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:u&&i&&(s.lastIndex=s.global?i.index+i[0].length:e),d&&i&&i.length>1&&c.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),t.exports=l},895:(t,e,n)=>{"use strict";var i=n(1176);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},5650:(t,e,n)=>{"use strict";var i=n(4229);function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},8885:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},2079:(t,e,n)=>{var i=n(9859),r=n(5762);t.exports=function(t,e){try{r(i,t,e)}catch(n){i[t]=e}return e}},4555:(t,e,n)=>{var i=n(1787).f,r=n(816),o=n(95)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},4399:(t,e,n)=>{var i=n(3036),r=n(1441),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5353:(t,e,n)=>{var i=n(9859),r=n(2079),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},3036:(t,e,n)=>{var i=n(4231),r=n(5353);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},7942:(t,e,n)=>{var i=n(1176),r=n(3819),o=n(95)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||null==(n=i(s)[o])?e:r(n)}},966:(t,e,n)=>{var i=n(6051),r=n(8885),o=function(t){return function(e,n){var o,s,a=String(r(e)),c=i(n),l=a.length;return c<0||c>=l?t?"":void 0:(o=a.charCodeAt(c))<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):s-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},3231:(t,e,n)=>{var i=n(6051),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},905:(t,e,n)=>{var i=n(9337),r=n(8885);t.exports=function(t){return i(r(t))}},6051:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},4237:(t,e,n)=>{var i=n(6051),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},2991:(t,e,n)=>{var i=n(8885);t.exports=function(t){return Object(i(t))}},2066:(t,e,n)=>{var i=n(5052);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},1441:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},6969:(t,e,n)=>{var i=n(3839);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},95:(t,e,n)=>{var i=n(9859),r=n(3036),o=n(816),s=n(1441),a=n(3839),c=n(6969),l=r("wks"),u=i.Symbol,p=c?u:u&&u.withoutSetter||s;t.exports=function(t){return o(l,t)||(a&&o(u,t)?l[t]=u[t]:l[t]=p("Symbol."+t)),l[t]}},5735:(t,e,n)=>{"use strict";var i=n(905),r=n(9736),o=n(5495),s=n(6407),a=n(7675),c="Array Iterator",l=s.set,u=s.getterFor(c);t.exports=a(Array,"Array",(function(t,e){l(this,{type:c,target:i(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},3108:(t,e,n)=>{"use strict";var i=n(3103),r=n(3143).left,o=n(6038),s=n(3037),a=n(6358),c=n(8801),l=o("reduce"),u=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!l||!u||!c&&a>79&&a<83},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3985:(t,e,n)=>{n(9736)("flatMap")},1515:(t,e,n)=>{"use strict";var i=n(3103),r=n(4231),o=n(4226),s=n(4229),a=n(1333),c=n(7942),l=n(7757),u=n(7487);i({target:"Promise",proto:!0,real:!0,forced:!!o&&s((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=c(this,a("Promise")),n="function"==typeof t;return this.then(n?function(n){return l(e,t()).then((function(){return n}))}:t,n?function(n){return l(e,t()).then((function(){throw n}))}:t)}}),r||"function"!=typeof o||o.prototype.finally||u(o.prototype,"finally",a("Promise").prototype.finally)},7950:(t,e,n)=>{"use strict";var i=n(3103),r=n(3466);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},5940:(t,e,n)=>{"use strict";var i=n(4954),r=n(1176),o=n(4237),s=n(6051),a=n(8885),c=n(6637),l=n(17),u=n(8115),p=Math.max,d=Math.min;i("replace",2,(function(t,e,n,i){var h=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=i.REPLACE_KEEPS_$0,f=h?"$":"$0";return[function(n,i){var r=a(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!h&&_||"string"==typeof i&&-1===i.indexOf(f)){var a=n(e,t,this,i);if(a.done)return a.value}var m=r(t),g=String(this),v="function"==typeof i;v||(i=String(i));var E=m.global;if(E){var b=m.unicode;m.lastIndex=0}for(var y=[];;){var x=u(m,g);if(null===x)break;if(y.push(x),!E)break;""===String(x[0])&&(m.lastIndex=c(g,o(m.lastIndex),b))}for(var w,Q="",N=0,S=0;S<y.length;S++){x=y[S];for(var L=String(x[0]),T=p(d(s(x.index),g.length),0),R=[],U=1;U<x.length;U++)R.push(void 0===(w=x[U])?w:String(w));var k=x.groups;if(v){var B=[L].concat(R,T,g);void 0!==k&&B.push(k);var A=String(i.apply(void 0,B))}else A=l(L,g,T,R,k,i);T>=N&&(Q+=g.slice(N,T)+A,N=T+L.length)}return Q+g.slice(N)}]}))},6886:(t,e,n)=>{var i=n(9859),r=n(5694),o=n(5735),s=n(5762),a=n(95),c=a("iterator"),l=a("toStringTag"),u=o.values;for(var p in r){var d=i[p],h=d&&d.prototype;if(h){if(h[c]!==u)try{s(h,c,u)}catch(t){h[c]=u}if(h[l]||s(h,l,p),r[p])for(var _ in o)if(h[_]!==o[_])try{s(h,_,o[_])}catch(t){h[_]=o[_]}}}},9515:(t,e,n)=>{var i=n(8761)(n(7772),"DataView");t.exports=i},9612:(t,e,n)=>{var i=n(2118),r=n(6909),o=n(8138),s=n(4174),a=n(746);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},235:(t,e,n)=>{var i=n(3945),r=n(1846),o=n(8028),s=n(2344),a=n(4769);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},326:(t,e,n)=>{var i=n(8761)(n(7772),"Map");t.exports=i},6738:(t,e,n)=>{var i=n(2411),r=n(6417),o=n(6928),s=n(9493),a=n(4150);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},2760:(t,e,n)=>{var i=n(8761)(n(7772),"Promise");t.exports=i},2143:(t,e,n)=>{var i=n(8761)(n(7772),"Set");t.exports=i},5386:(t,e,n)=>{var i=n(6738),r=n(2842),o=n(2482);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=r,s.prototype.has=o,t.exports=s},6571:(t,e,n)=>{var i=n(235),r=n(5243),o=n(2858),s=n(4417),a=n(8605),c=n(1418);function l(t){var e=this.__data__=new i(t);this.size=e.size}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,t.exports=l},857:(t,e,n)=>{var i=n(7772).Symbol;t.exports=i},9162:(t,e,n)=>{var i=n(7772).Uint8Array;t.exports=i},3215:(t,e,n)=>{var i=n(8761)(n(7772),"WeakMap");t.exports=i},7552:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}},1634:(t,e,n)=>{var i=n(6473),r=n(9631),o=n(6152),s=n(3226),a=n(9045),c=n(7598),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&r(t),p=!n&&!u&&s(t),d=!n&&!u&&!p&&c(t),h=n||u||p||d,_=h?i(t.length,String):[],f=_.length;for(var m in t)!e&&!l.call(t,m)||h&&("length"==m||p&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,f))||_.push(m);return _}},5067:t=>{t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},7064:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},2218:(t,e,n)=>{var i=n(1225);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},1897:(t,e,n)=>{var i=n(5067),r=n(6152);t.exports=function(t,e,n){var o=e(t);return r(t)?o:i(o,n(t))}},3366:(t,e,n)=>{var i=n(857),r=n(2107),o=n(7157),s=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?r(t):o(t)}},5183:(t,e,n)=>{var i=n(3366),r=n(5125);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},8746:(t,e,n)=>{var i=n(1952),r=n(5125);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,o,s,t,a))}},1952:(t,e,n)=>{var i=n(6571),r=n(4871),o=n(1491),s=n(7416),a=n(940),c=n(6152),l=n(3226),u=n(7598),p="[object Arguments]",d="[object Array]",h="[object Object]",_=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,f,m,g){var v=c(t),E=c(e),b=v?d:a(t),y=E?d:a(e),x=(b=b==p?h:b)==h,w=(y=y==p?h:y)==h,Q=b==y;if(Q&&l(t)){if(!l(e))return!1;v=!0,x=!1}if(Q&&!x)return g||(g=new i),v||u(t)?r(t,e,n,f,m,g):o(t,e,b,n,f,m,g);if(!(1&n)){var N=x&&_.call(t,"__wrapped__"),S=w&&_.call(e,"__wrapped__");if(N||S){var L=N?t.value():t,T=S?e.value():e;return g||(g=new i),m(L,T,n,f,g)}}return!!Q&&(g||(g=new i),s(t,e,n,f,m,g))}},6840:(t,e,n)=>{var i=n(1049),r=n(7394),o=n(9259),s=n(7035),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(i(t)?d:a).test(s(t))}},5522:(t,e,n)=>{var i=n(3366),r=n(1158),o=n(5125),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!s[i(t)]}},6411:(t,e,n)=>{var i=n(6001),r=n(4248),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},6473:t=>{t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},7826:t=>{t.exports=function(t){return function(e){return t(e)}}},9950:t=>{t.exports=function(t,e){return t.has(e)}},4019:(t,e,n)=>{var i=n(7772)["__core-js_shared__"];t.exports=i},4871:(t,e,n)=>{var i=n(5386),r=n(7064),o=n(9950);t.exports=function(t,e,n,s,a,c){var l=1&n,u=t.length,p=e.length;if(u!=p&&!(l&&p>u))return!1;var d=c.get(t),h=c.get(e);if(d&&h)return d==e&&h==t;var _=-1,f=!0,m=2&n?new i:void 0;for(c.set(t,e),c.set(e,t);++_<u;){var g=t[_],v=e[_];if(s)var E=l?s(v,g,_,e,t,c):s(g,v,_,t,e,c);if(void 0!==E){if(E)continue;f=!1;break}if(m){if(!r(e,(function(t,e){if(!o(m,e)&&(g===t||a(g,t,n,s,c)))return m.push(e)}))){f=!1;break}}else if(g!==v&&!a(g,v,n,s,c)){f=!1;break}}return c.delete(t),c.delete(e),f}},1491:(t,e,n)=>{var i=n(857),r=n(9162),o=n(1225),s=n(4871),a=n(5179),c=n(4207),l=i?i.prototype:void 0,u=l?l.valueOf:void 0;t.exports=function(t,e,n,i,l,p,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!p(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var h=a;case"[object Set]":var _=1&i;if(h||(h=c),t.size!=e.size&&!_)return!1;var f=d.get(t);if(f)return f==e;i|=2,d.set(t,e);var m=s(h(t),h(e),i,l,p,d);return d.delete(t),m;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},7416:(t,e,n)=>{var i=n(3483),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var c=1&n,l=i(t),u=l.length;if(u!=i(e).length&&!c)return!1;for(var p=u;p--;){var d=l[p];if(!(c?d in e:r.call(e,d)))return!1}var h=a.get(t),_=a.get(e);if(h&&_)return h==e&&_==t;var f=!0;a.set(t,e),a.set(e,t);for(var m=c;++p<u;){var g=t[d=l[p]],v=e[d];if(o)var E=c?o(v,g,d,e,t,a):o(g,v,d,t,e,a);if(!(void 0===E?g===v||s(g,v,n,o,a):E)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(f=!1)}return a.delete(t),a.delete(e),f}},1242:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},3483:(t,e,n)=>{var i=n(1897),r=n(633),o=n(249);t.exports=function(t){return i(t,o,r)}},7937:(t,e,n)=>{var i=n(8304);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},8761:(t,e,n)=>{var i=n(6840),r=n(8109);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},2107:(t,e,n)=>{var i=n(857),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r}},633:(t,e,n)=>{var i=n(7552),r=n(981),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),i(s(t),(function(e){return o.call(t,e)})))}:r;t.exports=a},940:(t,e,n)=>{var i=n(9515),r=n(326),o=n(2760),s=n(2143),a=n(3215),c=n(3366),l=n(7035),u="[object Map]",p="[object Promise]",d="[object Set]",h="[object WeakMap]",_="[object DataView]",f=l(i),m=l(r),g=l(o),v=l(s),E=l(a),b=c;(i&&b(new i(new ArrayBuffer(1)))!=_||r&&b(new r)!=u||o&&b(o.resolve())!=p||s&&b(new s)!=d||a&&b(new a)!=h)&&(b=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,i=n?l(n):"";if(i)switch(i){case f:return _;case m:return u;case g:return p;case v:return d;case E:return h}return e}),t.exports=b},8109:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},2118:(t,e,n)=>{var i=n(9191);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},6909:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},8138:(t,e,n)=>{var i=n(9191),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},4174:(t,e,n)=>{var i=n(9191),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},746:(t,e,n)=>{var i=n(9191);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},9045:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}},8304:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},7394:(t,e,n)=>{var i,r=n(4019),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!o&&o in t}},6001:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},3945:t=>{t.exports=function(){this.__data__=[],this.size=0}},1846:(t,e,n)=>{var i=n(2218),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},8028:(t,e,n)=>{var i=n(2218);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},2344:(t,e,n)=>{var i=n(2218);t.exports=function(t){return i(this.__data__,t)>-1}},4769:(t,e,n)=>{var i=n(2218);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},2411:(t,e,n)=>{var i=n(9612),r=n(235),o=n(326);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},6417:(t,e,n)=>{var i=n(7937);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},6928:(t,e,n)=>{var i=n(7937);t.exports=function(t){return i(this,t).get(t)}},9493:(t,e,n)=>{var i=n(7937);t.exports=function(t){return i(this,t).has(t)}},4150:(t,e,n)=>{var i=n(7937);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},5179:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},9191:(t,e,n)=>{var i=n(8761)(Object,"create");t.exports=i},4248:(t,e,n)=>{var i=n(241)(Object.keys,Object);t.exports=i},4146:(t,e,n)=>{t=n.nmd(t);var i=n(1242),r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,s=o&&o.exports===r&&i.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},7157:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},241:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},7772:(t,e,n)=>{var i=n(1242),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},2842:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},2482:t=>{t.exports=function(t){return this.__data__.has(t)}},4207:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},5243:(t,e,n)=>{var i=n(235);t.exports=function(){this.__data__=new i,this.size=0}},2858:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},4417:t=>{t.exports=function(t){return this.__data__.get(t)}},8605:t=>{t.exports=function(t){return this.__data__.has(t)}},1418:(t,e,n)=>{var i=n(235),r=n(326),o=n(6738);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!r||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},7035:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},4073:(t,e,n)=>{var i=n(9259),r=n(1100),o=n(7642),s=Math.max,a=Math.min;t.exports=function(t,e,n){var c,l,u,p,d,h,_=0,f=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=c,i=l;return c=l=void 0,_=e,p=t.apply(i,n)}function E(t){return _=t,d=setTimeout(y,e),f?v(t):p}function b(t){var n=t-h;return void 0===h||n>=e||n<0||m&&t-_>=u}function y(){var t=r();if(b(t))return x(t);d=setTimeout(y,function(t){var n=e-(t-h);return m?a(n,u-(t-_)):n}(t))}function x(t){return d=void 0,g&&c?v(t):(c=l=void 0,p)}function w(){var t=r(),n=b(t);if(c=arguments,l=this,h=t,n){if(void 0===d)return E(h);if(m)return clearTimeout(d),d=setTimeout(y,e),v(h)}return void 0===d&&(d=setTimeout(y,e)),p}return e=o(e)||0,i(n)&&(f=!!n.leading,u=(m="maxWait"in n)?s(o(n.maxWait)||0,e):u,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==d&&clearTimeout(d),_=0,c=h=l=d=void 0},w.flush=function(){return void 0===d?p:x(r())},w}},1225:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},9631:(t,e,n)=>{var i=n(5183),r=n(5125),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(t){return r(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},6152:t=>{var e=Array.isArray;t.exports=e},7878:(t,e,n)=>{var i=n(1049),r=n(1158);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},3226:(t,e,n)=>{t=n.nmd(t);var i=n(7772),r=n(6330),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?i.Buffer:void 0,c=(a?a.isBuffer:void 0)||r;t.exports=c},8149:(t,e,n)=>{var i=n(8746);t.exports=function(t,e){return i(t,e)}},1049:(t,e,n)=>{var i=n(3366),r=n(9259);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1158:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},9259:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5125:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},4795:(t,e,n)=>{var i=n(3366),r=n(5125);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},7598:(t,e,n)=>{var i=n(5522),r=n(7826),o=n(4146),s=o&&o.isTypedArray,a=s?r(s):i;t.exports=a},249:(t,e,n)=>{var i=n(1634),r=n(6411),o=n(7878);t.exports=function(t){return o(t)?i(t):r(t)}},1100:(t,e,n)=>{var i=n(7772);t.exports=function(){return i.Date.now()}},981:t=>{t.exports=function(){return[]}},6330:t=>{t.exports=function(){return!1}},7642:(t,e,n)=>{var i=n(9259),r=n(4795),o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=a.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):s.test(t)?NaN:+t}},4844:function(t,e){var n,i;"undefined"!=typeof self&&self,void 0===(i="function"==typeof(n=function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx},t.prototype.pattern=function(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");var e=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":a(n,"global");break;case"i":a(n,"ignoreCase");break;case"m":a(n,"multiLine");break;case"u":a(n,"unicode");break;case"y":a(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e}},t.prototype.disjunction=function(){var t=[];for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t}},t.prototype.alternative=function(){for(var t=[];this.isTerm();)t.push(this.term());return{type:"Alternative",value:t}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){switch(this.popChar()){case"^":return{type:"StartAnchor"};case"$":return{type:"EndAnchor"};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary"};case"B":return{type:"NonWordBoundary"}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}c(t);var e=this.disjunction();return this.consumeChar(")"),{type:t,value:e}}!function(){throw Error("Internal Error - Should never get here!")}()},t.prototype.quantifier=function(t){var e;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":var n=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:n,atMost:n};break;case",":e=this.isDigit()?{atLeast:n,atMost:this.integerIncludingZero()}:{atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;c(e)}if(!0!==t||void 0!==e)return c(e),"?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e},t.prototype.atom=function(){var t;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),c(t),this.isQuantifier()&&(t.quantifier=this.quantifier()),t},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[o("\n"),o("\r"),o("\u2028"),o("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},t.prototype.characterClassEscape=function(){var t,e=!1;switch(this.popChar()){case"d":t=l;break;case"D":t=l,e=!0;break;case"s":t=p;break;case"S":t=p,e=!0;break;case"w":t=u;break;case"W":t=u,e=!0}return c(t),{type:"Set",value:t,complement:e}},t.prototype.controlEscapeAtom=function(){var t;switch(this.popChar()){case"f":t=o("\f");break;case"n":t=o("\n");break;case"r":t=o("\r");break;case"t":t=o("\t");break;case"v":t=o("\v")}return c(t),{type:"Character",value:t}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:o("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){return{type:"Character",value:o(this.popChar())}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:o(this.popChar())}}},t.prototype.characterClass=function(){var t=[],e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){var n=this.classAtom();if("Character"===n.type&&this.isRangeDash()){this.consumeChar("-");var i=this.classAtom();if("Character"===i.type){if(i.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:i.value})}else s(n.value,t),t.push(o("-")),s(i.value,t)}else s(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:o("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++}var e=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n},t.prototype.positiveInteger=function(){var t=this.popChar();if(!1===r.test(t))throw Error("Expecting a positive integer");for(;i.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.integerIncludingZero=function(){var t=this.popChar();if(!1===i.test(t))throw Error("Expecting an integer");for(;i.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.patternCharacter=function(){var t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:o(t)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},t.prototype.isDigit=function(){return i.test(this.peekChar(0))},t.prototype.isClassAtom=function(t){switch(void 0===t&&(t=0),this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},t.prototype.isQuantifier=function(){var t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(t){for(var e="",i=0;i<t;i++){var r=this.popChar();if(!1===n.test(r))throw Error("Expecting a HexDecimal digits");e+=r}return{type:"Character",value:parseInt(e,16)}},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.input[this.idx+t]},t.prototype.popChar=function(){var t=this.peekChar(0);return this.consumeChar(),t},t.prototype.consumeChar=function(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++};var e,n=/[0-9a-fA-F]/,i=/[0-9]/,r=/[1-9]/;function o(t){return t.charCodeAt(0)}function s(t,e){void 0!==t.length?t.forEach((function(t){e.push(t)})):e.push(t)}function a(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e]=!0}function c(t){if(void 0===t)throw Error("Internal Error - Should never get here!")}var l=[];for(e=o("0");e<=o("9");e++)l.push(e);var u=[o("_")].concat(l);for(e=o("a");e<=o("z");e++)u.push(e);for(e=o("A");e<=o("Z");e++)u.push(e);var p=[o(" "),o("\f"),o("\n"),o("\r"),o("\t"),o("\v"),o("\t"),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o("\u2028"),o("\u2029"),o(" "),o(" "),o("　"),o("\ufeff")];function d(){}return d.prototype.visitChildren=function(t){for(var e in t){var n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((function(t){this.visit(t)}),this))}},d.prototype.visit=function(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)},d.prototype.visitPattern=function(t){},d.prototype.visitFlags=function(t){},d.prototype.visitDisjunction=function(t){},d.prototype.visitAlternative=function(t){},d.prototype.visitStartAnchor=function(t){},d.prototype.visitEndAnchor=function(t){},d.prototype.visitWordBoundary=function(t){},d.prototype.visitNonWordBoundary=function(t){},d.prototype.visitLookahead=function(t){},d.prototype.visitNegativeLookahead=function(t){},d.prototype.visitCharacter=function(t){},d.prototype.visitSet=function(t){},d.prototype.visitGroup=function(t){},d.prototype.visitGroupBackReference=function(t){},d.prototype.visitQuantifier=function(t){},{RegExpParser:t,BaseRegExpVisitor:d,VERSION:"0.4.0"}})?n.apply(e,[]):n)||(t.exports=i)},5661:(t,e,n)=>{"use strict";n.r(e);var i={};n.r(i),n.d(i,{PerspectiveColumnStyleElement:()=>M,PerspectiveVieuxElement:()=>G,copy:()=>O,copy_flat:()=>F,default:()=>V,download:()=>P,download_flat:()=>D,set_panic_hook:()=>I});var r={};let o;n.r(r),n.d(r,{COLUMN_SEPARATOR_STRING:()=>Vt,CONFIG_ALIASES:()=>Ut,CONFIG_VALID_KEYS:()=>kt,FILTER_OPERATORS:()=>Ot,SORT_ORDERS:()=>It,SORT_ORDER_IDS:()=>Ct,TYPE_AGGREGATES:()=>Ft,TYPE_FILTERS:()=>jt}),n(6886);const s=new Array(32).fill(void 0);function a(t){return s[t]}s.push(void 0,null,!0,!1);let c=s.length;function l(t){const e=a(t);return function(t){t<36||(s[t]=c,c=t)}(t),e}function u(t){c===s.length&&s.push(s.length+1);const e=c;return c=s[e],s[e]=t,e}let p=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});p.decode();let d=null;function h(){return null!==d&&d.buffer===o.memory.buffer||(d=new Uint8Array(o.memory.buffer)),d}function _(t,e){return p.decode(h().subarray(t,t+e))}let f=0,m=new TextEncoder("utf-8");const g="function"==typeof m.encodeInto?function(t,e){return m.encodeInto(t,e)}:function(t,e){const n=m.encode(t);return e.set(n),{read:t.length,written:n.length}};function v(t,e,n){if(void 0===n){const n=m.encode(t),i=e(n.length);return h().subarray(i,i+n.length).set(n),f=n.length,i}let i=t.length,r=e(i);const o=h();let s=0;for(;s<i;s++){const e=t.charCodeAt(s);if(e>127)break;o[r+s]=e}if(s!==i){0!==s&&(t=t.slice(s)),r=n(r,i,i=s+3*t.length);const e=h().subarray(r+s,r+i);s+=g(t,e).written}return f=s,r}let E=null;function b(){return null!==E&&E.buffer===o.memory.buffer||(E=new Int32Array(o.memory.buffer)),E}function y(t){return null==t}let x=null;function w(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=w(t[0]));for(let i=1;i<e;i++)n+=", "+w(t[i]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let i;if(!(n.length>1))return toString.call(t);if(i=n[1],"Object"==i)try{return"Object("+JSON.stringify(t)+")"}catch(t){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:i}function Q(t,e,n,i){const r={a:t,b:e,cnt:1,dtor:n},s=(...t)=>{r.cnt++;try{return i(r.a,r.b,...t)}finally{0==--r.cnt&&(o.__wbindgen_export_2.get(r.dtor)(r.a,r.b),r.a=0)}};return s.original=r,s}function N(t,e,n){o._dyn_core__ops__function__Fn__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hd9fba7ec79082aef(t,e,u(n))}function S(t,e,n,i){const r={a:t,b:e,cnt:1,dtor:n},s=(...t)=>{r.cnt++;const e=r.a;r.a=0;try{return i(e,r.b,...t)}finally{0==--r.cnt?o.__wbindgen_export_2.get(r.dtor)(e,r.b):r.a=e}};return s.original=r,s}function L(t,e){o._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h29ab9179a040a95a(t,e)}function T(t,e,n){o._dyn_core__ops__function__Fn__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h7329849d3c338ef7(t,e,u(n))}function R(t,e){return l(o._dyn_core__ops__function__Fn_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hbc19d26d6b42b04c(t,e))}function U(t,e,n){o._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hf2cc493c64efc39d(t,e,u(n))}let k=32;function B(t){if(1==k)throw new Error("out of js stack");return s[--k]=t,k}function A(t,e,n){try{o._dyn_core__ops__function__FnMut___A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h613d6d21dbfdf192(t,e,B(n))}finally{s[k++]=void 0}}function I(){o.set_panic_hook()}function C(t){return function(){try{return t.apply(this,arguments)}catch(t){o.__wbindgen_exn_store(u(t))}}}function F(t){try{return l(o.copy_flat(B(t)))}finally{s[k++]=void 0}}function O(t){try{return l(o.copy(B(t)))}finally{s[k++]=void 0}}function D(t){try{return l(o.download_flat(B(t)))}finally{s[k++]=void 0}}function P(t){try{return l(o.download(B(t)))}finally{s[k++]=void 0}}class M{static __wrap(t){const e=Object.create(M.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,o.__wbg_perspectivecolumnstyleelement_free(t)}constructor(t,e,n){var i=o.perspectivecolumnstyleelement_new(u(t),u(e),u(n));return M.__wrap(i)}open(t){o.perspectivecolumnstyleelement_open(this.ptr,u(t))}close(){o.perspectivecolumnstyleelement_close(this.ptr)}connected_callback(){o.perspectivecolumnstyleelement_connected_callback(this.ptr)}}class G{static __wrap(t){const e=Object.create(G.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,o.__wbg_perspectivevieuxelement_free(t)}constructor(t){var e=o.perspectivevieuxelement_new(u(t));return G.__wrap(e)}connected_callback(){o.perspectivevieuxelement_connected_callback(this.ptr)}load(t){return l(o.perspectivevieuxelement_load(this.ptr,u(t)))}set_view(t){o.perspectivevieuxelement_set_view(this.ptr,u(t))}delete_view(){o.perspectivevieuxelement_delete_view(this.ptr)}toggle_config(t){return l(o.perspectivevieuxelement_toggle_config(this.ptr,y(t)?16777215:t?1:0))}}const V=async function t(e){void 0===e&&(e="file:///Users/v625154/work/perspective/packages/perspective-viewer/dist/esm/@finos/perspective-vieux/pkg/perspective_vieux.js".replace(/\.js$/,"_bg.wasm"));const i={wbg:{}};i.wbg.__wbindgen_object_drop_ref=function(t){l(t)},i.wbg.__wbindgen_is_undefined=function(t){return void 0===a(t)},i.wbg.__wbindgen_object_clone_ref=function(t){return u(a(t))},i.wbg.__wbindgen_json_parse=function(t,e){return u(JSON.parse(_(t,e)))},i.wbg.__wbindgen_json_serialize=function(t,e){const n=a(e);var i=v(JSON.stringify(void 0===n?null:n),o.__wbindgen_malloc,o.__wbindgen_realloc),r=f;b()[t/4+1]=r,b()[t/4+0]=i},i.wbg.__wbg_onupdate_ea165fd3e9c7b94b=function(t,e){a(t).on_update(a(e))},i.wbg.__wbg_removeupdate_5f75bcaeefd5df3d=function(t,e){a(t).remove_update(a(e))},i.wbg.__wbg_rowpivots_3d65594384cf7044=function(t){return u(a(t).row_pivots)},i.wbg.__wbg_columnpivots_89bf971e20e9e961=function(t){return u(a(t).column_pivots)},i.wbg.__wbindgen_string_new=function(t,e){return u(_(t,e))},i.wbg.__wbg_tocsv_5638f01201ca1ea2=C((function(t,e){return u(a(t).to_csv(l(e)))})),i.wbg.__wbg_size_e806eb2ba31808cd=C((function(t){return u(a(t).size())})),i.wbg.__wbg_getconfig_90e6939b05a274a3=C((function(t){return u(a(t).get_config())})),i.wbg.__wbg_delete_6bfb01c698fb998f=C((function(t){return u(a(t).delete())})),i.wbg.__wbg_view_0c0953a10e9d3989=C((function(t,e){return u(a(t).view(l(e)))})),i.wbg.__wbg_numrows_e9670bc5f02b9a85=C((function(t){return u(a(t).num_rows())})),i.wbg.__wbindgen_cb_drop=function(t){const e=l(t).original;return 1==e.cnt--&&(e.a=0,!0)},i.wbg.__wbg_new_59cb74e423758ede=function(){return u(new Error)},i.wbg.__wbg_stack_558ba5917b466edd=function(t,e){var n=v(a(e).stack,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;b()[t/4+1]=i,b()[t/4+0]=n},i.wbg.__wbg_error_4bb6c2a97407129a=function(t,e){try{console.error(_(t,e))}finally{o.__wbindgen_free(t,e)}},i.wbg.__wbg_instanceof_Window_fbe0320f34c4cd31=function(t){return a(t)instanceof Window},i.wbg.__wbg_document_2b44f2a86e03665a=function(t){var e=a(t).document;return y(e)?0:u(e)},i.wbg.__wbg_navigator_74ca2cbc2348b985=function(t){return u(a(t).navigator)},i.wbg.__wbg_getComputedStyle_229a290295f66091=C((function(t,e){var n=a(t).getComputedStyle(a(e));return y(n)?0:u(n)})),i.wbg.__wbg_setTimeout_62ddbd1dbc58b759=C((function(t,e,n){return a(t).setTimeout(a(e),n)})),i.wbg.__wbg_body_08ba7a3043ff8e77=function(t){var e=a(t).body;return y(e)?0:u(e)},i.wbg.__wbg_createElement_7cbe07ad3289abea=C((function(t,e,n){return u(a(t).createElement(_(e,n)))})),i.wbg.__wbg_createElementNS_ae76308e06470c87=C((function(t,e,n,i,r){return u(a(t).createElementNS(0===e?void 0:_(e,n),_(i,r)))})),i.wbg.__wbg_createTextNode_bbff6f9f6e6b38bf=function(t,e,n){return u(a(t).createTextNode(_(e,n)))},i.wbg.__wbg_clientX_df24871aabb01061=function(t){return a(t).clientX},i.wbg.__wbg_shiftKey_31c1bdd985f9be8e=function(t){return a(t).shiftKey},i.wbg.__wbg_item_a479291920c028ec=function(t,e){var n=a(t).item(e>>>0);return y(n)?0:u(n)},i.wbg.__wbg_host_176eeb3f3cb78943=function(t){return u(a(t).host)},i.wbg.__wbg_createObjectURL_e46eb3ca9fdf20c5=C((function(t,e){var n=v(URL.createObjectURL(a(e)),o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;b()[t/4+1]=i,b()[t/4+0]=n})),i.wbg.__wbg_instanceof_HtmlTextAreaElement_ceec64505a6bc087=function(t){return a(t)instanceof HTMLTextAreaElement},i.wbg.__wbg_value_41a8d072fc94a8a4=function(t,e){var n=v(a(e).value,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;b()[t/4+1]=i,b()[t/4+0]=n},i.wbg.__wbg_setvalue_e3b8a9c5a4ad0114=function(t,e,n){a(t).value=_(e,n)},i.wbg.__wbg_writeText_cacf5a0e39e301cf=function(t,e,n){return u(a(t).writeText(_(e,n)))},i.wbg.__wbg_new_9907abcf6ec2b9a0=C((function(t,e){return u(new CustomEvent(_(t,e)))})),i.wbg.__wbg_newwitheventinitdict_db06a760c6f3e418=C((function(t,e,n){return u(new CustomEvent(_(t,e),a(n)))})),i.wbg.__wbg_instanceof_HtmlButtonElement_56d6508cc80478bf=function(t){return a(t)instanceof HTMLButtonElement},i.wbg.__wbg_settype_ad8678a602cc664d=function(t,e,n){a(t).type=_(e,n)},i.wbg.__wbg_namespaceURI_5ab9ad8edd6b745e=function(t,e){var n=a(e).namespaceURI,i=y(n)?0:v(n,o.__wbindgen_malloc,o.__wbindgen_realloc),r=f;b()[t/4+1]=r,b()[t/4+0]=i},i.wbg.__wbg_scrollTop_1524dbda93a052af=function(t){return a(t).scrollTop},i.wbg.__wbg_scrollLeft_6c939d107e94c65e=function(t){return a(t).scrollLeft},i.wbg.__wbg_clientWidth_725008becfa6f008=function(t){return a(t).clientWidth},i.wbg.__wbg_clientHeight_cd4d7e2d713d4b5f=function(t){return a(t).clientHeight},i.wbg.__wbg_children_5570264a02a5348a=function(t){return u(a(t).children)},i.wbg.__wbg_attachShadow_121aeff0e52af368=C((function(t,e){return u(a(t).attachShadow(a(e)))})),i.wbg.__wbg_querySelector_f684a5b8a5f0e762=C((function(t,e,n){var i=a(t).querySelector(_(e,n));return y(i)?0:u(i)})),i.wbg.__wbg_removeAttribute_43b052e0560d223b=C((function(t,e,n){a(t).removeAttribute(_(e,n))})),i.wbg.__wbg_setAttribute_b638fce95071fff6=C((function(t,e,n,i,r){a(t).setAttribute(_(e,n),_(i,r))})),i.wbg.__wbg_toggleAttribute_611dae8d928bf34f=C((function(t,e,n,i){return a(t).toggleAttribute(_(e,n),0!==i)})),i.wbg.__wbg_log_2e875b1d2f6f87ac=function(t){console.log(a(t))},i.wbg.__wbg_style_854f82bcc16efd28=function(t){return u(a(t).style)},i.wbg.__wbg_offsetParent_8de5608b9b91f0c9=function(t){var e=a(t).offsetParent;return y(e)?0:u(e)},i.wbg.__wbg_offsetTop_480db8118d615359=function(t){return a(t).offsetTop},i.wbg.__wbg_offsetLeft_14d54d85e3caae6f=function(t){return a(t).offsetLeft},i.wbg.__wbg_offsetWidth_fcd49defe585c688=function(t){return a(t).offsetWidth},i.wbg.__wbg_offsetHeight_bb51b47c9f03728a=function(t){return a(t).offsetHeight},i.wbg.__wbg_click_5bcdaa3dfcd006fb=function(t){a(t).click()},i.wbg.__wbg_focus_a3a607c2c1081818=C((function(t){a(t).focus()})),i.wbg.__wbg_instanceof_HtmlInputElement_bd1ce15e756a8ae2=function(t){return a(t)instanceof HTMLInputElement},i.wbg.__wbg_checked_3edadcb55226cc83=function(t){return a(t).checked},i.wbg.__wbg_setchecked_1fe693236b4c24f3=function(t,e){a(t).checked=0!==e},i.wbg.__wbg_settype_2628aa2562917c8e=function(t,e,n){a(t).type=_(e,n)},i.wbg.__wbg_value_e27a74c3db49694f=function(t,e){var n=v(a(e).value,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;b()[t/4+1]=i,b()[t/4+0]=n},i.wbg.__wbg_setvalue_4f1af4fbd0b9942b=function(t,e,n){a(t).value=_(e,n)},i.wbg.__wbg_newwithu8arraysequence_717878549d30e47f=C((function(t){return u(new Blob(a(t)))})),i.wbg.__wbg_target_62e7aaed452a6541=function(t){var e=a(t).target;return y(e)?0:u(e)},i.wbg.__wbg_preventDefault_4eb36ec8e5563ad6=function(t){a(t).preventDefault()},i.wbg.__wbg_stopPropagation_a8397a950849e3f6=function(t){a(t).stopPropagation()},i.wbg.__wbg_clipboard_06b3f6375fedd3b7=function(t){return u(a(t).clipboard)},i.wbg.__wbg_getPropertyValue_74b0b2fd345b03c9=C((function(t,e,n,i){var r=v(a(e).getPropertyValue(_(n,i)),o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;b()[t/4+1]=s,b()[t/4+0]=r})),i.wbg.__wbg_setProperty_e3d42ccff5ebac2f=C((function(t,e,n,i,r){a(t).setProperty(_(e,n),_(i,r))})),i.wbg.__wbg_addEventListener_63378230aa6735d7=C((function(t,e,n,i){a(t).addEventListener(_(e,n),a(i))})),i.wbg.__wbg_addEventListener_e8fdfac380f9ea25=C((function(t,e,n,i,r){a(t).addEventListener(_(e,n),a(i),a(r))})),i.wbg.__wbg_dispatchEvent_ff22c95b95c5d04d=C((function(t,e){return a(t).dispatchEvent(a(e))})),i.wbg.__wbg_removeEventListener_19da1e4551104118=C((function(t,e,n,i){a(t).removeEventListener(_(e,n),a(i))})),i.wbg.__wbg_removeEventListener_0007cd1449f82876=C((function(t,e,n,i,r){a(t).removeEventListener(_(e,n),a(i),0!==r)})),i.wbg.__wbg_parentNode_be5a24e2fde5b638=function(t){var e=a(t).parentNode;return y(e)?0:u(e)},i.wbg.__wbg_lastChild_5fc52139f307fbaa=function(t){var e=a(t).lastChild;return y(e)?0:u(e)},i.wbg.__wbg_setnodeValue_7404ea475784eb1c=function(t,e,n){a(t).nodeValue=0===e?void 0:_(e,n)},i.wbg.__wbg_textContent_8c1def1e3477ec2e=function(t,e){var n=a(e).textContent,i=y(n)?0:v(n,o.__wbindgen_malloc,o.__wbindgen_realloc),r=f;b()[t/4+1]=r,b()[t/4+0]=i},i.wbg.__wbg_appendChild_98dedaeac24501f2=C((function(t,e){return u(a(t).appendChild(a(e)))})),i.wbg.__wbg_getRootNode_5bff1f99db838954=function(t){return u(a(t).getRootNode())},i.wbg.__wbg_insertBefore_5886cc01dc0233e3=C((function(t,e,n){return u(a(t).insertBefore(a(e),a(n)))})),i.wbg.__wbg_removeChild_51369e223cb8a779=C((function(t,e){return u(a(t).removeChild(a(e)))})),i.wbg.__wbg_new_1abc33d4f9ba3e80=function(){return u(new Array)},i.wbg.__wbg_length_4c7aec6f35774e3d=function(t){return a(t).length},i.wbg.__wbg_push_44968dcdf4cfbb43=function(t,e){return a(t).push(a(e))},i.wbg.__wbg_instanceof_Error_ee0400be53261d48=function(t){return a(t)instanceof Error},i.wbg.__wbg_message_def3f4d0edb6218f=function(t){return u(a(t).message)},i.wbg.__wbg_newnoargs_ab5e899738c0eff4=function(t,e){return u(new Function(_(t,e)))},i.wbg.__wbg_call_ab183a630df3a257=C((function(t,e){return u(a(t).call(a(e)))})),i.wbg.__wbg_call_7a2b5e98ac536644=C((function(t,e,n){return u(a(t).call(a(e),a(n)))})),i.wbg.__wbg_is_e8ad5aa6da4b8c83=function(t,e){return Object.is(a(t),a(e))},i.wbg.__wbg_new_dc5b27cfd2149b8f=function(){return u(new Object)},i.wbg.__wbg_new_bae826039151b559=function(t,e){try{var n={a:t,b:e},i=new Promise(((t,e)=>{const i=n.a;n.a=0;try{return function(t,e,n,i){o.wasm_bindgen__convert__closures__invoke2_mut__h01a9b6309dd6d7db(t,e,u(n),u(i))}(i,n.b,t,e)}finally{n.a=i}}));return u(i)}finally{n.a=n.b=0}},i.wbg.__wbg_resolve_9b0f9ddf5f89cb1e=function(t){return u(Promise.resolve(a(t)))},i.wbg.__wbg_catch_c80c96fcd76e61ea=function(t,e){return u(a(t).catch(a(e)))},i.wbg.__wbg_then_b4358f6ec1ee6657=function(t,e){return u(a(t).then(a(e)))},i.wbg.__wbg_then_3d9a54b0affdf26d=function(t,e,n){return u(a(t).then(a(e),a(n)))},i.wbg.__wbg_self_77eca7b42660e1bb=C((function(){return u(self.self)})),i.wbg.__wbg_window_51dac01569f1ba70=C((function(){return u(window.window)})),i.wbg.__wbg_globalThis_34bac2d08ebb9b58=C((function(){return u(globalThis.globalThis)})),i.wbg.__wbg_global_1c436164a66c9c22=C((function(){return u(n.g.global)})),i.wbg.__wbg_buffer_bc64154385c04ac4=function(t){return u(a(t).buffer)},i.wbg.__wbg_newwithbyteoffsetandlength_3c8748473807c7cf=function(t,e,n){return u(new Uint8Array(a(t),e>>>0,n>>>0))},i.wbg.__wbg_get_4bab9404e99a1f85=C((function(t,e){return u(Reflect.get(a(t),a(e)))})),i.wbg.__wbg_has_09f0cde2d542e767=C((function(t,e){return Reflect.has(a(t),a(e))})),i.wbg.__wbg_set_3afd31f38e771338=C((function(t,e,n){return Reflect.set(a(t),a(e),a(n))})),i.wbg.__wbindgen_number_get=function(t,e){const n=a(e);var i="number"==typeof n?n:void 0;(null!==x&&x.buffer===o.memory.buffer||(x=new Float64Array(o.memory.buffer)),x)[t/8+1]=y(i)?0:i,b()[t/4+0]=!y(i)},i.wbg.__wbindgen_string_get=function(t,e){const n=a(e);var i="string"==typeof n?n:void 0,r=y(i)?0:v(i,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;b()[t/4+1]=s,b()[t/4+0]=r},i.wbg.__wbindgen_debug_string=function(t,e){var n=v(w(a(e)),o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;b()[t/4+1]=i,b()[t/4+0]=n},i.wbg.__wbindgen_throw=function(t,e){throw new Error(_(t,e))},i.wbg.__wbindgen_rethrow=function(t){throw l(t)},i.wbg.__wbindgen_memory=function(){return u(o.memory)},i.wbg.__wbindgen_closure_wrapper977=function(t,e,n){return u(Q(t,e,128,N))},i.wbg.__wbindgen_closure_wrapper979=function(t,e,n){return u(S(t,e,124,L))},i.wbg.__wbindgen_closure_wrapper981=function(t,e,n){return u(Q(t,e,126,T))},i.wbg.__wbindgen_closure_wrapper983=function(t,e,n){return u(Q(t,e,118,R))},i.wbg.__wbindgen_closure_wrapper1480=function(t,e,n){return u(S(t,e,324,U))},i.wbg.__wbindgen_closure_wrapper1784=function(t,e,n){return u(S(t,e,329,A))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:s}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await e,i);return o=r.exports,t.__wbindgen_wasm_module=s,o},j=n.p+"perspective_vieux_bg.wasm",H=new WeakMap,J=t=>"function"==typeof t&&H.has(t),W="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,z=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},X={},Z={},$=`{{lit-${String(Math.random()).slice(2)}}}`,K=`\x3c!--${$}--\x3e`,Y=new RegExp(`${$}|${K}`),q="$lit$";class tt{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],r=document.createTreeWalker(e.content,133,null,!1);let o=0,s=-1,a=0;const{strings:c,values:{length:l}}=t;for(;a<l;){const t=r.nextNode();if(null!==t){if(s++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)et(e[t].name,q)&&i++;for(;i-- >0;){const e=c[a],n=rt.exec(e)[2],i=n.toLowerCase()+q,r=t.getAttribute(i);t.removeAttribute(i);const o=r.split(Y);this.parts.push({type:"attribute",index:s,name:n,strings:o}),a+=o.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),r.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf($)>=0){const i=t.parentNode,r=e.split(Y),o=r.length-1;for(let e=0;e<o;e++){let n,o=r[e];if(""===o)n=it();else{const t=rt.exec(o);null!==t&&et(t[2],q)&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-q.length)+t[3]),n=document.createTextNode(o)}i.insertBefore(n,t),this.parts.push({type:"node",index:++s})}""===r[o]?(i.insertBefore(it(),t),n.push(t)):t.data=r[o],a+=o}}else if(8===t.nodeType)if(t.data===$){const e=t.parentNode;null!==t.previousSibling&&s!==o||(s++,e.insertBefore(it(),t)),o=s,this.parts.push({type:"node",index:s}),null===t.nextSibling?t.data="":(n.push(t),s--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf($,e+1));)this.parts.push({type:"node",index:-1}),a++}}else r.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const et=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},nt=t=>-1!==t.index,it=()=>document.createComment(""),rt=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class ot{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=W?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let r,o=0,s=0,a=i.nextNode();for(;o<n.length;)if(r=n[o],nt(r)){for(;s<r.index;)s++,"TEMPLATE"===a.nodeName&&(e.push(a),i.currentNode=a.content),null===(a=i.nextNode())&&(i.currentNode=e.pop(),a=i.nextNode());if("node"===r.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,r.name,r.strings,this.options));o++}else this.__parts.push(void 0),o++;return W&&(document.adoptNode(t),customElements.upgrade(t)),t}}const st=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),at=` ${$} `;class ct{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let i=0;i<t;i++){const t=this.strings[i],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const o=rt.exec(t);e+=null===o?t+(n?at:K):t.substr(0,o.index)+o[1]+o[2]+q+o[3]+$}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==st&&(e=st.createHTML(e)),t.innerHTML=e,t}}const lt=t=>null===t||!("object"==typeof t||"function"==typeof t),ut=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class pt{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new dt(this)}_getValue(){const t=this.strings,e=t.length-1,n=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=n[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!ut(t))return t}let i="";for(let r=0;r<e;r++){i+=t[r];const e=n[r];if(void 0!==e){const t=e.value;if(lt(t)||!ut(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[e],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class dt{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===X||lt(t)&&t===this.value||(this.value=t,J(t)||(this.committer.dirty=!0))}commit(){for(;J(this.value);){const t=this.value;this.value=X,t(this)}this.value!==X&&this.committer.commit()}}class ht{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(it()),this.endNode=t.appendChild(it())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=it()),t.__insert(this.endNode=it())}insertAfterPart(t){t.__insert(this.startNode=it()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;J(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=X,t(this)}const t=this.__pendingValue;t!==X&&(lt(t)?t!==this.value&&this.__commitText(t):t instanceof ct?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):ut(t)?this.__commitIterable(t):t===Z?(this.value=Z,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof ot&&this.value.template===e)this.value.update(t.values);else{const n=new ot(e,t.processor,this.options),i=n._clone();n.update(t.values),this.__commitNode(i),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const r of t)n=e[i],void 0===n&&(n=new ht(this.options),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(r),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){z(this.startNode.parentNode,t.nextSibling,this.endNode)}}class _t{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;J(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=X,t(this)}if(this.__pendingValue===X)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=X}}class ft extends pt{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new mt(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class mt extends dt{}let gt=!1;(()=>{try{const t={get capture(){return gt=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class vt{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;J(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=X,t(this)}if(this.__pendingValue===X)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=Et(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=X}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const Et=t=>t&&(gt?{capture:t.capture,passive:t.passive,once:t.once}:t.capture),bt=new class{handleAttributeExpressions(t,e,n,i){const r=e[0];return"."===r?new ft(t,e.slice(1),n).parts:"@"===r?[new vt(t,e.slice(1),i.eventContext)]:"?"===r?[new _t(t,e.slice(1),n)]:new pt(t,e,n).parts}handleTextExpression(t){return new ht(t)}};function yt(t){let e=xt.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},xt.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join($);return n=e.keyString.get(i),void 0===n&&(n=new tt(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const xt=new Map,wt=new WeakMap,Qt=(t,e,n)=>{let i=wt.get(e);void 0===i&&(z(e,e.firstChild),wt.set(e,i=new ht(Object.assign({templateFactory:yt},n))),i.appendInto(e)),i.setValue(t),i.commit()};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const Nt=(t,...e)=>new ct(t,e,"html",bt);var St=n(4073),Lt=n.n(St),Tt=n(1053),Rt=n.n(Tt);const Ut={row_pivot:"row_pivots","row-pivot":"row_pivots","row-pivots":"row_pivots",col_pivot:"column_pivots",col_pivots:"column_pivots",column_pivot:"column_pivots","column-pivot":"column_pivots","column-pivots":"column_pivots",filters:"filter",sorts:"sort"},kt=["viewport","row_pivots","column_pivots","aggregates","columns","filter","sort","computed_columns","row_pivot_depth","filter_op"],Bt=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last","high","low","mean","median","pct sum parent","pct sum grand total","sum","sum abs","sum not null","unique"],At=["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],It=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],Ct=[2,0,1,0,1,3,4,3,4],Ft={string:At,float:Bt,integer:Bt,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique","and","or"],datetime:At,date:At},Ot={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},Dt=[Ot.bitwiseAnd,Ot.bitwiseOr,Ot.equals,Ot.doesNotEqual,Ot.or,Ot.and,Ot.isNull,Ot.isNotNull],Pt=[Ot.lessThan,Ot.greaterThan,Ot.equals,Ot.lessThanOrEquals,Ot.greaterThanOrEquals,Ot.doesNotEqual,Ot.isNull,Ot.isNotNull],Mt=[Ot.equals,Ot.contains,Ot.doesNotEqual,Ot.isIn,Ot.isNotIn,Ot.beginsWith,Ot.endsWith,Ot.isNull,Ot.isNotNull],Gt=[Ot.lessThan,Ot.greaterThan,Ot.equals,Ot.lessThanOrEquals,Ot.greaterThanOrEquals,Ot.doesNotEqual,Ot.isNull,Ot.isNotNull],Vt="|",jt={string:Mt,float:Pt,integer:Pt,boolean:Dt,datetime:Gt,date:Gt};var Ht=n(2073),Jt=n(3877),Wt=(n(5940),n(3108),n(1515),n(3985),n(8149)),zt=n.n(Wt);function Xt(t,e,n,i,r){var o={};return Object.keys(i).forEach((function(t){o[t]=i[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(t,e,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function Zt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(Zt.prototype,HTMLElement.prototype),Object.setPrototypeOf(Zt,HTMLElement);const $t=V(j).then((()=>(I(),i)));let Kt;async function Yt(t){return await new Promise(setTimeout),Kt||(Kt=await $t),t()}document.createElement("perspective-vieux").constructor===HTMLElement&&window.customElements.define("perspective-vieux",class extends Zt{constructor(){super(),Yt((()=>{this._instance=new Kt.PerspectiveVieuxElement(this)}))}connectedCallback(){Yt((()=>{this._instance.connected_callback()}))}load(t){Yt((()=>this._instance.load(t)))}set_view(t){Yt((()=>this._instance.set_view(t)))}delete_view(){return Yt((()=>this._instance.delete_view()))}toggle_config(t){return Yt((()=>this._instance.toggle_config(t)))}});document.createElement("perspective-column-style").constructor===HTMLElement&&window.customElements.define("perspective-column-style",class extends Zt{constructor(){super()}open(t,e,n){Yt((()=>{this._instance=new Kt.PerspectiveColumnStyleElement(this,e,n),this._instance.open(t)}))}}),n(3108),n(5940),n(6886);const qt="dnd-poly-",te=["none","copy","copyLink","copyMove","link","linkMove","move","all"],ee=["none","copy","move","link"],ne=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}();function ie(t){return t&&t.tagName}function re(t,e,n){void 0===n&&(n=!0),document.addEventListener(t,e,!!ne&&{passive:n})}function oe(t,e){document.removeEventListener(t,e)}function se(t,e,n,i){void 0===i&&(i=!1);const r=ne?{passive:!0,capture:i}:i;return t.addEventListener(e,n,r),{off:function(){t.removeEventListener(e,n,r)}}}function ae(t,e){if(1===t.nodeType){const n=getComputedStyle(t);for(let t=0;t<n.length;t++){const i=n[t];e.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))}if(e.style.pointerEvents="none",e.removeAttribute("id"),e.removeAttribute("class"),e.removeAttribute("draggable"),"CANVAS"===e.nodeName){const n=t,i=e,r=n.getContext("2d").getImageData(0,0,n.width,n.height);i.getContext("2d").putImageData(r,0,0)}}if(t.hasChildNodes())for(let n=0;n<t.childNodes.length;n++)ae(t.childNodes[n],e.childNodes[n])}function ce(t){return 0===t.length?0:t.reduce((function(t,e){return e+t}),0)/t.length}function le(t,e){for(let n=0;n<t.changedTouches.length;n++)if(t.changedTouches[n].identifier===e)return!0;return!1}function ue(t,e,n){const i=[],r=[];for(let n=0;n<e.touches.length;n++){const o=e.touches[n];i.push(o[t+"X"]),r.push(o[t+"Y"])}n.x=ce(i),n.y=ce(r)}const pe=["","-webkit-"];function de(t,e,n,i,r){void 0===r&&(r=!0);let o=e.x,s=e.y;i&&(o+=i.x,s+=i.y),r&&(o-=parseInt(t.offsetWidth,10)/2,s-=parseInt(t.offsetHeight,10)/2);const a="translate3d("+o+"px,"+s+"px, 0)";for(let e=0;e<pe.length;e++){const i=pe[e]+"transform";t.style[i]=a+" "+n[e]}}const he=function(){function t(t,e){this._dataStore=t,this._setDragImageHandler=e,this._dropEffect=ee[0]}return Object.defineProperty(t.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){0!==this._dataStore.mode&&te.indexOf(t)>-1&&(this._dropEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"types",{get:function(){if(0!==this._dataStore.mode)return Object.freeze(this._dataStore.types)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectAllowed",{get:function(){return this._dataStore.effectAllowed},set:function(t){2===this._dataStore.mode&&te.indexOf(t)>-1&&(this._dataStore.effectAllowed=t)},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if(2===this._dataStore.mode){if(t.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this._dataStore.data[t]=e,-1===this._dataStore.types.indexOf(t)&&this._dataStore.types.push(t)}},t.prototype.getData=function(t){if(1===this._dataStore.mode||2===this._dataStore.mode)return this._dataStore.data[t]||""},t.prototype.clearData=function(t){if(2===this._dataStore.mode){if(t&&this._dataStore.data[t]){delete this._dataStore.data[t];const e=this._dataStore.types.indexOf(t);return void(e>-1&&this._dataStore.types.splice(e,1))}this._dataStore.data={},this._dataStore.types=[]}},t.prototype.setDragImage=function(t,e,n){2===this._dataStore.mode&&this._setDragImageHandler(t,e,n)},t}();function _e(t,e){return t?t===te[0]?ee[0]:0===t.indexOf(te[1])||t===te[7]?ee[1]:0===t.indexOf(te[4])?ee[3]:t===te[6]?ee[2]:ee[1]:3===e.nodeType&&"A"===e.tagName?ee[3]:ee[1]}function fe(t,e,n,i,r,o,s){void 0===o&&(o=!0),void 0===s&&(s=null),console.log("dnd-poly: dispatching "+t);const a=function(t,e,n,i,r,o,s){void 0===s&&(s=null);const a=e.changedTouches[0],c=new Event(n,{bubbles:!0,cancelable:i});c.dataTransfer=o,c.relatedTarget=s,c.screenX=a.screenX,c.screenY=a.screenY,c.clientX=a.clientX,c.clientY=a.clientY,c.pageX=a.pageX,c.pageY=a.pageY;const l=t.getBoundingClientRect();return c.offsetX=c.clientX-l.left,c.offsetY=c.clientY-l.top,c}(e,n,t,o,document.defaultView,r,s),c=!e.dispatchEvent(a);return i.mode=0,c}function me(t,e){if(!t||t===te[7])return e;if(e===ee[1]){if(0===t.indexOf(ee[1]))return ee[1]}else if(e===ee[3]){if(0===t.indexOf(ee[3])||t.indexOf("Link")>-1)return ee[3]}else if(e===ee[2]&&(0===t.indexOf(ee[2])||t.indexOf("Move")>-1))return ee[2];return ee[0]}const ge=function(){function t(t,e,n,i){this._initialEvent=t,this._config=e,this._sourceNode=n,this._dragOperationEndedCb=i,this._dragOperationState=0,this._immediateUserSelection=null,this._currentDropTarget=null,console.log("dnd-poly: setting up potential drag operation.."),this._lastTouchEvent=t,this._initialTouch=t.changedTouches[0],this._touchMoveHandler=this._onTouchMove.bind(this),this._touchEndOrCancelHandler=this._onTouchEndOrCancel.bind(this),re("touchmove",this._touchMoveHandler,!1),re("touchend",this._touchEndOrCancelHandler,!1),re("touchcancel",this._touchEndOrCancelHandler,!1)}return t.prototype._setup=function(){const t=this;console.log("dnd-poly: starting drag and drop operation"),this._dragOperationState=1,this._currentDragOperation=ee[0],this._dragDataStore={data:{},effectAllowed:void 0,mode:3,types:[]},this._currentHotspotCoordinates={x:null,y:null},this._dragImagePageCoordinates={x:null,y:null};let e=this._sourceNode;if(this._dataTransfer=new he(this._dragDataStore,(function(n,i,r){e=n,"number"!=typeof i&&"number"!=typeof r||(t._dragImageOffset={x:i||0,y:r||0})})),this._dragDataStore.mode=2,this._dataTransfer.dropEffect=ee[0],fe("dragstart",this._sourceNode,this._lastTouchEvent,this._dragDataStore,this._dataTransfer))return console.log("dnd-poly: dragstart cancelled"),this._dragOperationState=3,this._cleanup(),!1;ue("page",this._lastTouchEvent,this._dragImagePageCoordinates);const n=this._config.dragImageSetup(e);var i;if(this._dragImageTransforms=(i=n,pe.map((function(t){const e=i.style[t+"transform"];return e&&"none"!==e?e.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""}))),n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.zIndex="999999",n.classList.add("dnd-poly-drag-image"),n.classList.add("dnd-poly-icon"),this._dragImage=n,!this._dragImageOffset)if(this._config.dragImageOffset)this._dragImageOffset={x:this._config.dragImageOffset.x,y:this._config.dragImageOffset.y};else if(this._config.dragImageCenterOnTouch){const t=getComputedStyle(e);this._dragImageOffset={x:0-parseInt(t.marginLeft,10),y:0-parseInt(t.marginTop,10)}}else{const t=e.getBoundingClientRect(),n=getComputedStyle(e);this._dragImageOffset={x:t.left-this._initialTouch.clientX-parseInt(n.marginLeft,10)+t.width/2,y:t.top-this._initialTouch.clientY-parseInt(n.marginTop,10)+t.height/2}}return de(this._dragImage,this._dragImagePageCoordinates,this._dragImageTransforms,this._dragImageOffset,this._config.dragImageCenterOnTouch),document.body.appendChild(this._dragImage),this._iterationIntervalId=window.setInterval((function(){t._iterationLock?console.log("dnd-poly: iteration skipped because previous iteration hast not yet finished."):(t._iterationLock=!0,t._dragAndDropProcessModelIteration(),t._iterationLock=!1)}),this._config.iterationInterval),!0},t.prototype._cleanup=function(){console.log("dnd-poly: cleanup"),this._iterationIntervalId&&(clearInterval(this._iterationIntervalId),this._iterationIntervalId=null),oe("touchmove",this._touchMoveHandler),oe("touchend",this._touchEndOrCancelHandler),oe("touchcancel",this._touchEndOrCancelHandler),this._dragImage&&(this._dragImage.parentNode.removeChild(this._dragImage),this._dragImage=null),this._dragOperationEndedCb(this._config,this._lastTouchEvent,this._dragOperationState)},t.prototype._onTouchMove=function(t){const e=this;if(!1!==le(t,this._initialTouch.identifier)){if(this._lastTouchEvent=t,0===this._dragOperationState){let e;if(this._config.dragStartConditionOverride)try{e=this._config.dragStartConditionOverride(t)}catch(t){console.error("dnd-poly: error in dragStartConditionOverride hook: "+t),e=!1}else e=1===t.touches.length;return e?void(!0===this._setup()&&(this._initialEvent.preventDefault(),t.preventDefault())):void this._cleanup()}if(console.log("dnd-poly: moving draggable.."),t.preventDefault(),ue("client",t,this._currentHotspotCoordinates),ue("page",t,this._dragImagePageCoordinates),this._config.dragImageTranslateOverride)try{let n=!1;if(this._config.dragImageTranslateOverride(t,{x:this._currentHotspotCoordinates.x,y:this._currentHotspotCoordinates.y},this._immediateUserSelection,(function(t,i){e._dragImage&&(n=!0,e._currentHotspotCoordinates.x+=t,e._currentHotspotCoordinates.y+=i,e._dragImagePageCoordinates.x+=t,e._dragImagePageCoordinates.y+=i,de(e._dragImage,e._dragImagePageCoordinates,e._dragImageTransforms,e._dragImageOffset,e._config.dragImageCenterOnTouch))})),n)return}catch(t){console.log("dnd-poly: error in dragImageTranslateOverride hook: "+t)}de(this._dragImage,this._dragImagePageCoordinates,this._dragImageTransforms,this._dragImageOffset,this._config.dragImageCenterOnTouch)}},t.prototype._onTouchEndOrCancel=function(t){if(!1!==le(t,this._initialTouch.identifier)){if(this._config.dragImageTranslateOverride)try{this._config.dragImageTranslateOverride(void 0,void 0,void 0,(function(){}))}catch(t){console.log("dnd-poly: error in dragImageTranslateOverride hook: "+t)}0!==this._dragOperationState?(t.preventDefault(),this._dragOperationState="touchcancel"===t.type?3:2):this._cleanup()}},t.prototype._dragAndDropProcessModelIteration=function(){const t=this,e=this._currentDragOperation;this._dragDataStore.mode=3,this._dataTransfer.dropEffect=ee[0];const n=fe("drag",this._sourceNode,this._lastTouchEvent,this._dragDataStore,this._dataTransfer);if(n&&(console.log("dnd-poly: drag event cancelled."),this._currentDragOperation=ee[0]),n||2===this._dragOperationState||3===this._dragOperationState)return this._dragOperationEnded(this._dragOperationState)?void function(t,e,n,i){const r=getComputedStyle(t);if("hidden"===r.visibility||"none"===r.display)return console.log("dnd-poly: source node is not visible. skipping snapback transition."),void i();e.classList.add("dnd-poly-snapback");const o=getComputedStyle(e),s=parseFloat(o.transitionDuration);if(isNaN(s)||0===s)return console.log("dnd-poly: no transition used - skipping snapback"),void i();console.log("dnd-poly: starting dragimage snap back");const a=t.getBoundingClientRect(),c={x:a.left,y:a.top};c.x+=document.body.scrollLeft||document.documentElement.scrollLeft,c.y+=document.body.scrollTop||document.documentElement.scrollTop,c.x-=parseInt(r.marginLeft,10),c.y-=parseInt(r.marginTop,10);const l=parseFloat(o.transitionDelay),u=Math.round(1e3*(s+l));de(e,c,n,void 0,!1),setTimeout(i,u)}(this._sourceNode,this._dragImage,this._dragImageTransforms,(function(){t._finishDragOperation()})):void this._finishDragOperation();const i=this._config.elementFromPoint(this._currentHotspotCoordinates.x,this._currentHotspotCoordinates.y);console.log("dnd-poly: new immediate user selection is: "+i);const r=this._currentDropTarget;i!==this._immediateUserSelection&&i!==this._currentDropTarget&&(this._immediateUserSelection=i,null!==this._currentDropTarget&&(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=ee[0],fe("dragexit",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1)),null===this._immediateUserSelection?(this._currentDropTarget=this._immediateUserSelection,console.log("dnd-poly: current drop target changed to null")):(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=_e(this._dragDataStore.effectAllowed,this._sourceNode),fe("dragenter",this._immediateUserSelection,this._lastTouchEvent,this._dragDataStore,this._dataTransfer)?(console.log("dnd-poly: dragenter default prevented"),this._currentDropTarget=this._immediateUserSelection,this._currentDragOperation=me(this._dataTransfer.effectAllowed,this._dataTransfer.dropEffect)):this._immediateUserSelection!==document.body&&(this._currentDropTarget=document.body))),r!==this._currentDropTarget&&ie(r)&&(console.log("dnd-poly: current drop target changed."),this._dragDataStore.mode=3,this._dataTransfer.dropEffect=ee[0],fe("dragleave",r,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1,this._currentDropTarget)),ie(this._currentDropTarget)&&(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=_e(this._dragDataStore.effectAllowed,this._sourceNode),!1===fe("dragover",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer)?(console.log("dnd-poly: dragover not prevented on possible drop-target."),this._currentDragOperation=ee[0]):(console.log("dnd-poly: dragover prevented."),this._currentDragOperation=me(this._dataTransfer.effectAllowed,this._dataTransfer.dropEffect))),console.log("dnd-poly: d'n'd iteration ended. current drag operation: "+this._currentDragOperation),e!==this._currentDragOperation&&this._dragImage.classList.remove(qt+e);const o=qt+this._currentDragOperation;this._dragImage.classList.add(o)},t.prototype._dragOperationEnded=function(t){console.log("dnd-poly: drag operation end detected with "+this._currentDragOperation);const e=this._currentDragOperation===ee[0]||null===this._currentDropTarget||3===t;return e?ie(this._currentDropTarget)&&(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=ee[0],fe("dragleave",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1)):ie(this._currentDropTarget)&&(this._dragDataStore.mode=1,this._dataTransfer.dropEffect=this._currentDragOperation,!0===fe("drop",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer)?this._currentDragOperation=this._dataTransfer.dropEffect:this._currentDragOperation=ee[0]),e},t.prototype._finishDragOperation=function(){console.log("dnd-poly: dragimage snap back transition ended"),this._dragDataStore.mode=3,this._dataTransfer.dropEffect=this._currentDragOperation,fe("dragend",this._sourceNode,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1),this._dragOperationState=2,this._cleanup()},t}(),ve={iterationInterval:150,tryFindDraggableTarget:function(t){let e=t.target;do{if(!1!==e.draggable){if(!0===e.draggable)return e;if(e.getAttribute&&"true"===e.getAttribute("draggable"))return e}}while((e=e.parentNode)&&e!==document.body)},dragImageSetup:function(t){const e=t.cloneNode(!0);return ae(t,e),e},elementFromPoint:function(t,e){return document.elementFromPoint(t,e)}};let Ee;function be(t,e){if(console.log("dnd-poly: global touchstart"),Ee)return void console.log("dnd-poly: drag operation already active");const n=ve.tryFindDraggableTarget(t,e);if(n)try{Ee=new ge(t,ve,n,xe)}catch(e){throw xe(ve,t,3),e}else console.log("dnd-poly: no draggable at touchstart coordinates")}function ye(t){console.log("dnd-poly: setup delayed dragstart..");const e=t.target,n=t.composedPath(),i=function(t){console.log("dnd-poly: aborting delayed drag because of "+t.type),o.off(),s.off(),a.off(),c.off(),e&&e.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(r)};e&&e.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));const r=window.setTimeout((function(){console.log("dnd-poly: starting delayed drag.."),o.off(),s.off(),a.off(),c.off(),be(t,n)}),ve.holdToDrag),o=se(e,"touchend",i),s=se(e,"touchcancel",i),a=se(e,"touchmove",i),c=se(window,"scroll",i,!0)}function xe(t,e,n){if(0===n&&(console.log("dnd-poly: Drag never started. Last event was "+e.type),t.defaultActionOverride))try{t.defaultActionOverride(e),e.defaultPrevented&&console.log("dnd-poly: defaultActionOverride has taken care of triggering the default action. preventing default on original event")}catch(t){console.log("dnd-poly: error in defaultActionOverride: "+t)}Ee=null}function we(t,...e){const n=e.map((t=>t.toString())).join("\n");return function(e){return function(t,e,n){const i=function(t){const e=document.createElement("div");return e.innerHTML=t,Array.prototype.slice.call(e.children)[0]}(t);!function(t){if(t.content)return;let e;for(t.content=document.createDocumentFragment();e=t.firstChild;)Node.prototype.appendChild.call(t.content,e)}(i),e&&(i.innerHTML=`<style>${e.toString()}</style>`+i.innerHTML),i.innerHTML=`<style id="psp_styles" scope="${i.getAttribute("id")}">test{}</style>`+i.innerHTML;for(let t of Object.getOwnPropertyNames(n.prototype)){let e=Object.getOwnPropertyDescriptor(n.prototype,t);if(e&&e.set){let i=e.set;e.set=function(e){this.hasAttribute(t)&&this.getAttribute(t)===e?(this._initializing||this._initialized)&&i.call(this,e):this.setAttribute(t,e)},Object.defineProperty(n.prototype,t,e)}}let r=i.getAttribute("id");console.log(`Registered ${r}`),window.customElements.define(r,class extends n{attributeChangedCallback(t,e,i){null===i&&(i="null"),"_"!==t[0]&&e!=i&&Object.getOwnPropertyDescriptor(n.prototype,t).set&&(this[t]=i)}connectedCallback(){if(!this._initialized){this._initializing=!0;var t=document.importNode(i.content,!0);this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t),super.connectedCallback&&super.connectedCallback();for(let t of Object.getOwnPropertyNames(n.prototype))"connectedCallback"!==t&&this.hasAttribute(t)&&"_"!==t[0]&&Object.getOwnPropertyDescriptor(n.prototype,t).set&&(this[t]=this.getAttribute(t));this._initializing=!1,this._initialized=!0}}static get observedAttributes(){return Object.getOwnPropertyNames(n.prototype)}})}(t,{toString:()=>n},e)}}function Qe(t){return function(e,n,i){const r=i.value;return i.set=function(e){let i=this.getAttribute(n);try{null!=e&&""!==e||(e=t()),"string"!=typeof e&&(e=JSON.stringify(e)),e!==i&&(i=e),i=JSON.parse(i)}catch(r){console.warn(`Invalid value for attribute "${n}": ${e}`),i=t()}r.call(this,i)},i.get=function(){return this.hasAttribute(n)?JSON.parse(this.getAttribute(n)):t()},delete i.value,delete i.writable,i}}function Ne(){let t,e=new Promise((e=>{t=e}));return e.resolve=t,e}function Se(t,e,n){const i=Symbol("private lock"),r=n.value;return n.value=async function(...t){if(this[i]&&(await this[i],this[i]))return void await this[i];let e;this[i]=Ne();try{e=await r.call(this,...t)}catch(t){console.error(t)}finally{const t=this[i];return this[i]=void 0,t.resolve(),e}},n}function Le(t,...e){if(e[0]===e[1])return;if(e.every((t=>t.classList.contains("null-column"))))return;let[n,i]=e.map((e=>Array.prototype.slice.call(t.children).indexOf(e)));i<n&&([n,i]=[i,n],e=e.reverse()),t.insertBefore(e[1],e[0]),i+1===t.children.length?t.appendChild(e[0]):t.insertBefore(e[0],t.children[i+1])}!function(t){if(t&&Object.keys(t).forEach((function(e){ve[e]=t[e]})),!ve.forceApply){const t=function(){const t={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},e=!!window.chrome||/chrome/i.test(navigator.userAgent);return t.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||e&&"ontouchstart"in document.documentElement),t}();if(t.userAgentSupportingNativeDnD&&t.draggable&&t.dragEvents)return!1}console.log("dnd-poly: Applying mobile drag and drop polyfill."),ve.holdToDrag?(console.log("dnd-poly: holdToDrag set to "+ve.holdToDrag),re("touchstart",ye,!1)):re("touchstart",be,!1)}({tryFindDraggableTarget:function(t,e){const n=e||t.composedPath();for(let t of n){let e=t;do{if(!1!==e.draggable&&e.getAttribute&&"true"===e.getAttribute("draggable"))return e}while((e=e.parentNode)&&e!==document.body)}},elementFromPoint:function(t,e){for(let n of this._path)if(n.elementFromPoint){let i=n.elementFromPoint(t,e);if(i){for(;i.shadowRoot;)i=i.shadowRoot.elementFromPoint(t,e);return i}}},dragStartConditionOverride:function(t){return this._path=t.composedPath(),!0},holdToDrag:500});const Te=Qe((()=>({}))),Re=Qe((()=>[])),Ue={},ke=new class{registerPlugin(t,e){if(Ue[t])throw new Error(`A perspective-viewer plugin "${t}" has already been registered`);for(const n in Ue){const i=Ue[n];i&&i.name===e.name&&(console.warn(`Conflicting plugin name "${e.name}", qualifying with id`),i.name=`${i.name} [${n}]`,e.name=`${e.name} [${t}]`)}Ue[t]=e}getPlugin(t){return Ue[t]}getInstance(){return Ue}};function Be(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}n.g.registerPlugin=ke.registerPlugin,n.g.getPlugin=ke.getPlugin,n.g.__perspective_plugins__&&n.g.__perspective_plugins__.forEach((([t,e])=>n.g.registerPlugin(t,e))),Object.setPrototypeOf(Be.prototype,HTMLElement.prototype),Object.setPrototypeOf(Be,HTMLElement);const Ae=document.createElement("span");function Ie(t,e=0){Ae.innerHTML=t,document.body.appendChild(Ae);const n=`${Math.max(e,Ae.offsetWidth)+10}px`;return document.body.removeChild(Ae),n}var Ce,Fe;function Oe(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function De(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Ae.style.visibility="hidden",Ae.style.fontFamily="monospace",Ae.style.fontSize="12px",Ae.style.position="absolute",we('\x3c!--\r\n   \r\n   Copyright (c) 2017, the Perspective Authors.\r\n   \r\n   This file is part of the Perspective library, distributed under the terms of\r\n   the Apache License 2.0.  The full license can be found in the LICENSE file.\r\n\r\n--\x3e\r\n\r\n<template id="perspective-row">\r\n    <div id="psp_row">\r\n        <span class=\'is_visible\'></span>\r\n        <div draggable=\'true\' class="row_draggable">\r\n            <span id=\'name\' class="column_name"></span>\r\n            <div class="row_computed">\r\n                <span id="row_edit"></span>\r\n            </div>\r\n            <span id="sort_order"></span>\r\n            <select id="column_aggregate" class="string"></select>\r\n            <select id="filter_operator"></select>\r\n            <input id="filter_operand" placeholder="Value" />\r\n            <span id="row_exclamation" hidden>&#x26A0;</span>\r\n            <span id=\'row_close\'>&#x2715;</span>\r\n        </div>\r\n    </div>\r\n</template>',{toString:()=>':host{display:block}:host .row_computed{display:none;flex-direction:row}.dropping *{pointer-events:none}:host #psp_row{display:var(--psp_row-display,flex);margin:var(--psp_row-margin,0);overflow:visible;align-items:var(--column_selector--align-items,center);width:auto!important;height:auto!important;float:none!important}:host .is_visible{width:var(--column_selector--width,20px);min-width:var(--column_selector--width,20px);height:var(--is_visible--height,auto);cursor:var(--is_visible--cursor,pointer);font-size:var(--column_selector--font-size,14px);margin-top:-2px;display:var(--is_visible-display,none)}:host #sort_order{display:none;font-family:var(--button--font-family,inherit);margin-right:4px}:host #sort_order:before{content:var(--row-sort-order--before,"-")}:host #sort_order:hover{color:var(--active--color,inherit)}:host #filter_operand{font-family:inherit;font-size:12px;display:var(--filter_operand-display,none);margin:0;padding:0px;height:19px;color:inherit;outline:none;border-color:var(--inactive--color,#C5C9D0)}:host #filter_operator{margin:0 0 0 8px;display:var(--filter_operator-display,none);height:17px}:host #filter_operator:hover{color:var(--active--color,inherit)}:host #sort_order{cursor:pointer;width:10px}:host select{margin-left:15px;padding-right:15px;cursor:pointer}@keyframes expand2{from{transform:translateX(10px)}}@keyframes expand3{from{transform:scale(0.9)}}:host(:hover) .is_visible{color:var(--active--color,--column-selector--color)}:host{border:0px solid rgba(0,0,0,0)}:host #row_close{display:var(--row_close-display,inline);cursor:pointer;min-width:5px;max-width:5px;margin-right:3px;flex-grow:0;font-size:10px;margin-left:3px}:host .is_visible:before{content:var(--is_visible--before,none)}:host .is_visible{color:var(--column-selector--color,#999);font-family:var(--column-selector--font-family,Arial)!important}:host #sort_order{display:var(--sort_order-display,none);padding:var(--sort_order-padding,0)}:host #row_exclamation{color:red}:host #row_close{color:inherit;font-size:10px}:host #row_close:hover{color:var(--active--color,inherit)}:host .row_draggable select{font-family:inherit;border:none}:host .row_draggable select:focus{outline:none}:host select::-ms-expand{display:none}:host select{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:var(--select--background,url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgNC45IDEwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0LjkgMTA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojQUFBQUFBO30KPC9zdHlsZT4KPHRpdGxlPmFycm93czwvdGl0bGU+Cjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMS40LDQuNyAyLjUsMy4yIDMuNSw0LjcgIi8+Cjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMy41LDUuMyAyLjUsNi44IDEuNCw1LjMgIi8+Cjwvc3ZnPg==) no-repeat 95% 50%);background-color:var(--select--background-color,white);color:inherit;border-radius:5px;height:21px;margin-top:3px;padding:var(--column_type--padding,0px 0px 0px 5px);font-size:12px;font-weight:300;font-family:inherit}:host .awesomplete > ul{border-radius:0px;margin:0px;border:none;transition:none!important;background:var(--plugin--background,#fff)!important}:host .awesomplete > ul:before{content:none}:host .awesomplete > input,\n:host input{border-color:#ccc;border-width:0 0 1px 0;box-sizing:border-box;background-color:transparent}:host .row_draggable{animation:var(--row_draggable--animation,expand2 0.5s ease-out);cursor:move;border-style:solid;background-color:var(--row_draggable-background-color,none);overflow:var(--row_draggable-overflow,visible);border-color:var(--row_draggable-border-color,none);border-width:var(--row_draggable-border-width,0);padding:var(--row_draggable-padding,0);font-size:12px;flex-grow:1;color:inherit;transition:height 0.2s;box-sizing:border-box;height:var(--row_draggable-height,21px);min-height:var(--row_draggable-height,21px);display:var(--row_draggable-display,flex);align-items:var(--row-draggable--align-items);flex-direction:var(--row-draggable--flex-direction,column);justify-content:var(--row_draggable--justify-content,center);margin:var(--row_draggable--margin,0);transition:var(--row_draggable--transition,none)}:host .row_draggable *{opacity:var(--row_draggable_children-opacity,1)}:host .row_draggable select{margin:0px 0px 0px 27px}:host ul{transition:background-color 0.2s,border-color 0.2s}:host(.null-column) .is_visible{opacity:0!important}:host(.null-column) .row_draggable{background-color:var(--null--background,transparent)!important;border-width:0 0 1px 0!important}:host([drop-target]) .row_draggable{background-color:var(--active--background,#CBE7F9)!important;animation:var(--drop-target--animation,var(--row_draggable--animation,expand3 0.5s ease-out));box-shadow:inset 0px 0px 0px 1px #90CCF2!important}:host .integer:before,\n:host .float:before{content:var(--float--column-type--content,var(--column-type--content,"123"));color:var(--float--column-type--color,var(--column-type--color,#016bc6))}:host .string:before{content:var(--string--column-type--content,var(--column-type--content,"abc"));color:var(--string--column-type--color,var(--column-type--color,#fe9292))}:host .boolean:before{content:var(--boolean--column-type--content,var(--column-type--content,"t/f"));color:var(--boolean--column-type--color,var(--column-type--color,#999999))}:host .date:before{content:var(--date--column-type--content,var(--column-type--content,"mdy"));color:var(--date--column-type--color,var(--column-type--color,#999999))}:host .datetime:before{content:var(--datetime--column-type--content,var(--column-type--content,"mdy"));color:var(--datetime--column-type--color,var(--column-type--color,#999999))}:host .column_name{overflow:hidden;max-width:var(--column_name-max-width,none);white-space:nowrap;text-overflow:ellipsis}:host span#name:before{font-family:var(--interface-monospace--font-family,monospace);position:relative;display:inline-block;padding:var(--column_type--padding,0px 5px);min-width:18px;display:var(--name-before-display,none);width:var(--column_type--width,auto)}:host #column_aggregate{display:var(--column_aggregate-display,none);font-size:10px;font-family:inherit;width:88%;height:20px}:host span#name{flex:var(--column-name--flex,0 1 auto);width:100%;white-space:nowrap;margin:var(--column_name-margin,0)}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9sZXNzL3Jvdy5sZXNzIiwicm93Lmxlc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBb0JBLE1BQ0ksYUNISixDREVBLG9CQUlRLFlBQUEsQ0FDQSxrQkNIUixDRE9BLFlBQ0ksbUJDTEosQ0RRQSxlQUNJLG1DQUFBLENBQ0EsOEJBQUEsQ0FDQSxnQkFBQSxDQUNBLHNEQUFBLENBQ0Esb0JBQUEsQ0FDQSxxQkFBQSxDQUNBLG9CQ05KLENEU0Esa0JBQ0ksd0NBQUEsQ0FDQSw0Q0FBQSxDQUNBLHFDQUFBLENBQ0Esd0NBQUEsQ0FDQSxnREFBQSxDQUNBLGVBQUEsQ0FDQSxzQ0NQSixDRFVBLGtCQUNJLFlBQUEsQ0FDQSw4Q0FBQSxDQUNBLGdCQ1JKLENEU0kseUJBQ0kseUNDUFIsQ0RTSSx3QkFDSSxrQ0NQUixDRFdBLHNCQUVRLG1CQUFBLENBQ0EsY0FBQSxDQUNBLDBDQUFBLENBQ0EsUUFBQSxDQUNBLFdBQUEsQ0FDQSxXQUFBLENBQ0EsYUFBQSxDQUNBLFlBQUEsQ0FDQSwyQ0NWUixDREFBLHVCQWNRLGdCQUFBLENBQ0EsMkNBQUEsQ0FDQSxXQ1hSLENEWVEsNkJBQ0ksa0NDVlosQ0RSQSxrQkF1QlEsY0FBQSxDQUNBLFVDWlIsQ0RnQkEsYUFNUSxnQkFBQSxDQUNBLGtCQUFBLENBQ0EsY0NuQlIsQ0R1QkEsbUJBQ0ksS0FDSSwwQkNyQk4sQ0FDRixDRHdCQSxtQkFDSSxLQUNJLG9CQ3RCTixDQUNGLENEeUJBLDBCQUNJLG1EQ3ZCSixDRDBCQSxNQUNJLDhCQ3hCSixDRHVCQSxpQkFJUSx1Q0FBQSxDQUNBLGNBQUEsQ0FDQSxhQUFBLENBQ0EsYUFBQSxDQUNBLGdCQUFBLENBQ0EsV0FBQSxDQUNBLGNBQUEsQ0FDQSxlQ3hCUixDRGFBLHlCQWVRLHNDQ3pCUixDRFVBLGtCQW1CUSx3Q0FBQSxDQUNBLCtEQzFCUixDRE1BLGtCQXdCUSxzQ0FBQSxDQUNBLG1DQzNCUixDREVBLHVCQTZCUSxTQzVCUixDRERBLGlCQWlDUSxhQUFBLENBQ0EsY0M3QlIsQ0Q4QlEsdUJBQ0ksa0NDNUJaLENEUkEsNEJBeUNRLG1CQUFBLENBQ0EsV0M5QlIsQ0RaQSxrQ0E4Q1EsWUMvQlIsQ0RmQSx5QkFrRFEsWUNoQ1IsQ0RsQkEsYUFzRFEsdUJBQUEsQ0FDQSxvQkFBQSxDQUNBLG1CQUFBLENBQ0EsZUFBQSxDQUNBLDhxQkFBQSxDQUtBLHNEQUFBLENBQ0EsYUFBQSxDQUNBLGlCQUFBLENBQ0EsV0FBQSxDQUNBLGNBQUEsQ0FDQSxtREFBQSxDQUNBLGNBQUEsQ0FDQSxlQUFBLENBQ0EsbUJDckNSLENEbENBLHdCQTJFUSxpQkFBQSxDQUNBLFVBQUEsQ0FDQSxXQUFBLENBQ0EseUJBQUEsQ0FDQSxtREN0Q1IsQ0R6Q0EsK0JBbUZRLFlDdkNSLENENUNBO1lBN0dJLGlCQUFBLENBQ0Esc0JBQUEsQ0FxTUkscUJBQUEsQ0FDQSw0QkN2Q1IsQ0RuREEscUJBOEZRLCtEQUFBLENBQ0EsV0FBQSxDQUNBLGtCQUFBLENBQ0EsMkRBQUEsQ0FDQSw4Q0FBQSxDQUNBLG1EQUFBLENBQ0EsZ0RBQUEsQ0FDQSxzQ0FBQSxDQUNBLGNBQUEsQ0FDQSxXQUFBLENBQ0EsYUFBQSxDQUNBLHNCQUFBLENBQ0EscUJBQUEsQ0FDQSx1Q0FBQSxDQUNBLDJDQUFBLENBQ0EseUNBQUEsQ0FDQSw2Q0FBQSxDQUNBLDBEQUFBLENBQ0EsNERBQUEsQ0FDQSxxQ0FBQSxDQUNBLGdEQ3hDUixDRDFFQSx1QkFxSFksK0NDeENaLENEN0VBLDRCQXlIWSx1QkN6Q1osQ0RoRkEsU0E4SFEsa0RDM0NSLENEK0NBLGdDQUVRLG1CQzlDUixDRDRDQSxtQ0FLUSw4REFBQSxDQUNBLGdDQzlDUixDRGtEQSxvQ0FFUSw0REFBQSxDQUlBLDZGQUFBLENBSUEsa0RDdkRSLENEMkRBO29CQUdRLDRFQUFBLENBSUEsd0VDN0RSLENEc0RBLHFCQWNRLDZFQUFBLENBSUEseUVDcEVSLENEa0RBLHNCQXlCUSw4RUFBQSxDQUlBLDBFQzNFUixDRDhDQSxtQkFvQ1EsMkVBQUEsQ0FJQSx1RUNsRlIsQ0QwQ0EsdUJBK0NRLCtFQUFBLENBSUEsMkVDekZSLENEd0dBLG1CQUNJLGVBQUEsQ0FDQSwyQ0FBQSxDQUNBLGtCQUFBLENBQ0Esc0JDdEdKLENEeUdBLHVCQWRJLDZEQUFBLENBQ0EsaUJBQUEsQ0FDQSxvQkFBQSxDQUNBLDJDQUFBLENBQ0EsY0FBQSxDQVlBLHVDQUFBLENBQ0Esb0NDbkdKLENEc0dBLHdCQUNJLDRDQUFBLENBQ0EsY0FBQSxDQUNBLG1CQUFBLENBQ0EsU0FBQSxDQUNBLFdDcEdKLENEdUdBLGdCQUNJLHNDQUFBLENBQ0EsVUFBQSxDQUNBLGtCQUFBLENBQ0Esa0NDckdKIiwiZmlsZSI6InJvdy5sZXNzIn0= */\n.awesomplete [hidden]{display:none}.awesomplete .visually-hidden{position:absolute;clip:rect(0,0,0,0)}.awesomplete{display:inline-block;position:relative}.awesomplete > input{display:block}.awesomplete > ul{position:absolute;left:0;z-index:1;min-width:100%;box-sizing:border-box;list-style:none;padding:0;margin:0;background:#fff}.awesomplete > ul:empty{display:none}.awesomplete > ul{border-radius:.3em;margin:.2em 0 0;background:hsla(0,0%,100%,.9);background:linear-gradient(to bottom right,white,hsla(0,0%,100%,.8));border:1px solid rgba(0,0,0,.3);box-shadow:.05em .2em .6em rgba(0,0,0,.2);text-shadow:none}@supports (transform: scale(0)){.awesomplete > ul{transition:.3s cubic-bezier(.4,.2,.5,1.4);transform-origin:1.43em -.43em}.awesomplete > ul[hidden],\n\t.awesomplete > ul:empty{opacity:0;transform:scale(0);display:block;transition-timing-function:ease}}.awesomplete > ul:before{content:"";position:absolute;top:-.43em;left:1em;width:0;height:0;padding:.4em;background:white;border:inherit;border-right:0;border-bottom:0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.awesomplete > ul > li{position:relative;padding:.2em .5em;cursor:pointer}.awesomplete > ul > li:hover{background:hsl(200,40%,80%);color:black}.awesomplete > ul > li[aria-selected="true"]{background:hsl(205,40%,40%);color:white}.awesomplete mark{background:hsl(65,100%,50%)}.awesomplete li:hover mark{background:hsl(68,100%,41%)}.awesomplete li[aria-selected="true"] mark{background:hsl(86,100%,21%);color:inherit}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3ZXNvbXBsZXRlLmJhc2UuY3NzIiwiYXdlc29tcGxldGUudGhlbWUuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHNCQUNBLFlBQ0EsQ0FFQSw4QkFDQSxpQkFBQSxDQUNBLGtCQUNBLENBRUEsYUFDQSxvQkFBQSxDQUNBLGlCQUNBLENBRUEscUJBQ0EsYUFDQSxDQUVBLGtCQUNBLGlCQUFBLENBQ0EsTUFBQSxDQUNBLFNBQUEsQ0FDQSxjQUFBLENBQ0EscUJBQUEsQ0FDQSxlQUFBLENBQ0EsU0FBQSxDQUNBLFFBQUEsQ0FDQSxlQUNBLENBRUEsd0JBQ0EsWUFDQSxDQ2hDQSxrQkFDQSxrQkFBQSxDQUNBLGVBQUEsQ0FDQSw2QkFBQSxDQUNBLG9FQUFBLENBQ0EsK0JBQUEsQ0FDQSx5Q0FBQSxDQUNBLGdCQUNBLENBRUEsZ0NBQ0Esa0JBQ0EseUNBQUEsQ0FDQSw4QkFDQSxDQUVBO3lCQUVBLFNBQUEsQ0FDQSxrQkFBQSxDQUNBLGFBQUEsQ0FDQSwrQkFDQSxDQUNBLENBR0EseUJBQ0EsVUFBQSxDQUNBLGlCQUFBLENBQ0EsVUFBQSxDQUNBLFFBQUEsQ0FDQSxPQUFBLENBQUEsUUFBQSxDQUNBLFlBQUEsQ0FDQSxnQkFBQSxDQUNBLGNBQUEsQ0FDQSxjQUFBLENBQ0EsZUFBQSxDQUNBLCtCQUFBLENBQ0EsdUJBQ0EsQ0FFQSx1QkFDQSxpQkFBQSxDQUNBLGlCQUFBLENBQ0EsY0FDQSxDQUVBLDZCQUNBLDJCQUFBLENBQ0EsV0FDQSxDQUVBLDZDQUNBLDJCQUFBLENBQ0EsV0FDQSxDQUVBLGtCQUNBLDJCQUNBLENBRUEsMkJBQ0EsMkJBQ0EsQ0FFQSwyQ0FDQSwyQkFBQSxDQUNBLGFBQ0EiLCJmaWxlIjoiYXdlc29tcGxldGUuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmF3ZXNvbXBsZXRlIFtoaWRkZW5dIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4uYXdlc29tcGxldGUgLnZpc3VhbGx5LWhpZGRlbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGNsaXA6IHJlY3QoMCwgMCwgMCwgMCk7XG59XG5cbi5hd2Vzb21wbGV0ZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLmF3ZXNvbXBsZXRlID4gaW5wdXQge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uYXdlc29tcGxldGUgPiB1bCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgei1pbmRleDogMTtcbiAgICBtaW4td2lkdGg6IDEwMCU7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbWFyZ2luOiAwO1xuICAgIGJhY2tncm91bmQ6ICNmZmY7XG59XG5cbi5hd2Vzb21wbGV0ZSA+IHVsOmVtcHR5IHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuIiwiLmF3ZXNvbXBsZXRlID4gdWwge1xuXHRib3JkZXItcmFkaXVzOiAuM2VtO1xuXHRtYXJnaW46IC4yZW0gMCAwO1xuXHRiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsMTAwJSwuOSk7XG5cdGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20gcmlnaHQsIHdoaXRlLCBoc2xhKDAsMCUsMTAwJSwuOCkpO1xuXHRib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4zKTtcblx0Ym94LXNoYWRvdzogLjA1ZW0gLjJlbSAuNmVtIHJnYmEoMCwwLDAsLjIpO1xuXHR0ZXh0LXNoYWRvdzogbm9uZTtcbn1cblxuQHN1cHBvcnRzICh0cmFuc2Zvcm06IHNjYWxlKDApKSB7XG5cdC5hd2Vzb21wbGV0ZSA+IHVsIHtcblx0XHR0cmFuc2l0aW9uOiAuM3MgY3ViaWMtYmV6aWVyKC40LC4yLC41LDEuNCk7XG5cdFx0dHJhbnNmb3JtLW9yaWdpbjogMS40M2VtIC0uNDNlbTtcblx0fVxuXHRcblx0LmF3ZXNvbXBsZXRlID4gdWxbaGlkZGVuXSxcblx0LmF3ZXNvbXBsZXRlID4gdWw6ZW1wdHkge1xuXHRcdG9wYWNpdHk6IDA7XG5cdFx0dHJhbnNmb3JtOiBzY2FsZSgwKTtcblx0XHRkaXNwbGF5OiBibG9jaztcblx0XHR0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTtcblx0fVxufVxuXG5cdC8qIFBvaW50ZXIgKi9cblx0LmF3ZXNvbXBsZXRlID4gdWw6YmVmb3JlIHtcblx0XHRjb250ZW50OiBcIlwiO1xuXHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHR0b3A6IC0uNDNlbTtcblx0XHRsZWZ0OiAxZW07XG5cdFx0d2lkdGg6IDA7IGhlaWdodDogMDtcblx0XHRwYWRkaW5nOiAuNGVtO1xuXHRcdGJhY2tncm91bmQ6IHdoaXRlO1xuXHRcdGJvcmRlcjogaW5oZXJpdDtcblx0XHRib3JkZXItcmlnaHQ6IDA7XG5cdFx0Ym9yZGVyLWJvdHRvbTogMDtcblx0XHQtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcblx0XHR0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG5cdH1cblxuXHQuYXdlc29tcGxldGUgPiB1bCA+IGxpIHtcblx0XHRwb3NpdGlvbjogcmVsYXRpdmU7XG5cdFx0cGFkZGluZzogLjJlbSAuNWVtO1xuXHRcdGN1cnNvcjogcG9pbnRlcjtcblx0fVxuXHRcblx0LmF3ZXNvbXBsZXRlID4gdWwgPiBsaTpob3ZlciB7XG5cdFx0YmFja2dyb3VuZDogaHNsKDIwMCwgNDAlLCA4MCUpO1xuXHRcdGNvbG9yOiBibGFjaztcblx0fVxuXHRcblx0LmF3ZXNvbXBsZXRlID4gdWwgPiBsaVthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSB7XG5cdFx0YmFja2dyb3VuZDogaHNsKDIwNSwgNDAlLCA0MCUpO1xuXHRcdGNvbG9yOiB3aGl0ZTtcblx0fVxuXHRcblx0XHQuYXdlc29tcGxldGUgbWFyayB7XG5cdFx0XHRiYWNrZ3JvdW5kOiBoc2woNjUsIDEwMCUsIDUwJSk7XG5cdFx0fVxuXHRcdFxuXHRcdC5hd2Vzb21wbGV0ZSBsaTpob3ZlciBtYXJrIHtcblx0XHRcdGJhY2tncm91bmQ6IGhzbCg2OCwgMTAwJSwgNDElKTtcblx0XHR9XG5cdFx0XG5cdFx0LmF3ZXNvbXBsZXRlIGxpW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdIG1hcmsge1xuXHRcdFx0YmFja2dyb3VuZDogaHNsKDg2LCAxMDAlLCAyMSUpO1xuXHRcdFx0Y29sb3I6IGluaGVyaXQ7XG5cdFx0fSJdfQ== */'})(class extends Be{set name(t){this.shadowRoot.querySelector("#name").innerHTML=this.getAttribute("name")}_option_template(t,e){return Nt`
            <option value="${t}" data-desc="${e}">${e||t}</option>
        `}_select_template(t,e){const n=r[t][e]||[],i=Nt`
            <optgroup label="weighted mean">
                ${this._weights.map((t=>this._option_template(JSON.stringify(["weighted mean",t]),t)))}
            </optgroup>
        `,o="TYPE_AGGREGATES"===t&&("integer"===e||"float"===e);return Nt`
            ${n.map((t=>this._option_template(t)))} ${o?i:Z}
        `}set_weights(t){this._weights=t}set type(t){const e=this.shadowRoot.querySelector("#name"),n=this.getAttribute("type");if(!n)return;const i=(0,Ht.get_type_config)(n);i.type&&e.classList.add(i.type),e.classList.add(n);const r=this.shadowRoot.querySelector("#column_aggregate"),o=this.shadowRoot.querySelector("#filter_operator");Qt(this._select_template("TYPE_AGGREGATES",i.type||n),r),Qt(this._select_template("TYPE_FILTERS",i.type||n),o),this.hasAttribute("aggregate")?this.aggregate=this.getAttribute("aggregate"):this.aggregate=i.aggregate,this.hasAttribute("filter")&&(this.filter=this.getAttribute("filter"));const s=this.shadowRoot.querySelector("#filter_operand");this._callback=t=>this._update_filter(t),s.addEventListener("keyup",this._callback.bind(this))}choices(t){const e=this.shadowRoot.querySelector("#filter_operand"),n=this.shadowRoot.querySelector("#filter_operator"),i=new(Rt())(e,{label:this.getAttribute("name"),list:t,minChars:0,autoFirst:!0,filter:function(t,e){return Rt().FILTER_CONTAINS(t,e.match(/[^,]*$/)[0])},item:function(t,e){return Rt().ITEM(t,e.match(/[^,]*$/)[0])},replace:function(t){const e=this.input.value.match(/^.+,\s*|/)[0];"in"===n.value||"not in"===n.value?this.input.value=e+t+", ":this.input.value=e+t}});""===e.value&&i.evaluate(),e.focus(),this._filter_operand.addEventListener("focus",(()=>{0===e.value.trim().length&&i.evaluate()})),e.addEventListener("awesomplete-selectcomplete",this._callback)}set filter(t){const e=this.shadowRoot.querySelector("#filter_operator"),n=JSON.parse(this.getAttribute("filter"));e.value!==n.operator&&(e.value=n.operator||(0,Ht.get_type_config)(this.getAttribute("type")).filter_operator),e.style.width=Ie(e.value);const i=this.shadowRoot.querySelector("#filter_operand"),r=n.operand?n.operand.toString():"";this._initialized||(i.value=r),e.value===Ot.isNull||e.value===Ot.isNotNull?i.style.display="none":(i.style.display="inline-block",i.style.width=Ie(r,30))}set aggregate(t){const e=this.shadowRoot.querySelector("#column_aggregate"),n=this.getAttribute("aggregate");if(e.value!==n&&this.hasAttribute("type")){const t=this.getAttribute("type");e.value=n||(0,Ht.get_type_config)(t).aggregate}this._blur_agg_dropdown()}set computed_column(t){}_get_computed_data(){const t=JSON.parse(this.getAttribute("computed_column"));return{column_name:t.column_name,input_columns:t.input_columns,input_type:t.input_type,computation:t.computation,type:t.type}}_update_filter(t){const e=this.shadowRoot.querySelector("#filter_operand"),n=this.shadowRoot.querySelector("#filter_operator");let i=e.value;switch(this.getAttribute("type")){case"float":i=parseFloat(i);break;case"integer":i=parseInt(i);break;case"boolean":i=i.toLowerCase().indexOf("true")>-1}n.value!==Ot.isIn&&n.value!==Ot.isNotIn||(i=i.split(",").map((t=>t.trim()))),this.setAttribute("filter",JSON.stringify({operator:n.value,operand:i})),this.dispatchEvent(new CustomEvent("filter-selected",{detail:t}))}_set_data_transfer(t){if(this.hasAttribute("filter")){const{operator:e,operand:n}=JSON.parse(this.getAttribute("filter"));t.dataTransfer.setData("text/plain",JSON.stringify([this.getAttribute("name"),e,n,this.getAttribute("type"),this.getAttribute("aggregate")]))}else t.dataTransfer.setData("text/plain",JSON.stringify([this.getAttribute("name"),(0,Ht.get_type_config)(this.getAttribute("type")).filter_operator,void 0,this.getAttribute("type"),this.getAttribute("aggregate")]));this.dispatchEvent(new CustomEvent("row-drag"))}_register_ids(){this._li=this.shadowRoot.querySelector(".row_draggable"),this._visible=this.shadowRoot.querySelector(".is_visible"),this._row_close=this.shadowRoot.querySelector("#row_close"),this._agg_dropdown=this.shadowRoot.querySelector("#column_aggregate"),this._sort_order=this.shadowRoot.querySelector("#sort_order"),this._filter_operand=this.shadowRoot.querySelector("#filter_operand"),this._filter_operator=this.shadowRoot.querySelector("#filter_operator"),this._edit_computed_column_button=this.shadowRoot.querySelector("#row_edit"),this._column_aggregate_category=this.shadowRoot.querySelector("#column_aggregate_category")}_blur_agg_dropdown(){if(this._agg_dropdown.blur(),"["===this._agg_dropdown.value[0])for(const t of this._agg_dropdown.querySelectorAll("optgroup option")){const e=t.getAttribute("data-desc");t.innerHTML=`mean by ${e}`}}_focus_agg_dropdown(){for(const t of this._agg_dropdown.querySelectorAll("optgroup option")){const e=t.getAttribute("data-desc");t.innerHTML=`by ${e}`}}_register_callbacks(){this._li.addEventListener("dragstart",this._set_data_transfer.bind(this)),this._li.addEventListener("dragend",(()=>{this.dispatchEvent(new CustomEvent("row-dragend"))})),this._visible.addEventListener("mousedown",(t=>this.dispatchEvent(new CustomEvent("visibility-clicked",{detail:t})))),this._row_close.addEventListener("mousedown",(t=>this.dispatchEvent(new CustomEvent("close-clicked",{detail:t})))),this._agg_dropdown.addEventListener("focus",this._focus_agg_dropdown.bind(this)),this._agg_dropdown.addEventListener("change",(t=>{this._blur_agg_dropdown();const e=this._agg_dropdown.value;this.setAttribute("aggregate",e),this.dispatchEvent(new CustomEvent("aggregate-selected",{detail:t}))})),this._sort_order.addEventListener("click",(t=>{this.dispatchEvent(new CustomEvent("sort-order",{detail:t}))}));const t=Lt()((t=>this._update_filter(t)),50);this._filter_operator.addEventListener("change",(()=>{this._filter_operand.focus(),this._filter_operator.style.width=Ie(this._filter_operator.value),this.shadowRoot.querySelector("#filter_operand").style.width=Ie(""+this._filter_operand.value,30),t()})),this._edit_computed_column_button.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("perspective-computed-column-edit",{bubbles:!0,detail:this._get_computed_data()}))}))}connectedCallback(){this._register_ids(),this._register_callbacks()}}),Object.setPrototypeOf(Oe.prototype,HTMLElement.prototype),Object.setPrototypeOf(Oe,HTMLElement),we('\x3c!--\n\nCopyright (c) 2017, the Perspective Authors.\n\nThis file is part of the Perspective library, distributed under the terms of\nthe Apache License 2.0.  The full license can be found in the LICENSE file.\n\n--\x3e\n\n<template id="perspective-autocomplete-widget">\n    <div class="psp-autocomplete-widget undocked">\n        <div class="psp-autocomplete-widget__list" role="list"></div>\n        <div class="psp-autocomplete-widget__details"></div>\n    </div>\n</template>',':host{width:100%}:host div.psp-autocomplete-widget{color:var(--color,#666666);font-family:var(--interface-monospace--font-family,monospace);box-sizing:border-box;display:none;z-index:100000;max-height:75px;font-size:12px;margin-top:5px;overflow-x:hidden;overflow-y:hidden;word-break:break-word}:host div.psp-autocomplete-widget.undocked{max-height:100px;min-width:150px;position:absolute;top:24px}:host div.psp-autocomplete-widget.undocked.show-details{min-width:300px}:host div.psp-autocomplete-widget.undocked.show-details div.psp-autocomplete-widget__list{border-right:none}:host div.psp-autocomplete-widget.docked{background:var(--plugin--background,none);position:static;min-width:auto;width:100%}:host div.psp-autocomplete-widget.docked div.psp-autocomplete-widget__list{background:var(--plugin--background,none);border:none}:host div.psp-autocomplete-widget.docked div.psp-autocomplete-widget__details{position:absolute;left:100%;z-index:100000;min-width:150px;max-width:200px}:host div.psp-autocomplete-widget.docked div.psp-autocomplete__item{border-bottom:1px solid #ccc}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__list{border:1px solid #ccc;background:var(--plugin--background,#fff);flex:auto;min-width:40%;overflow-y:scroll}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__list.small{align-self:flex-start}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__details{background:var(--plugin--background,#fff);border:1px solid #ccc;display:none;flex:auto;padding:5px 5px 5px 10px;overflow-y:scroll;word-wrap:break-word}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__details span{display:block}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__details .psp-autocomplete-item-detail__item--label{margin-bottom:5px}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__details .psp-autocomplete-item-detail__item--signature{font-size:11px;margin-bottom:5px}:host div.psp-autocomplete-widget div.psp-autocomplete-widget__details .psp-autocomplete-item-detail__item--help{font-size:10px}:host div.psp-autocomplete-widget div.psp-autocomplete__item{display:block;overflow-x:auto;padding:5px;word-break:keep-all}:host div.psp-autocomplete-widget div.psp-autocomplete__item:hover{background:var(--autocomplete-hover-background,hsl(200,40%,80%));cursor:pointer}:host div.psp-autocomplete-widget div.psp-autocomplete__item:focus,\n:host div.psp-autocomplete-widget div.psp-autocomplete__item[aria-selected="true"]{background:var(--autocomplete-select-background,hsl(205,40%,40%));color:var(--color,#fff);cursor:pointer}:host div.psp-autocomplete-widget div.psp-autocomplete__item:focus span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name::before,\n:host div.psp-autocomplete-widget div.psp-autocomplete__item[aria-selected="true"] span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name::before{color:var(--color,#fff)!important}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name{font-family:var(--interface--font-family,Arial,sans-serif)}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name:before{font-family:var(--interface-monospace--font-family,monospace);position:relative;display:inline-block;padding:var(--column_type--padding,0px 5px);min-width:18px;width:var(--column_type--width,auto)}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name.integer:before,\n:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name.float:before{content:var(--float--column-type--content,var(--column-type--content,"123"));color:var(--float--column-type--color,var(--column-type--color,#016bc6))}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name.string:before{content:var(--string--column-type--content,var(--column-type--content,"abc"));color:var(--string--column-type--color,var(--column-type--color,#fe9292))}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name.boolean:before{content:var(--boolean--column-type--content,var(--column-type--content,"t/f"));color:var(--boolean--column-type--color,var(--column-type--color,#999999))}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name.date:before{content:var(--date--column-type--content,var(--column-type--content,"mdy"));color:var(--date--column-type--color,var(--column-type--color,#999999))}:host div.psp-autocomplete-widget div.psp-autocomplete__item span.psp-autocomplete-item__label.psp-autocomplete-item__label--column-name.datetime:before{content:var(--datetime--column-type--content,var(--column-type--content,"mdy"));color:var(--datetime--column-type--color,var(--column-type--color,#999999))}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9sZXNzL2F1dG9jb21wbGV0ZV93aWRnZXQubGVzcyIsImF1dG9jb21wbGV0ZV93aWRnZXQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFXQSxNQUNJLFVDTUosQ0RQQSxrQ0FJUSwwQkFBQSxDQUNBLDZEQUFBLENBQ0EscUJBQUEsQ0FDQSxZQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FDQSxjQUFBLENBQ0EsY0FBQSxDQUNBLGlCQUFBLENBQ0EsaUJBQUEsQ0FDQSxxQkNNUixDREZRLDJDQUNJLGdCQUFBLENBQ0EsZUFBQSxDQUNBLGlCQUFBLENBQ0EsUUNJWixDREFZLHdEQUNJLGVDRWhCLENESFksMEZBSVEsaUJDRXBCLENESVEseUNBQ0kseUNBQUEsQ0FDQSxlQUFBLENBQ0EsY0FBQSxDQUNBLFVDRlosQ0RGUSwyRUFPUSx5Q0FBQSxDQUNBLFdDRmhCLENETlEsOEVBWVEsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FDQSxlQ0hoQixDRGJRLG9FQW9CUSw0QkNKaEIsQ0RwREEsb0VBNkRZLHFCQUFBLENBQ0EseUNBQUEsQ0FDQSxTQUFBLENBQ0EsYUFBQSxDQUNBLGlCQ05aLENEUVksMEVBQ0kscUJDTmhCLENEOURBLHVFQXlFWSx5Q0FBQSxDQUNBLHFCQUFBLENBQ0EsWUFBQSxDQUNBLFNBQUEsQ0FDQSx3QkFBQSxDQUNBLGlCQUFBLENBQ0Esb0JDUlosQ0R2RUEsNEVBa0ZnQixhQ1JoQixDRDFFQSxrSEFzRmdCLGlCQ1RoQixDRDdFQSxzSEEwRmdCLGNBQUEsQ0FDQSxpQkNWaEIsQ0RqRkEsaUhBK0ZnQixjQ1hoQixDRHBGQSw2REFvR1ksYUFBQSxDQUNBLGVBQUEsQ0FDQSxXQUFBLENBQ0EsbUJDYlosQ0RlWSxtRUFHSSxnRUFBQSxDQUlBLGNDbEJoQixDRHFCWTttRkFFSSxpRUFBQSxDQUlBLHVCQUFBLENBQ0EsY0N0QmhCLENEZVk7dUtBVVEsaUNDckJwQixDRDBCZ0IseUlBQ0ksMERDeEJwQixDRDZCb0IsZ0pBQ0ksNkRBQUEsQ0FJQSxpQkFBQSxDQUNBLG9CQUFBLENBRUEsMkNBQUEsQ0FDQSxjQUFBLENBQ0Esb0NDL0J4QixDRGtDb0I7c0pBRUksNEVBQUEsQ0FJQSx3RUNuQ3hCLENEeUNvQix1SkFDSSw2RUFBQSxDQUlBLHlFQzFDeEIsQ0RnRG9CLHdKQUNJLDhFQUFBLENBSUEsMEVDakR4QixDRHVEb0IscUpBQ0ksMkVBQUEsQ0FJQSx1RUN4RHhCLENEOERvQix5SkFDSSwrRUFBQSxDQUlBLDJFQy9EeEIiLCJmaWxlIjoiYXV0b2NvbXBsZXRlX3dpZGdldC5sZXNzIn0= */')((Xt((Ce=class extends Oe{constructor(){super(),this.displayed=!1,this._selection_index=-1}connectedCallback(){this._register_ids(),this._register_callbacks()}render(t){this._details.style.display="none",this._container.classList.remove("show-details"),this._list.classList.remove("small"),this._selection_index>-1&&this._list.children[this._selection_index].setAttribute("aria-selected",!1),0!==t.length?(this.reposition(),this._selection_index=-1,this.display(),this._list.scrollTop=0,t.length<4&&this._list.classList.add("small"),Qt(t,this._list)):this.clear()}reposition(){console.warning("PerspectiveAutocompleteWidget.reposition has not been implemented.")}item_clicked(t){if(t.target&&(t.target.matches(".psp-autocomplete__item")||t.target.matches(".psp-autocomplete-item__label"))){const e=new CustomEvent("perspective-autocomplete-item-clicked",{detail:t,bubbles:!0});this.dispatchEvent(e)}}item_mouseover(t){t.target&&t.target.matches(".psp-autocomplete__item")&&this._render_details_panel(t.target)}item_mouseleave(t){t.target&&t.target.matches(".psp-autocomplete__item")&&this._render_details_panel(t.target)}get_selected_value(){if(-1!==this._selection_index)return this._list.children[this._selection_index].getAttribute("data-value")}clear(){this.hide(),this._selection_index=-1,this._container.removeAttribute("style"),this._container.classList.add("undocked"),Qt(Z,this._list)}display(){this._container.style.display="flex",this.displayed=!0}hide(){this._container.style.display="none",this.displayed=!1}_next(){const t=this._list.children.length,e=this._selection_index<t-1?this._selection_index+1:t?0:-1;this._go_to(e)}_prev(){const t=this._list.children.length,e=this._selection_index-1,n=this._selection_index>-1&&-1!==e?e:t-1;this._go_to(n)}_go_to(t){const e=this._list.children;this._selection_index>-1&&e[this._selection_index].setAttribute("aria-selected",!1),this._selection_index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),e[t].scrollIntoView({block:"nearest"}),this._render_details_panel(e[t]))}_render_details_panel(t){if(this._clear_details_panel(),t.hasAttribute("data-help")&&t.getAttribute("data-help")){this._container.classList.add("show-details");const e=t.getAttribute("data-label"),n=t.getAttribute("data-help"),i=t.getAttribute("data-signature"),r=Nt`
                <span class="psp-autocomplete-item-detail__item--label">${e}</span>
                <span class="psp-autocomplete-item-detail__item--signature">${i}</span>
                <span class="psp-autocomplete-item-detail__item--help">${n}</span>
            `;Qt(r,this._details),this._details.scrollTop=0,this._details.style.display="block"}}_clear_details_panel(){Qt(Z,this._details),this._details.style.display="none",this._container.classList.remove("show-details")}_register_ids(){this._container=this.shadowRoot.querySelector(".psp-autocomplete-widget"),this._list=this.shadowRoot.querySelector(".psp-autocomplete-widget__list"),this._details=this.shadowRoot.querySelector(".psp-autocomplete-widget__details")}_register_callbacks(){this._list.addEventListener("click",this.item_clicked.bind(this)),this._list.addEventListener("mousedown",(t=>t.preventDefault())),this._list.addEventListener("mouseover",this.item_mouseover.bind(this)),this._list.addEventListener("mouseleave",this.item_mouseleave.bind(this))}}).prototype,"render",[Se],Object.getOwnPropertyDescriptor(Ce.prototype,"render"),Ce.prototype),Ce)),Object.setPrototypeOf(De.prototype,HTMLElement.prototype),Object.setPrototypeOf(De,HTMLElement),we('\x3c!--\n\nCopyright (c) 2017, the Perspective Authors.\n\nThis file is part of the Perspective library, distributed under the terms of\nthe Apache License 2.0.  The full license can be found in the LICENSE file.\n\n--\x3e\n\n<template id="perspective-expression-editor">\n    <div role="textbox" contenteditable="true" spellcheck="false" class="perspective-expression-editor__edit_area"></div>\n</template>',':host{width:100%}:host [contenteditable]{-webkit-user-select:text;user-select:text}:host .perspective-expression-editor__edit_area{background:var(--background-color,none);border:1px solid var(--inactive--color,#ccc);box-sizing:border-box;color:var(--color,#666666);font-size:12px;display:block;font-family:var(--interface-monospace--font-family,monospace);height:75px;margin-top:5px;max-width:250px;min-height:50px;padding:5px;resize:auto;outline:none;overflow:auto;white-space:pre-wrap;width:100%}:host .perspective-expression-editor__edit_area:hover{cursor:text}:host .perspective-expression-editor__edit_area .psp-expression__column_name{font-family:var(--interface--font-family,Arial,sans-serif)}:host .perspective-expression-editor__edit_area .psp-expression__column_name:before{font-family:var(--interface-monospace--font-family,monospace);position:relative;display:inline-block;padding:var(--column_type--padding,0px 5px);min-width:18px;width:var(--column_type--width,auto)}:host .perspective-expression-editor__edit_area .psp-expression__column_name.integer:before,\n:host .perspective-expression-editor__edit_area .psp-expression__column_name.float:before{content:var(--float--column-type--content,var(--column-type--content,"123"));color:var(--float--column-type--color,var(--column-type--color,#016bc6))}:host .perspective-expression-editor__edit_area .psp-expression__column_name.string:before{content:var(--string--column-type--content,var(--column-type--content,"abc"));color:var(--string--column-type--color,var(--column-type--color,#fe9292))}:host .perspective-expression-editor__edit_area .psp-expression__column_name.boolean:before{content:var(--boolean--column-type--content,var(--column-type--content,"t/f"));color:var(--boolean--column-type--color,var(--column-type--color,#999999))}:host .perspective-expression-editor__edit_area .psp-expression__column_name.date:before{content:var(--date--column-type--content,var(--column-type--content,"mdy"));color:var(--date--column-type--color,var(--column-type--color,#999999))}:host .perspective-expression-editor__edit_area .psp-expression__column_name.datetime:before{content:var(--datetime--column-type--content,var(--column-type--content,"mdy"));color:var(--datetime--column-type--color,var(--column-type--color,#999999))}:host .perspective-expression-editor__edit_area .psp-expression__function{color:var(--expression--function-color,#e78340)}:host .perspective-expression-editor__edit_area .psp-expression__operator{color:var(--expression--operator-color,#646464)}:host .perspective-expression-editor__edit_area .psp-expression__suggestion{color:lightgray;text-decoration:underline}:host .perspective-expression-editor__edit_area .psp-expression__errored{font-weight:700;color:var(--expression--error-color,#fa3333);text-decoration:underline dotted var(--expression--error-color,#fa3333)}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9sZXNzL2V4cHJlc3Npb25fZWRpdG9yLmxlc3MiLCJleHByZXNzaW9uX2VkaXRvci5sZXNzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVdBLE1BQ0ksVUNNSixDRFBBLHdCQUtRLHdCQUFBLENBQ0EsZ0JDS1IsQ0RYQSxnREFZUSx1Q0FBQSxDQUNBLDRDQUFBLENBQ0EscUJBQUEsQ0FDQSwwQkFBQSxDQUNBLGNBQUEsQ0FDQSxhQUFBLENBQ0EsNkRBQUEsQ0FDQSxXQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FDQSxlQUFBLENBQ0EsV0FBQSxDQUNBLFdBQUEsQ0FDQSxZQUFBLENBQ0EsYUFBQSxDQUNBLG9CQUFBLENBQ0EsVUNFUixDREFRLHNEQUNJLFdDRVosQ0RqQ0EsNkVBbUNZLDBEQ0NaLENER1ksb0ZBQ0ksNkRBQUEsQ0FDQSxpQkFBQSxDQUNBLG9CQUFBLENBRUEsMkNBQUEsQ0FDQSxjQUFBLENBQ0Esb0NDRmhCLENES1k7MEZBRUksNEVBQUEsQ0FJQSx3RUNOaEIsQ0RZWSwyRkFDSSw2RUFBQSxDQUlBLHlFQ2JoQixDRG1CWSw0RkFDSSw4RUFBQSxDQUlBLDBFQ3BCaEIsQ0QwQlkseUZBQ0ksMkVBQUEsQ0FJQSx1RUMzQmhCLENEaUNZLDZGQUNJLCtFQUFBLENBSUEsMkVDbENoQixDRGpFQSwwRUEyR1ksK0NDdkNaLENEcEVBLDBFQStHWSwrQ0N4Q1osQ0R2RUEsNEVBbUhZLGVBQUEsQ0FDQSx5QkN6Q1osQ0QzRUEseUVBd0hZLGVBQUEsQ0FDQSw0Q0FBQSxDQUNBLHVFQzFDWiIsImZpbGUiOiJleHByZXNzaW9uX2VkaXRvci5sZXNzIn0= */')((Xt((Fe=class extends De{constructor(){super(),this._value="",this._ignored_nodes=["BR","DIV"]}connectedCallback(){this._register_ids(),this._register_callbacks(),this.renderer=this._render_content}set_renderer(t){this.renderer=t}update_content(){const t=this.shadowRoot.getSelection(),e=this.get_tokens(this._edit_area),n=new CustomEvent("perspective-expression-editor-input",{detail:{nodes:e.map((t=>t.node)),text:this._edit_area.textContent}});this.dispatchEvent(n);let i=null,r=null,o=0;for(const n of e)n.node===t.anchorNode&&(i=o+t.anchorOffset),n.node===t.focusNode&&(r=o+t.focusOffset),o+=n.text.length;if(this._value=e.map((t=>t.text)).join(""),0===this._value.length)this.clear_content();else{const t=this.renderer(this._value,e);this._edit_area.innerHTML=t}this.restore_selection(i,r);const s=new CustomEvent("perspective-expression-editor-rendered",{detail:{nodes:e.map((t=>t.node)),text:this._value}});this.dispatchEvent(s)}clear_content(){this._edit_area.innerHTML=""}_render_content(t){return`<span class="psp-expression__fragment">${t}</span>`}restore_selection(t,e){const n=this.shadowRoot.getSelection(),i=this.get_tokens(this._edit_area);let r=this._edit_area,o=0,s=this._edit_area,a=0,c=0;for(const n of i){const i=c,l=i+n.text.length;i<=t&&t<=l&&(r=n.node,o=t-i),i<=e&&e<=l&&(s=n.node,a=e-i),c+=n.text.length}n.setBaseAndExtent(r,o,s,a)}get_text(){return this._edit_area.textContent}get_tokens(t){const e=[];for(const n of t.childNodes)if(!this._ignored_nodes.includes(n.nodeName))switch(n.nodeType){case Node.TEXT_NODE:e.push({text:n.nodeValue,node:n});break;case Node.ELEMENT_NODE:e.splice(e.length,0,...this.get_tokens(n));break;default:continue}return e}focus(){this._edit_area.focus()}keyup(t){const e=new CustomEvent("perspective-expression-editor-keyup",{detail:t});this.dispatchEvent(e)}keydown(t){const e=new CustomEvent("perspective-expression-editor-keydown",{detail:t});this.dispatchEvent(e)}_capture_drop_data(t){this._edit_area.focus();const e=t.dataTransfer.getData("text");if(""!==e)try{const n=JSON.parse(e);Array.isArray(n)&&n.length>4&&(t.preventDefault(),this._edit_area.textContent+=`"${n[0]}"`)}catch(t){}finally{this._reset_selection(),this.update_content()}}_reset_selection(){const t=this.shadowRoot.getSelection();t.setBaseAndExtent(t.anchorNode,this._edit_area.textContent.length,t.focusNode,this._edit_area.textContent.length)}_register_ids(){this._edit_area=this.shadowRoot.querySelector(".perspective-expression-editor__edit_area")}_register_callbacks(){this._edit_area.addEventListener("drop",this._capture_drop_data.bind(this)),this._edit_area.addEventListener("input",this.update_content.bind(this)),this._edit_area.addEventListener("keyup",this.keyup.bind(this)),this._edit_area.addEventListener("keydown",this.keydown.bind(this))}}).prototype,"update_content",[Se],Object.getOwnPropertyDescriptor(Fe.prototype,"update_content"),Fe.prototype),Fe));const Pe={columnName:"column name",leftParen:"(",rightParen:")",add:"+",subtract:"-",multiply:"*",divide:"/",percent_of:"%"},Me=t=>{let e;return e=Array.isArray(t)?t.filter((t=>"EOF"!==t.tokenType.name)).map((t=>t.payload?t.payload:t.image)):t.payload?t.payload:t.image,e&&0!==e.length||(e="EOF"),e},Ge={buildUnexpectedCharactersMessage:(t,e,n,i,r)=>`Ln ${i}, Col ${r}: Unexpected input \`${t}\` at character ${e}`},Ve={buildEarlyExitMessage:t=>`Unexpected token: \`${Me(t.actual)}\`\n\nExpected one of the following tokens: \n ${t.expectedIterationPaths.map((t=>{let e=[];return t.map((t=>{const n=(t.name,Pe[t.name]);e.push(n)})),e.join(", ")})).join("\n")}`,buildMismatchTokenMessage:t=>{let e=Me(t.actual),n=t.expected.name;Pe[n]&&(n=Pe[n]);let i=`Expecting token \`${n}\`, but found \`${e}\`.`;return")"!==n&&"rightParen"!==n||(i+="\n\nMake sure all left parentheses are matched\nwith right parentheses."),i},buildNoViableAltMessage:t=>{let e=`Unexpected token: \`${Me(t.actual)}\`.`;return"Expression"===t.ruleName?e+="\n\nExpected a column name, `(`,\nor functional operator such as:\n- `sqrt`\n- `uppercase`\n- `day_of_week`":"ColumnName"===t.ruleName?e+="\n\nExpected a column name or `(`":"TerminalColumnName"===t.ruleName&&(e+="\n\nExpected a column name after 'AS'"),e}},je={},He=(0,Jt.createToken)({name:"OperatorTokenType",pattern:Jt.Lexer.NA}),Je=(0,Jt.createToken)({name:"FunctionTokenType",pattern:Jt.Lexer.NA}),We=(0,Jt.createToken)({name:"ColumnNameTokenType",pattern:Jt.Lexer.NA}),ze=(0,Jt.createToken)({name:"UpperLowerTokenType",pattern:/(uppercase|lowercase)/}),Xe=/(["'])(.*?[^\\])\1/y,Ze=(0,Jt.createToken)({name:"columnName",pattern:{exec:function(t,e){Xe.lastIndex=e;const n=Xe.exec(t);return null!==n&&3===n.length&&(n.payload=n[2]),n}},line_breaks:!1,categories:[We]}),$e=(0,Jt.createToken)({name:"as",label:"Name new column as",pattern:/(AS|As|as)/,longer_alt:ze}),Ke=(0,Jt.createToken)({name:"add",label:"+",pattern:/\+/,categories:[He]}),Ye=(0,Jt.createToken)({name:"subtract",label:"-",pattern:/\-/,categories:[He]}),qe=(0,Jt.createToken)({name:"multiply",label:"*",pattern:/\*/,categories:[He]}),tn=(0,Jt.createToken)({name:"divide",label:"/",pattern:/\//,categories:[He]}),en=(0,Jt.createToken)({name:"pow",label:"x ^ y",pattern:/\^/,categories:[He]}),nn=(0,Jt.createToken)({name:"percent_of",label:"x % y",pattern:/\%/,categories:[He]}),rn=(0,Jt.createToken)({name:"equals",label:"x == y",pattern:/\==/,categories:[He]}),on=(0,Jt.createToken)({name:"not_equals",label:"x != y",pattern:/\!=/,categories:[He]}),sn=(0,Jt.createToken)({name:"greater_than",label:"x > y",pattern:/\>/,categories:[He]}),an=(0,Jt.createToken)({name:"less_than",label:"x < y",pattern:/\</,categories:[He]}),cn=(0,Jt.createToken)({name:"is",label:"x is y",pattern:/is/,categories:[He]}),ln=(0,Jt.createToken)({name:"sqrt",label:"sqrt(x)",pattern:/sqrt/,categories:[Je]}),un=(0,Jt.createToken)({name:"pow2",label:"x ^ 2",pattern:/pow2/,categories:[Je]}),pn=(0,Jt.createToken)({name:"abs",label:"abs(x)",pattern:/abs/,categories:[Je]}),dn=(0,Jt.createToken)({name:"invert",label:"1 / x",pattern:/invert/,categories:[Je]}),hn=(0,Jt.createToken)({name:"log",label:"log(x)",pattern:/log/,categories:[Je]}),_n=(0,Jt.createToken)({name:"exp",label:"exp(x)",pattern:/exp/,categories:[Je]}),fn=(0,Jt.createToken)({name:"bin10",label:"Bucket x by 10",pattern:/bin10/,categories:[Je]}),mn=(0,Jt.createToken)({name:"bin100",label:"Bucket x by 100",pattern:/bin100/,categories:[Je]}),gn=(0,Jt.createToken)({name:"bin1000",label:"Bucket x by 1000",pattern:/bin1000/,categories:[Je]}),vn=(0,Jt.createToken)({name:"bin10th",label:"Bucket x by 1/10",pattern:/bin10th/,categories:[Je]}),En=(0,Jt.createToken)({name:"bin100th",label:"Bucket x by 1/100",pattern:/bin100th/,categories:[Je]}),bn=(0,Jt.createToken)({name:"bin1000th",label:"Bucket x by 1/1000",pattern:/bin1000th/,categories:[Je]}),yn=(0,Jt.createToken)({name:"length",label:"length(x)",pattern:/length/,categories:[Je]}),xn=(0,Jt.createToken)({name:"lowercase",label:"lowercase(x)",pattern:/lowercase/,categories:[Je]}),wn=(0,Jt.createToken)({name:"uppercase",label:"uppercase(x)",pattern:/uppercase/,categories:[Je]}),Qn=(0,Jt.createToken)({name:"concat_comma",label:"Concat(x, y) with comma",pattern:/concat_comma/,categories:[Je]}),Nn=(0,Jt.createToken)({name:"concat_space",label:"Concat(x, y) with space",pattern:/concat_space/,categories:[Je]}),Sn=(0,Jt.createToken)({name:"hour_of_day",label:"Hour of day",pattern:/hour_of_day/,categories:[Je]}),Ln=(0,Jt.createToken)({name:"day_of_week",label:"Day of week",pattern:/day_of_week/,categories:[Je]}),Tn=(0,Jt.createToken)({name:"month_of_year",label:"Month of year",pattern:/month_of_year/,categories:[Je]}),Rn=(0,Jt.createToken)({name:"second_bucket",label:"Bucket(x) by seconds",pattern:/second_bucket/,categories:[Je]}),Un=(0,Jt.createToken)({name:"minute_bucket",label:"Bucket(x) by minutes",pattern:/minute_bucket/,categories:[Je]}),kn=(0,Jt.createToken)({name:"hour_bucket",label:"Bucket(x) by hours",pattern:/hour_bucket/,categories:[Je]}),Bn=(0,Jt.createToken)({name:"day_bucket",pattern:/day_bucket/,label:"Bucket(x) by day",categories:[Je]}),An=(0,Jt.createToken)({name:"week_bucket",pattern:/week_bucket/,label:"Bucket(x) by week",categories:[Je]}),In=(0,Jt.createToken)({name:"month_bucket",pattern:/month_bucket/,label:"Bucket(x) by month",categories:[Je]}),Cn=(0,Jt.createToken)({name:"year_bucket",pattern:/year_bucket/,label:"Bucket(x) by year",categories:[Je]}),Fn=(0,Jt.createToken)({name:"leftParen",label:"(",pattern:/\(/}),On=(0,Jt.createToken)({name:"rightParen",label:")",pattern:/\)/}),Dn=(0,Jt.createToken)({name:"comma",label:",",pattern:/,/}),Pn=(0,Jt.createToken)({name:"whitespace",pattern:/\s+/}),Mn=[Pn,Dn,$e,Ze,Fn,On,Ke,Ye,qe,tn,en,nn,rn,on,sn,an,ln,un,pn,dn,hn,_n,bn,gn,En,mn,vn,fn,yn,cn,Qn,Nn,wn,xn,Sn,Ln,Tn,Rn,Un,kn,Bn,An,In,Cn,ze];Mn.forEach((t=>{je[t.name]=t;let e=t.PATTERN.source;e&&0==e.indexOf("\\")&&(e=e.substring(1)),(0,Jt.tokenMatcher)(t,Je)||(0,Jt.tokenMatcher)(t,He)})),new Jt.Lexer(Mn,{errorMessageProvider:Ge});const Gn=function(t){const e=[];for(const n of t)(0,Jt.tokenMatcher)(n,Pn)||e.push(n);return e};class Vn extends Jt.CstParser{constructor(t){super(t,{errorMessageProvider:Ve}),this.RULE("SuperExpression",(()=>{this.SUBRULE(this.Expression)})),this.RULE("Expression",(()=>{this.SUBRULE(this.OperatorComputedColumn)})),this.RULE("OperatorComputedColumn",(()=>{this.SUBRULE(this.AdditionOperatorComputedColumn,{LABEL:"left"}),this.MANY((()=>{this.SUBRULE(this.Operator),this.SUBRULE2(this.AdditionOperatorComputedColumn,{LABEL:"right"}),this.OPTION((()=>{this.SUBRULE(this.As,{LABEL:"as"})}))}))})),this.RULE("AdditionOperatorComputedColumn",(()=>{this.SUBRULE(this.MultiplicationOperatorComputedColumn,{LABEL:"left"}),this.MANY((()=>{this.SUBRULE(this.AdditionOperator),this.SUBRULE2(this.MultiplicationOperatorComputedColumn,{LABEL:"right"}),this.OPTION((()=>{this.SUBRULE(this.As,{LABEL:"as"})}))}))})),this.RULE("MultiplicationOperatorComputedColumn",(()=>{this.SUBRULE(this.ExponentOperatorComputedColumn,{LABEL:"left"}),this.MANY((()=>{this.SUBRULE(this.MultiplicationOperator),this.SUBRULE2(this.ExponentOperatorComputedColumn,{LABEL:"right"}),this.OPTION((()=>{this.SUBRULE(this.As,{LABEL:"as"})}))}))})),this.RULE("ExponentOperatorComputedColumn",(()=>{this.SUBRULE(this.ColumnName,{LABEL:"left"}),this.MANY((()=>{this.SUBRULE(this.ExponentOperator),this.SUBRULE2(this.ColumnName,{LABEL:"right"}),this.OPTION((()=>{this.SUBRULE(this.As,{LABEL:"as"})}))}))})),this.RULE("FunctionComputedColumn",(()=>{this.SUBRULE(this.Function),this.CONSUME(t.leftParen),this.AT_LEAST_ONE_SEP({SEP:t.comma,DEF:()=>{this.SUBRULE(this.Expression,{LABEL:"param"})}}),this.CONSUME(t.rightParen),this.OPTION((()=>{this.SUBRULE(this.As,{LABEL:"as"})}))})),this.RULE("Function",(()=>{this.OR([{ALT:()=>this.CONSUME(t.sqrt)},{ALT:()=>this.CONSUME(t.pow2)},{ALT:()=>this.CONSUME(t.abs)},{ALT:()=>this.CONSUME(t.invert)},{ALT:()=>this.CONSUME(t.log)},{ALT:()=>this.CONSUME(t.exp)},{ALT:()=>this.CONSUME(t.bin1000th)},{ALT:()=>this.CONSUME(t.bin1000)},{ALT:()=>this.CONSUME(t.bin100th)},{ALT:()=>this.CONSUME(t.bin100)},{ALT:()=>this.CONSUME(t.bin10th)},{ALT:()=>this.CONSUME(t.bin10)},{ALT:()=>this.CONSUME(t.length)},{ALT:()=>this.CONSUME(t.uppercase)},{ALT:()=>this.CONSUME(t.lowercase)},{ALT:()=>this.CONSUME(t.concat_comma)},{ALT:()=>this.CONSUME(t.concat_space)},{ALT:()=>this.CONSUME(t.hour_of_day)},{ALT:()=>this.CONSUME(t.day_of_week)},{ALT:()=>this.CONSUME(t.month_of_year)},{ALT:()=>this.CONSUME(t.second_bucket)},{ALT:()=>this.CONSUME(t.minute_bucket)},{ALT:()=>this.CONSUME(t.hour_bucket)},{ALT:()=>this.CONSUME(t.day_bucket)},{ALT:()=>this.CONSUME(t.week_bucket)},{ALT:()=>this.CONSUME(t.month_bucket)},{ALT:()=>this.CONSUME(t.year_bucket)}])})),this.RULE("AdditionOperator",(()=>{this.OR([{ALT:()=>this.CONSUME(t.add)},{ALT:()=>this.CONSUME(t.subtract)}])})),this.RULE("MultiplicationOperator",(()=>{this.OR([{ALT:()=>this.CONSUME(t.multiply)},{ALT:()=>this.CONSUME(t.divide)}])})),this.RULE("ExponentOperator",(()=>{this.CONSUME(t.pow)})),this.RULE("Operator",(()=>{this.OR([{ALT:()=>this.CONSUME(t.percent_of)},{ALT:()=>this.CONSUME(t.equals)},{ALT:()=>this.CONSUME(t.not_equals)},{ALT:()=>this.CONSUME(t.greater_than)},{ALT:()=>this.CONSUME(t.less_than)},{ALT:()=>this.CONSUME(t.is)}])})),this.RULE("TerminalColumnName",(()=>{this.CONSUME(t.columnName)})),this.RULE("As",(()=>{this.CONSUME(t.as),this.SUBRULE(this.TerminalColumnName)})),this.RULE("ColumnName",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.ParentheticalExpression)},{ALT:()=>this.SUBRULE(this.FunctionComputedColumn)},{ALT:()=>this.CONSUME(t.columnName)}],{ERR_MSG:"Expected a column name (wrapped in double quotes) or a parenthesis-wrapped expression."})})),this.RULE("ParentheticalExpression",(()=>{this.CONSUME(t.leftParen),this.SUBRULE(this.Expression),this.CONSUME(t.rightParen)})),this.performSelfAnalysis()}}const jn={"+":(t,e)=>`(${t} + ${e})`,"-":(t,e)=>`(${t} - ${e})`,"*":(t,e)=>`(${t} * ${e})`,"/":(t,e)=>`(${t} / ${e})`,"%":(t,e)=>`(${t} %% ${e})`,"==":(t,e)=>`(${t} == ${e})`,"!=":(t,e)=>`(${t} != ${e})`,">":(t,e)=>`(${t} > ${e})`,"<":(t,e)=>`(${t} < ${e})`,"^":(t,e)=>`(${t} ^ ${e})`,invert:t=>`(1 / ${t})`,log:t=>`log(${t})`,exp:t=>`exp(${t})`,pow2:t=>`(${t} ^ 2)`,sqrt:t=>`sqrt(${t})`,abs:t=>`abs(${t})`,bin10:t=>`bin10(${t})`,bin100:t=>`bin100(${t})`,bin1000:t=>`bin1000(${t})`,bin10th:t=>`bin10th(${t})`,bin100th:t=>`bin100th(${t})`,bin1000th:t=>`bin1000th(${t})`,uppercase:t=>`uppercase(${t})`,lowercase:t=>`lowercase(${t})`,length:t=>`length(${t})`,is:(t,e)=>`(${t} is ${e})`,concat_space:(t,e)=>`concat_space(${t}, ${e})`,concat_comma:(t,e)=>`concat_comma(${t}, ${e})`,hour_of_day:t=>`hour_of_day(${t})`,day_of_week:t=>`day_of_week(${t})`,month_of_year:t=>`month_of_year(${t})`,second_bucket:t=>`second_bucket(${t})`,minute_bucket:t=>`minute_bucket(${t})`,hour_bucket:t=>`hour_bucket(${t})`,day_bucket:t=>`day_bucket(${t})`,week_bucket:t=>`week_bucket(${t})`,month_bucket:t=>`month_bucket(${t})`,year_bucket:t=>`year_bucket(${t})`},Hn={FunctionTokenType:Je,OperatorTokenType:He};class Jn{constructor({label:t,value:e,pattern:n,signature:i,help:r,input_types:o,return_type:s,num_params:a,is_column_name:c}={}){this.label=t,this.value=e,this.pattern=n,this.input_types=o,this.return_type=s,this.num_params=a,this.signature=i,this.help=r,this.is_column_name=c||!1}}const Wn=new class{constructor(){this.is_initialized=!1,this._vocabulary={},this._tokens=[Pn,Dn,$e,Ze,Fn,On],this._metadata,this._lexer,this._parser,this._visitor}init(t){if(!this.is_initialized){for(const t of this._tokens)this._vocabulary[t.name]=t;this._metadata=t,this._lexer=this._construct_lexer(),this._parser=this._construct_parser(),this._visitor=this._construct_visitor(),this.is_initialized=!0}}lex(t){this._check_initialized();const e=this._lexer.tokenize(t);return e.tokens=Gn(e.tokens),e}parse(t){this._check_initialized();const e=this.lex(t);if(e.errors.length>0){let t=e.errors[0].message;throw new Error(t)}this._parser.input=e.tokens;const n=this._parser.SuperExpression();if(this._parser.errors.length>0){let t=this._parser.errors[0].message;throw new Error(t)}return this._visitor.visit(n)}get_autocomplete_suggestions(t,e,n,i){this._check_initialized();let r=this._parser.computeContentAssist("SuperExpression",[]);if(!e)return this._apply_suggestion_metadata(r);if(e.errors.length>0){const i=this.extract_partial_function(t),o=this.get_last_token(e),s=o&&(0,Jt.tokenMatcher)(o,Ze);if(i&&-1===i.search(/["']$/)&&!s){const t=this._apply_suggestion_metadata(r.slice(1),n),e=[],o=[];for(const n of t){const t=n.value.toLowerCase().trim(),r=i.toLowerCase().trim();t.startsWith(r)?e.push(n):t.includes(r)&&o.push(n)}return e.concat(o)}return[]}e.tokens=Gn(e.tokens);const o=this._parser.computeContentAssist("SuperExpression",e.tokens);return this._apply_suggestion_metadata(o,n,i)}extract_partial_function(t){this._check_initialized();const e=t.match(/([^(,\s]+$)/);if(e&&e.length>0){const t=e[0];if(!/['"]/.test(t))return e[0]}}get_last_token(t){const e=t.tokens,n=e.length-1;if(n>=0)return e[n]}get_last_token_with_types(t,e,n){const i=e.tokens;(!n||n<=0||n>=i.length)&&(n=i.length);for(let e=i.length-1;e>=i.length-n;e--)for(const n of t)if((0,Jt.tokenMatcher)(i[e],n))return i[e]}_construct_lexer(){const t=["bin1000th","bin1000","bin100th","bin100","bin10th","bin10"];for(const e in this._metadata){const n=this._metadata[e];if(t.includes(n.name))continue;const i=this._make_token(n);this._tokens.push(i),this._vocabulary[i.name]=i}for(const e of t){const t=this._metadata[e],n=this._make_token(t);this._tokens.push(n),this._vocabulary[n.name]=n}return this._tokens.push(ze),this._vocabulary[ze.name]=ze,new Jt.Lexer(this._tokens,{errorMessageProvider:Ge})}_make_token(t){const e=new RegExp(t.pattern),n=(0,Jt.createToken)({name:t.name,label:t.label,pattern:e,categories:[Hn[t.category]]});return"float"===t.input_type?n.input_types=["float","integer"]:"datetime"===t.input_type?n.input_types=["datetime","date"]:n.input_types=[t.input_type],n.return_type=t.return_type,n.num_params=t.num_params,n.signature=t.signature,n.help=t.help,n}_construct_parser(){return new Vn(this._vocabulary)}_construct_visitor(){const t=this._parser.getBaseCstVisitorConstructor();return new class extends t{constructor(){super(),this.validateVisitor()}SuperExpression(t){let e=[];if(this.visit(t.Expression,e),0===e.length)throw new Error("Expression did not generate any computed columns");return e}Expression(t,e){return this.visit(t.OperatorComputedColumn,e)}_VisitOperatorComputedColumn(t,e,n){let i,r=this.visit(t.left,e);if(t.right){let o;t.right.forEach(((i,s)=>{let a=n(t,s);if(!a)return;let c=this.visit(i,e);const l=o||r;let u;t.as&&s<t.as.length&&(u=this.visit(t.as[s]));const p=u||jn[a](l,c);e.push({column:p,computed_function_name:a,inputs:[l,c]}),o=p})),i=o}else i=r;return i}OperatorComputedColumn(t,e){return this._VisitOperatorComputedColumn(t,e,((t,e)=>this.visit(t.Operator[e])))}AdditionOperatorComputedColumn(t,e){return this._VisitOperatorComputedColumn(t,e,((t,e)=>this.visit(t.AdditionOperator[e])))}MultiplicationOperatorComputedColumn(t,e){return this._VisitOperatorComputedColumn(t,e,((t,e)=>this.visit(t.MultiplicationOperator[e])))}ExponentOperatorComputedColumn(t,e){return this._VisitOperatorComputedColumn(t,e,((t,e)=>this.visit(t.ExponentOperator[e])))}FunctionComputedColumn(t,e){const n=this.visit(t.Function);let i=[];for(const n of t.param)i.push(this.visit(n,e));const r=this.visit(t.as)||jn[n](...i),o={column:r,computed_function_name:n,inputs:i};return e.push(o),r}ColumnName(t,e){return t.ParentheticalExpression?this.visit(t.ParentheticalExpression,e):t.FunctionComputedColumn?this.visit(t.FunctionComputedColumn,e):t.columnName[0].payload}TerminalColumnName(t){return t.columnName[0].payload}AdditionOperator(t){return t.add?t.add[0].image:t.subtract?t.subtract[0].image:void 0}MultiplicationOperator(t){return t.multiply?t.multiply[0].image:t.divide?t.divide[0].image:void 0}ExponentOperator(t){if(t.pow)return t.pow[0].image}Operator(t){return t.percent_of?t.percent_of[0].image:t.equals?t.equals[0].image:t.not_equals?t.not_equals[0].image:t.greater_than?t.greater_than[0].image:t.less_than?t.less_than[0].image:t.is?t.is[0].image:void 0}Function(t){return t.sqrt?t.sqrt[0].image:t.pow2?t.pow2[0].image:t.abs?t.abs[0].image:t.invert?t.invert[0].image:t.log?t.log[0].image:t.exp?t.exp[0].image:t.length?t.length[0].image:t.uppercase?t.uppercase[0].image:t.lowercase?t.lowercase[0].image:t.concat_comma?t.concat_comma[0].image:t.concat_space?t.concat_space[0].image:t.bin10?t.bin10[0].image:t.bin100?t.bin100[0].image:t.bin1000?t.bin1000[0].image:t.bin10th?t.bin10th[0].image:t.bin100th?t.bin100th[0].image:t.bin1000th?t.bin1000th[0].image:t.hour_of_day?t.hour_of_day[0].image:t.day_of_week?t.day_of_week[0].image:t.month_of_year?t.month_of_year[0].image:t.second_bucket?t.second_bucket[0].image:t.minute_bucket?t.minute_bucket[0].image:t.hour_bucket?t.hour_bucket[0].image:t.day_bucket?t.day_bucket[0].image:t.week_bucket?t.week_bucket[0].image:t.month_bucket?t.month_bucket[0].image:t.year_bucket?t.year_bucket[0].image:void 0}As(t){return t.TerminalColumnName[0].children.columnName[0].payload}ParentheticalExpression(t,e){return this.visit(t.Expression,e)}}}_apply_suggestion_metadata(t,e,n){this._check_initialized(),n=n||!1;const i=[];for(const r of t){const t=r.nextTokenType;if(!t||!t.PATTERN.source)continue;let o=t.LABEL,s=t.PATTERN.source.replace(/\\/g,""),a=s;(0,Jt.tokenMatcher)(t,Je)?a=`${a}(`:(0,Jt.tokenMatcher)(t,He)?a=`${a} `:(0,Jt.tokenMatcher)(t,$e)&&(a="AS ",o="AS",t.signature="x + y AS new column",t.help="Creates a custom name for the computed column.");const c=new Jn({label:o,value:a,pattern:s,signature:t.signature,help:t.help,input_types:t.input_types,return_type:t.return_type,num_params:t.num_params});if(e&&c.input_types){for(const t of e)if(c.input_types.includes(t)&&(!n||c.input_types.includes(c.return_type))){i.push(c);break}}else i.push(c)}return i}_check_initialized(){if(!1===this.is_initialized)throw new Error("PerspectiveComputedExpressionParser is not initialized!")}};var zn;function Xn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function Zn(t){if(0==this._active_columns.children.length)return 0;{let n=!1;for(let i in this._active_columns.children){var e;let r=this._active_columns.children[i];if(n=n||(null==r||null===(e=r.classList)||void 0===e?void 0:e.contains("null-column")),r.offsetTop+r.offsetHeight>t.offsetY+this._active_columns.scrollTop)return parseInt(i)}let i=this._active_columns.children.length;return n&&i--,i}}function $n(t){let e=t.target.getRootNode().host,n=e;n="PERSPECTIVE-VIEWER"===n.tagName?t.target.parentElement:e.parentElement;let i=Array.prototype.slice.call(n.children).indexOf("PERSPECTIVE-ROW"===e.tagName?e:t.target),r=n.getAttribute("for");if(this.hasAttribute(r)){let t=JSON.parse(this.getAttribute(r));t.splice(i,1),0===t.length?this.removeAttribute(r):this.setAttribute(r,JSON.stringify(t))}}function Kn(t){t.preventDefault(),t.currentTarget.classList.remove("dropping"),si=new WeakMap,this._drop_target_hover&&this._drop_target_hover.removeAttribute("drop-target");let e=t.dataTransfer.getData("text");if(!e)return;e=JSON.parse(e);let n=t.currentTarget.querySelector("ul").getAttribute("for")||t.currentTarget.getAttribute("id").replace("_","-"),i=JSON.parse(this.getAttribute(n)||"[]"),r=i.indexOf(e[0]);-1!==r&&i.splice(r,1);const o=n.indexOf("filter")>-1;if(o?this.setAttribute(n,JSON.stringify(i.concat([e]))):n.indexOf("sort")>-1?this.setAttribute(n,JSON.stringify(i.concat([[e[0]]]))):this.setAttribute(n,JSON.stringify(i.concat([e[0]]))),"pivots"===this._plugin.deselectMode&&this._get_visible_column_count()>1&&"sort"!==n&&!o){for(let t of this.shadowRoot.querySelectorAll("#active_columns perspective-row"))if(t.getAttribute("name")===e[0]){this._active_columns.removeChild(t);break}this._update_column_view()}this._debounce_update()}function Yn(t){let e=t.target.parentElement.parentElement;Array.prototype.slice(this._active_columns.children).indexOf(e)>-1&&this._get_visible_column_count()>1&&"move"!==t.dataTransfer.dropEffect&&(this._active_columns.removeChild(e),this._update_column_view()),this._active_columns.classList.remove("dropping")}function qn(t){let e=t.relatedTarget;for(;e&&e!==this._active_columns;)e=e.parentElement;null===e&&(this._active_columns.classList.remove("dropping"),this._drop_target_null&&(this._active_columns.replaceChild(this._drop_target_null,this._drop_target_hover),delete this._drop_target_null),this._drop_target_hover.parentElement===this._active_columns&&this._active_columns.removeChild(this._drop_target_hover),-1!==this._original_index&&this._active_columns.insertBefore(this._drop_target_hover,this._active_columns.children[this._original_index]),this._drop_target_hover.removeAttribute("drop-target"))}function ti(){this._drop_target_null&&(this._drop_target_null.parentElement===this._active_columns?Le(this._active_columns,this._drop_target_hover,this._drop_target_null):this._active_columns.replaceChild(this._drop_target_null,this._drop_target_hover),delete this._drop_target_null)}function ei(t){ti.call(this),this._active_columns.children[t]&&this._drop_target_hover!==this._active_columns.children[t]&&(this._drop_target_null=this._active_columns.children[t],Le(this._active_columns,this._active_columns.children[t],this._drop_target_hover))}function ni(t){ti.call(this),this._active_columns.children[t]&&(this._drop_target_null=this._active_columns.children[t],this._active_columns.replaceChild(this._drop_target_hover,this._active_columns.children[t]))}function ii(t){var e,n,i,r,o,s,a,c;t.preventDefault(),t.dataTransfer.dropEffect="move",this._drop_target_hover.hasAttribute("drop-target")||this._drop_target_hover.toggleAttribute("drop-target",!0);let l=Zn.call(this,t);const u=Array.prototype.slice.call(this._active_columns.children).indexOf(this._drop_target_hover),p=this._active_columns.children[l],d=l<(null===(e=this._plugin.initial)||void 0===e||null===(n=e.names)||void 0===n?void 0:n.length)-1,h=this._drop_target_hover!==this._active_columns.children[l],_=-1!==this._original_index,f=_&&this._original_index<(null===(i=this._plugin.initial)||void 0===i||null===(r=i.names)||void 0===r?void 0:r.length)-1,m=_&&this._original_index>=(null===(o=this._plugin.initial)||void 0===o||null===(s=o.names)||void 0===s?void 0:s.length)-1,g=_&&this._original_index<(null===(a=this._plugin.initial)||void 0===a?void 0:a.count),v=!(l<(null===(c=this._plugin.initial)||void 0===c?void 0:c.count))&&(null==p?void 0:p.classList.contains("null-column"));if(g&&v)ti.call(this);else if(d&&m&&h){var E,b,y,x,w;ti.call(this),this._original_index===(null===(E=this._plugin.initial)||void 0===E||null===(b=E.names)||void 0===b?void 0:b.length)-1&&this._drop_target_hover===this._active_columns.children[this._original_index]&&this._active_columns.children.length===(null===(y=this._plugin.initial)||void 0===y||null===(x=y.names)||void 0===x?void 0:x.length)?(this._drop_target_null=this._active_columns.children[l],Le(this._active_columns,this._active_columns.children[l],this._drop_target_hover)):null!==(w=this._active_columns.children[l])&&void 0!==w&&w.classList.contains("null-column")?this._drop_target_hover!==this._active_columns.children[l]&&(this._drop_target_null=this._active_columns.children[l],this._active_columns.replaceChild(this._drop_target_hover,this._active_columns.children[l])):(this._drop_target_null=this._active_columns.children[l],this._active_columns.replaceChild(this._drop_target_hover,this._active_columns.children[l]),this._active_columns.insertBefore(this._drop_target_null,this._active_columns.children[this._original_index]))}else d&&_&&h?ei.call(this,l):d&&!_&&h?ni.call(this,l):!d&&f&&h||v&&_?ei.call(this,l):v&&!_?ni.call(this,l):u<l?l+1<this._active_columns.children.length?this._active_columns.children[l+1].hasAttribute("drop-target")||(ti.call(this),this._active_columns.insertBefore(this._drop_target_hover,this._active_columns.children[l+1])):this._active_columns.children[this._active_columns.children.length-1].hasAttribute("drop-target")||(ti.call(this),this._active_columns.appendChild(this._drop_target_hover)):l<this._active_columns.children.length?this._active_columns.children[l].hasAttribute("drop-target")||(ti.call(this),this._active_columns.insertBefore(this._drop_target_hover,this._active_columns.children[l])):this._active_columns.children[this._active_columns.children.length-1].hasAttribute("drop-target")||(ti.call(this),this._active_columns.appendChild(this._drop_target_hover))}function ri(t){t.preventDefault(),delete this._drop_target_null,t.currentTarget.classList.remove("dropping"),si=new WeakMap,this._drop_target_hover.parentElement===this._active_columns&&this._drop_target_hover.removeAttribute("drop-target"),t.dataTransfer.getData("text")&&this._update_column_view()}function oi(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="move"}Object.setPrototypeOf(Xn.prototype,HTMLElement.prototype),Object.setPrototypeOf(Xn,HTMLElement),we('\x3c!--\n\nCopyright (c) 2017, the Perspective Authors.\n\nThis file is part of the Perspective library, distributed under the terms of\nthe Apache License 2.0.  The full license can be found in the LICENSE file.\n\n--\x3e\n\n<template id="perspective-computed-expression-widget">\n    <div class="psp-computed-expression-widget__body psp-computed-expression-widget__container">\n        <div class="psp-computed-expression-widget__container">\n            <div class="psp-computed-expression-widget__action">\n                <span class="psp-icon psp-icon__close" id="psp-computed-expression-widget-close" aria-label="Close Computed Expression Widget"></span>\n                <span id="psp-computed-expression-widget-title">New Column</span>\n            </div>\n            <div class="psp-computed-expression-widget__content psp-computed-expression-widget__content--nomargin">\n                <perspective-expression-editor aria-autocomplete="list" aria-label="Type a computed expression here" aria-placeholder="Type a computed expression" aria-haspopup="true"></perspective-expression-editor>\n                <perspective-autocomplete-widget id="psp-computed-expression-widget-autocomplete"></perspective-autocomplete-widget>\n                <div class="psp-computed-expression-widget__label psp-computed-expression-widget__error" id="psp-computed-expression-widget-error"></div>\n            </div>\n        </div>\n        <div id="psp-computed-expression-widget-actions">\n            <button id="psp-computed-expression-widget-button-save" class="psp-computed-expression-widget__button" disabled>Save</button>\n        </div>\n    </div>\n</template>',':host{display:none;flex-direction:column;margin-top:12px;width:100%;flex:0 0 auto!important}:host *{box-sizing:border-box}:host .psp-computed-expression-widget__body{margin-bottom:0}:host .psp-computed-expression-widget__container{display:flex;flex-direction:column}:host .psp-computed-expression-widget__container.row{align-items:center;flex-direction:row}:host .psp-computed-expression-widget__container:first-of-type{margin-bottom:0}:host .psp-computed-expression-widget__action{margin-bottom:10px}:host .psp-computed-expression-widget__action span#psp-computed-expression-widget-close{color:#999;display:flex;font-family:var(--column-close--font-family,inherit);font-size:16px;width:20px;min-width:20px;margin-top:-2px;height:0}:host .psp-computed-expression-widget__action span#psp-computed-expression-widget-close:before{font-feature-settings:"liga";content:var(--column-close--before,"x")}:host .psp-computed-expression-widget__action span#psp-computed-expression-widget-close:hover{cursor:pointer}:host .psp-computed-expression-widget__action span#psp-computed-expression-widget-title{font-weight:300;display:flex;margin-left:24px;margin-top:3px;font-size:12px;color:var(--color,#666)}:host .psp-computed-expression-widget__content{align-items:center;display:flex;flex-direction:column;margin-top:5px}:host .psp-computed-expression-widget__content.psp-computed-expression-widget__content--absolute{position:absolute}:host .psp-computed-expression-widget__content.psp-computed-expression-widget__content--nomargin{margin-top:0;position:relative}:host #psp-computed-expression-widget-actions{display:flex;justify-content:flex-end;margin-left:20px;margin-top:12px}:host .psp-computed-expression-widget__label{color:var(--color,darkgray);font-size:10px;margin-top:5px;max-width:100%}:host .psp-computed-expression-widget__label.psp-computed-expression-widget__error{background-color:#cb4549;box-sizing:border-box;color:#fff!important;display:none;position:absolute;z-index:10000;max-height:75px;padding:10px;overflow-x:hidden;overflow-y:scroll;top:100%;width:100%;word-break:break-word}:host .psp-computed-expression-widget__button{border-radius:0;border-bottom:1px solid #ccc;border-left:0;border-right:0;border-top:0;font-size:12px;margin-left:6px;padding:2px 5px}:host .psp-computed-expression-widget__button:hover{cursor:pointer}:host .psp-computed-expression-widget__button[disabled]{background:#666!important;color:#a0a0a0!important;cursor:not-allowed;border-bottom-color:#000!important;opacity:0.5}:host .psp-computed-expression-widget__button#psp-computed-expression-widget-button-remove{background:#e76056;border-bottom-color:#bf4d45;color:#fff;display:none}:host .psp-computed-expression-widget__button#psp-computed-expression-widget-button-remove:active{background:#bf4d45;border-bottom-color:#9d3f39}:host .psp-computed-expression-widget__button#psp-computed-expression-widget-button-save{background:#0171d2;border-bottom-color:#0160b1;color:#fff;height:22px}:host .psp-computed-expression-widget__button#psp-computed-expression-widget-button-save:active{background:#0160b1;border-bottom-color:#014986}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9sZXNzL2NvbXB1dGVkX2V4cHJlc3Npb25fd2lkZ2V0Lmxlc3MiLCJjb21wdXRlZF9leHByZXNzaW9uX3dpZGdldC5sZXNzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVdBLE1BQ0ksWUFBQSxDQUNBLHFCQUFBLENBQ0EsZUFBQSxDQUNBLFVBQUEsQ0FFQSx1QkNLSixDRFhBLFFBU1EscUJDS1IsQ0RkQSw0Q0FhUSxlQ0lSLENEakJBLGlEQWlCUSxZQUFBLENBQ0EscUJDR1IsQ0REUSxxREFDSSxrQkFBQSxDQUNBLGtCQ0daLENEQVEsK0RBQ0ksZUNFWixDRDVCQSw4Q0ErQlEsa0JDQVIsQ0QvQkEsd0ZBa0NZLFVBQUEsQ0FDQSxZQUFBLENBQ0Esb0RBQUEsQ0FDQSxjQUFBLENBQ0EsVUFBQSxDQUNBLGNBQUEsQ0FDQSxlQUFBLENBQ0EsUUNBWixDREVZLCtGQUNJLDRCQUFBLENBQ0EsdUNDQWhCLENER1ksOEZBQ0ksY0NEaEIsQ0RoREEsd0ZBd0RZLGVBQUEsQ0FDQSxZQUFBLENBQ0EsZ0JBQUEsQ0FDQSxjQUFBLENBQ0EsY0FBQSxDQUNBLHVCQ0xaLENEeERBLCtDQWtFUSxrQkFBQSxDQUNBLFlBQUEsQ0FDQSxxQkFBQSxDQUNBLGNDUFIsQ0RTUSxpR0FDSSxpQkNQWixDRFVRLGlHQUNJLFlBQUEsQ0FDQSxpQkNSWixDRHJFQSw4Q0FrRlEsWUFBQSxDQUNBLHdCQUFBLENBQ0EsZ0JBQUEsQ0FDQSxlQ1ZSLENEM0VBLDZDQXlGUSwyQkFBQSxDQUNBLGNBQUEsQ0FDQSxjQUFBLENBQ0EsY0NYUixDRGFRLG1GQUNJLHdCQUFBLENBQ0EscUJBQUEsQ0FDQSxvQkFBQSxDQUNBLFlBQUEsQ0FDQSxpQkFBQSxDQUNBLGFBQUEsQ0FDQSxlQUFBLENBQ0EsWUFBQSxDQUNBLGlCQUFBLENBQ0EsaUJBQUEsQ0FDQSxRQUFBLENBQ0EsVUFBQSxDQUNBLHFCQ1haLENEaEdBLDhDQWdIUSxlQUFBLENBQ0EsNEJBQUEsQ0FDQSxhQUFBLENBQ0EsY0FBQSxDQUNBLFlBQUEsQ0FDQSxjQUFBLENBQ0EsZUFBQSxDQUNBLGVDYlIsQ0RlUSxvREFDSSxjQ2JaLENEZ0JRLHdEQUNJLHlCQUFBLENBQ0EsdUJBQUEsQ0FDQSxrQkFBQSxDQUNBLGtDQUFBLENBQ0EsV0NkWixDRGlCUSwyRkFDSSxrQkFBQSxDQUNBLDJCQUFBLENBQ0EsVUFBQSxDQUNBLFlDZlosQ0RpQlksa0dBQ0ksa0JBQUEsQ0FDQSwyQkNmaEIsQ0RtQlEseUZBQ0ksa0JBQUEsQ0FDQSwyQkFBQSxDQUNBLFVBQUEsQ0FDQSxXQ2pCWixDRG1CWSxnR0FDSSxrQkFBQSxDQUNBLDJCQ2pCaEIiLCJmaWxlIjoiY29tcHV0ZWRfZXhwcmVzc2lvbl93aWRnZXQubGVzcyJ9 */')((Xt((zn=class extends Xn{constructor(){super(),this._parsed_expression=void 0,this.expressions=[],this._valid=!1}connectedCallback(){this._register_ids(),this._register_callbacks(),this._expression_editor.set_renderer(this.render_expression.bind(this)),this._editor_observer=new MutationObserver(this._resize_editor.bind(this)),this._autocomplete.reposition=this._position_autocomplete.bind(this)}_observe_editor(){this._editor_observer.observe(this._expression_editor,{attributes:!0,attributeFilter:["style"]}),this._expression_editor.focus()}_resize_editor(){const t=new CustomEvent("perspective-computed-expression-resize");this.dispatchEvent(t),this._editor_observer.disconnect()}_get_type(t){throw new Error(`Cannot get column type for "${t}".`)}_make_column_name_suggestions(t){return t.map((t=>new Jn({label:t,value:`"${t}"`,is_column_name:!0})))}render_expression(t){const e=this._computed_expression_parser._lexer.tokenize(t);let n=[],i={};for(const t of e.tokens)i[t.startOffset]=t,n.push(t.startOffset);for(const t of e.errors)i[t.offset]=t,n.push(t.offset);n=n.sort(((t,e)=>t-e));const r=[],o=this._get_view_all_column_names();let s;for(const e of n){const n=i[e];let a="",c="fragment";if(n.message)a=t.slice(n.offset,n.offset+n.length),c="errored";else{if(a=n.image,(0,Jt.tokenMatcher)(n,Je))c="function";else if((0,Jt.tokenMatcher)(n,He))c="operator";else if((0,Jt.tokenMatcher)(n,Ze)){const t=n.payload,e=o.includes(t);c=`column_name ${e?this._get_type(t):""}`,(!e&&!s||!e&&s&&!(0,Jt.tokenMatcher)(s,$e))&&(c="errored")}(0,Jt.tokenMatcher)(n,Pn)||(s=n)}r.push(`<span class="psp-expression__${c}">${a}</span>`)}return r.join("")}make_autocomplete_markup(t){return t.map((t=>t.label?Nt`
                      <div
                          role="listitem"
                          title=${t.help?t.help:""}
                          class="psp-autocomplete__item"
                          data-label=${t.label}
                          data-value=${t.value}
                          data-signature=${t.signature?t.signature:""}
                          data-help=${t.help?t.help:""}
                          aria-selected="false"
                      >
                          <span
                              class="psp-autocomplete-item__label ${t.is_column_name?`psp-autocomplete-item__label--column-name ${this._get_type(t.label)}`:""}"
                              data-value=${t.value}
                          >
                              ${t.pattern?t.pattern:t.label}
                          </span>
                      </div>
                  `:""))}async _validate_expression(t){this._autocomplete.clear();const e=t.detail.text;if(0===e.length)return void this._clear_error();try{this._parsed_expression=this._computed_expression_parser.parse(e)}catch(t){this._clear_error(),this._disable_save_button();const n=this._computed_expression_parser.lex(e),i=e.match(/(["'])[\s\w()]*?$/),r=i&&i.length>0&&!/['"]\s/.test(i[0]),o=this._computed_expression_parser.get_last_token(n);let s=r;if(o){const t=(0,Jt.tokenMatcher)(o,Ze),e=(0,Jt.tokenMatcher)(o,On),n=(0,Jt.tokenMatcher)(o,$e);s=(0,Jt.tokenMatcher)(o,He)||s&&!t&&!e&&!n}let a,c,l=[];const u=this._computed_expression_parser.get_last_token_with_types([Je,He],n);if(u?(a=u.tokenType.input_types,c=!0):o&&(0,Jt.tokenMatcher)(o,Ze)&&(a=[this._get_type(o.payload)],c=!1),l=this._computed_expression_parser.get_autocomplete_suggestions(e,n,a,c),s){let t;t=u?this._get_view_column_names_by_types(a):this._get_view_all_column_names();let e=this._make_column_name_suggestions(t);if(r){const t=i[0].substring(1),n=[],r=[];for(const i of e){const e=i.label.toLowerCase(),o=t.toLowerCase();e.startsWith(o)?n.push(i):e.includes(o)&&r.push(i)}e=n.concat(r)}l=u?l.concat(e):e;const n=this.make_autocomplete_markup(l);return void this._autocomplete.render(n)}if(l.length>0){const t=this.make_autocomplete_markup(l);return void this._autocomplete.render(t)}if(o&&(0,Jt.tokenMatcher)(o,$e))return;{const e=t.message?t.message:JSON.stringify(t);return void this._set_error(e,this._error)}}const n=new CustomEvent("perspective-computed-expression-type-check",{detail:{parsed_expression:this._parsed_expression}});this.dispatchEvent(n)}async _type_check_expression(t,e){const n=this._parsed_expression||[],i=[];for(const e of n)t[e.column]||i.push(e.column);if(i.length>0){let t="TypeError:\n";for(const n of i)t+=`- \`${n}\` expected input column types ${e[n].join("/")}\n`;this._set_error(t,this._error)}else this._clear_error(),this._enable_save_button()}_save_expression(){if(!this._valid||this._save_button.getAttribute("disabled"))return;const t=this._expression_editor.get_text(),e=this._parsed_expression||[],n=new CustomEvent("perspective-computed-expression-save",{detail:{expression:t,parsed_expression:e}});this.dispatchEvent(n),this.expressions.push(t)}_position_autocomplete(){const t=this._expression_editor,e=this._expression_editor._edit_area.lastChild;if(250===t.offsetWidth)return this._autocomplete._container.removeAttribute("style"),this._autocomplete._container.classList.remove("undocked"),void this._autocomplete._container.classList.add("docked");this._autocomplete._container.classList.remove("docked"),this._autocomplete._container.classList.add("undocked");const n=e.offsetLeft,i=e.offsetWidth,r=e.offsetTop,o=n+i>0?n+i:0,s=r+20>20?r+20:20;this._autocomplete._container.style.left=`${o}px`,this._autocomplete._container.style.top=`${s}px`}_autocomplete_replace(t){const e=this._expression_editor.get_text(),n=this._computed_expression_parser.extract_partial_function(e);if("("===t)this._expression_editor._edit_area.innerText+=t;else if(n&&'"'!==n){const i=e.substring(0,e.length-n.length)+t;this._expression_editor._edit_area.innerText=i}else{const n=e.substring(e.lastIndexOf(" ")).trim(),i=/["'].*[^'"]/.test(n)||'"'===n||"'"===n,r=Xe.test(t);if(i&&r){let i=e.lastIndexOf(n),r=e.substring(0,i);const o=/\(['"]\w+$/.exec(n);o&&o[0]&&(0===i||"("===n[0])&&(r+=n.substring(0,o.index+1)),r+=t,this._expression_editor._edit_area.innerText=r}else{if(!i&&('"'===n[n.length-1]||"'"===n[n.length-1])){const t=this._expression_editor._edit_area.innerText.substring(0,this._expression_editor._edit_area.innerText.length-1);this._expression_editor._edit_area.innerText=t}this._expression_editor._edit_area.innerText+=t}}this._expression_editor._reset_selection(),this._expression_editor.update_content(),this._autocomplete.clear()}_autocomplete_item_clicked(t){this._autocomplete_replace(t.detail.target.getAttribute("data-value"))}_clear_expression_editor(){this._expression_editor.clear_content()}_close_expression_widget(){this.style.display="none",this._side_panel_actions.style.display="flex",this._clear_error(),this._disable_save_button(),this._clear_expression_editor(),this._autocomplete.clear(),this._editor_observer.disconnect()}_set_error(t,e){e&&(e.innerText=t,e.style.display="block",this._disable_save_button())}_clear_error(){this._error.innerText="",this._error.style.display="none"}_disable_save_button(){this._save_button.setAttribute("disabled",!0),this._valid=!1}_enable_save_button(){this._save_button.removeAttribute("disabled"),this._valid=!0}_editor_keydown(t){switch(t.detail.key){case"Enter":if(t.detail.preventDefault(),t.detail.stopPropagation(),!0===this._autocomplete.displayed){const t=this._autocomplete.get_selected_value();t&&this._autocomplete_replace(t)}else this._save_expression();break;case"Tab":case"ArrowDown":t.detail.preventDefault(),t.detail.stopPropagation(),!0===this._autocomplete.displayed&&this._autocomplete._next();break;case"ArrowUp":t.detail.preventDefault(),t.detail.stopPropagation(),!0===this._autocomplete.displayed&&this._autocomplete._prev();break;case"z":!0!==t.detail.metaKey&&!0!==t.detail.ctrlKey||(t.detail.preventDefault(),t.detail.stopPropagation())}}_register_ids(){this._side_panel_actions=this.parentElement.querySelector("#side_panel__actions"),this._close_button=this.shadowRoot.querySelector("#psp-computed-expression-widget-close"),this._expression_editor=this.shadowRoot.querySelector("perspective-expression-editor"),this._error=this.shadowRoot.querySelector("#psp-computed-expression-widget-error"),this._save_button=this.shadowRoot.querySelector("#psp-computed-expression-widget-button-save"),this._autocomplete=this.shadowRoot.querySelector("#psp-computed-expression-widget-autocomplete")}_register_callbacks(){this._close_button.addEventListener("click",this._close_expression_widget.bind(this)),this._expression_editor.addEventListener("perspective-expression-editor-rendered",this._validate_expression.bind(this)),this._expression_editor.addEventListener("perspective-expression-editor-keydown",this._editor_keydown.bind(this)),this._save_button.addEventListener("click",this._save_expression.bind(this)),this._autocomplete.addEventListener("perspective-autocomplete-item-clicked",this._autocomplete_item_clicked.bind(this))}}).prototype,"_validate_expression",[Se],Object.getOwnPropertyDescriptor(zn.prototype,"_validate_expression"),zn.prototype),Xt(zn.prototype,"_type_check_expression",[Se],Object.getOwnPropertyDescriptor(zn.prototype,"_type_check_expression"),zn.prototype),zn));let si=new WeakMap;function ai(t){let e=si.get(t.currentTarget)||0;"dragenter"===t.type?e++:e--,si.set(t.currentTarget,e),t.currentTarget.classList.toggle("dropping",e>0),t.preventDefault()}const ci=ai,li=ai;class ui{constructor(t,e=!1){this._on_cancel=t,this._cancelled=!1,this.initial=e}cancel(){!this._cancelled&&this._on_cancel&&(this._on_cancel(),this._on_cancel=void 0),this._cancelled=!0}get cancelled(){return this._cancelled}}function pi(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(pi.prototype,HTMLElement.prototype),Object.setPrototypeOf(pi,HTMLElement);class di extends pi{get _plugin(){let t=ke.getInstance(),e=this.getAttribute("plugin");return e||(e=Object.keys(t)[0],this.setAttribute("plugin",e)),t[e]||t[Object.keys(t)[0]]}_get_view_dom_columns(t,e){t=t||"#active_columns perspective-row";let n=Array.prototype.slice.call(this.shadowRoot.querySelectorAll(t));return e?n.map(e).filter((t=>t)):n}_get_view_all_columns(){return Array.prototype.slice.call(this.shadowRoot.querySelectorAll("#inactive_columns perspective-row"))}_get_view_active_columns(){return Array.prototype.slice.call(this.shadowRoot.querySelectorAll("#active_columns perspective-row"))}_get_view_active_valid_columns(){return Array.prototype.slice.call(this.shadowRoot.querySelectorAll("#active_columns perspective-row")).filter((t=>!t.classList.contains("null-column")))}_get_view_inactive_columns(){return Array.prototype.slice.call(this.shadowRoot.querySelectorAll("#inactive_columns perspective-row"))}_get_view_all_column_names(){return this._get_view_all_columns().map((t=>t.getAttribute("name")))}_get_view_active_column_names(){return this._get_view_active_columns().map((t=>t.getAttribute("name")))}_get_view_all_valid_column_names(){return this._get_view_all_column_names().filter((t=>t))}_get_view_active_valid_column_names(){return this._get_view_active_column_names().filter((t=>t))}_get_view_active_valid_column_count(){return this._get_view_active_valid_column_names().length}_get_view_column_names_by_types(t){const e=[],n=this._get_view_all_columns();for(const i of n)t.includes(i.getAttribute("type"))&&e.push(i.getAttribute("name"));return e}_get_view_columns({active:t=!0}={}){let e;return e=t?"#active_columns perspective-row":"#inactive_columns perspective-row",this._get_view_dom_columns(e,(t=>t.getAttribute("name")))}_get_view_aggregates(t){return t=t||"#active_columns perspective-row",this._get_view_dom_columns(t,(t=>{let e=t.getAttribute("aggregate");if("["===e[0])try{e=JSON.parse(e)}catch(t){console.error(t)}const n=t.getAttribute("name");return n&&{op:e,column:n}}))}_get_view_row_pivots(){return this._get_view_dom_columns("#row_pivots perspective-row",(t=>t.getAttribute("name")))}_get_view_column_pivots(){return this._get_view_dom_columns("#column_pivots perspective-row",(t=>t.getAttribute("name")))}_get_view_filter_nodes(){return this._get_view_dom_columns("#filters perspective-row")}_get_view_filters(){return this._get_view_dom_columns("#filters perspective-row",(t=>{let{operator:e,operand:n}=JSON.parse(t.getAttribute("filter"));return[t.getAttribute("name"),e,n]}))}_get_view_sorts(){return this._get_view_dom_columns("#sort perspective-row",(t=>{let e=t.getAttribute("sort-order")||"asc";return[t.getAttribute("name"),e]}))}_get_view_computed_columns(){return JSON.parse(this.getAttribute("computed-columns"))||[]}_get_view_parsed_computed_columns(){return JSON.parse(this.getAttribute("parsed-computed-columns"))||[]}_get_visible_column_count(){return this._get_view_active_columns().length}get_aggregate_attribute(){const t=JSON.parse(this.getAttribute("aggregates"))||{},e=new Set,n=Object.keys(t).map((n=>(e.add(n),{column:n,op:t[n]})));if(this._aggregate_defaults)for(const t of Object.keys(this._aggregate_defaults))e.has(t)||n.push({column:t,op:this._aggregate_defaults[t]});return n}}function hi(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}let _i={integer:2,string:0,float:3,boolean:4,datetime:1,date:1};const fi=t=>{if(t){const e=hi(t[0]),n=hi(t[1]),i=Math.floor(t[0]/t[1]*100);return Nt`
            <span title="${e} / ${n}" class="plugin_information--overflow-hint">&nbsp;<span class="plugin_information--overflow-hint-percent">${i}%</span>&nbsp;</span>
        `}},mi=t=>{if(""!==t)return Nt`
            <span style="white-space:nowrap">${t}</span>
        `},gi=(t,...e)=>t.flatMap(((t,n)=>[mi(t),fi(e[n])])).filter((t=>t));class vi extends di{_validate_parsed_computed_columns(t,e){if(!t||0===t.length)return[];const n=[];for(const i of t)e[i.column]&&n.push(i);return n}async _load_table(t){this.shadowRoot.querySelector("#app").classList.add("hide_message");const e=this._set_updating();if(this._clear_state(),this._table=t,!this._computed_expression_parser.is_initialized){const e=await t.get_computed_functions();this._computed_expression_parser.init(e)}let[n,i]=await Promise.all([t.columns(),t.schema(!0)]);this._initial_col_order=n.slice();let r=this._get_view_parsed_computed_columns();if(0===r.length){const t=this._get_view_computed_columns();for(const e of t)"string"==typeof e?r=r.concat(this._computed_expression_parser.parse(e)):r.push(e)}const o=await t.computed_schema(r);r=await this._validate_parsed_computed_columns(r,o),this.setAttribute("parsed-computed-columns",JSON.stringify(r));const s=r.map((t=>t.column));n=n.concat(s),this.hasAttribute("columns")||this.setAttribute("columns",JSON.stringify(this._initial_col_order)),n.sort((t=>(e,n)=>{const i=_i[t[e]],r=_i[t[n]];let o=0;return o=i==r?e.toLowerCase()<n.toLowerCase()?-1:1:i<r?-1:1,o})(i));const a=function(t,e,n,i){const r=new Set,o=[];for(const e of t){let t=n[e.column];t||(t=i[e.column]);const s=(0,Ht.get_type_config)(t);r.add(e.column),s.type||t?(""!==e.op&&-1!==Ft[s.type||t].indexOf(e.op)||(e.op=s.aggregate),o.push(e)):console.warn(`No column "${e.column}" found (specified in aggregates attribute).`)}for(const t of e)if(!r.has(t)){let e=n[t];e||(e=i[t.column]),o.push({column:t,op:(0,Ht.get_type_config)(e).aggregate})}return o}(this.get_aggregate_attribute(),n,i,o);let c=JSON.parse(this.getAttribute("columns"));0===c.filter((t=>n.indexOf(t)>-1)).length&&(c=this._initial_col_order),this._aggregate_defaults=function(t,e,n){const i={};for(const r of t){let t=e[r];t||(t=n[r]),i[r]=(0,Ht.get_type_config)(t).aggregate}return i}(n,i,o),this._clear_columns();for(const t of n){let e=a.find((e=>e.column===t)).op;const n=s.includes(t)?t:void 0;let r=i[t];r||(r=o[t]);const l=this._new_row(t,r,e,null,null,n);this._inactive_columns.appendChild(l),c.includes(t)&&l.classList.add("active")}for(;c.length<(null===(l=this._plugin.initial)||void 0===l||null===(u=l.names)||void 0===u?void 0:u.length);){var l,u;c.push(null)}for(const t of c){const e=s.includes(t)?t:void 0;let n=i[name];n||(n=o[name]);const r=this._new_row(t,n,void 0,void 0,void 0,e);this._active_columns.appendChild(r)}n.length===c.filter((t=>n.indexOf(t)>-1)).length?this._columns_container.classList.add("collapse"):this._columns_container.classList.remove("collapse"),this._show_column_container(),!0===await this._table.compute()&&this._show_side_panel_actions(),this.hasAttribute("filters")&&(this.filters=this.getAttribute("filters")),this._edit_port=await t.make_port(),this._edit_port_lock.resolve(this._edit_port);try{await this._debounce_update({force_update:!0})}catch(t){throw console.warn("Initial view failed, resetting UI state"),await this.reset(),t}e()}async get_maxes(){if(void 0!==this._plugin.max_columns&&!1===this._plugin.render_warning)return{max_cols:null,max_rows:null};let t,e;const[n,i]=await Promise.all([this._view.schema(),this._view.num_columns()]),r=Object.keys(n||{}).length||1;if(void 0!==this._plugin.max_columns){const e=this._plugin.max_columns%r,n=this._plugin.max_columns+e;t=n<i?n:void 0}return void 0!==this._plugin.max_cells&&(e=Math.ceil(t?this._plugin.max_cells/t:this._plugin.max_cells/(i||1))),{max_cols:t,max_rows:e}}async _warn_render_size_exceeded(t,e){if(this._show_warnings&&(t||e)){const n=await this._view.num_columns(),i=await this._view.num_rows(),r=n*i,o=t&&t<n,s=e&&e<i;if(o&&s){this._plugin_information.classList.remove("hidden");const i=gi`Rendering ${[t,n]} of columns and ${[n*e,r]} of points.`;return Qt(i,this._plugin_information_message),!0}if(o){this._plugin_information.classList.remove("hidden");const e=gi`Rendering ${[t,n]} of columns.`;return Qt(e,this._plugin_information_message),!0}if(s){this._plugin_information.classList.remove("hidden");const t=gi`Rendering ${[n*e,r]} of points.`;return Qt(t,this._plugin_information_message),!0}this._plugin_information.classList.add("hidden")}return!1}_calculate_throttle_timeout(){let t;const e=this.getAttribute("throttle");if(void 0!==e&&"null"!==e&&this.hasAttribute("throttle")){if(t=parseInt(e),isNaN(t)||t<0)return console.warn(`Bad throttle attribute value "${e}".  Can be (non-negative integer) milliseconds.`),this.removeAttribute("throttle"),0}else{if(!this.__render_times||this.__render_times.length<5)return 0;t=this.__render_times.reduce(((t,e)=>t+e),0)/this.__render_times.length,t=Math.min(5e3,t)}return Math.max(0,t)}_view_on_update(t){this._debounced||(this._debounced=setTimeout((async()=>{this._debounced=void 0;const e=this._render_time();this._task&&!this._task.initial&&this._task.cancel();const n=this._task=new ui,i=this._plugin.update||this._plugin.create;try{if(t){const{max_cols:t,max_rows:e}=await this.get_maxes();n.cancelled||(await this._warn_render_size_exceeded(t,e),await i.call(this,this._datavis,this._view,n,t,e))}else await i.call(this,this._datavis,this._view,n);e(),n.cancel()}finally{this.dispatchEvent(new Event("perspective-view-update"))}}),this._calculate_throttle_timeout()))}async _validate_filters(){const t=[];for(const e of this._get_view_filter_nodes()){const n=e.shadowRoot.getElementById("filter_operand"),i=e.shadowRoot.getElementById("row_exclamation"),{operator:r,operand:o}=JSON.parse(e.getAttribute("filter")),s=[e.getAttribute("name"),r,o];await this._table.is_valid_filter(s)?(t.push(s),e.title="",n.style.borderColor="",i.hidden=!0):(e.title="Invalid Filter",n.style.borderColor="red",i.hidden=!1)}return t}_is_config_changed(t){const e=this.getAttribute("plugin");return!(zt()(t,this._previous_config)&&e===this._previous_plugin_name||(this._previous_config=t,this._previous_plugin_name=e,0))}async _new_view({force_update:t=!1,ignore_size_check:e=!1,limit_points:n=!0}={}){if(!this._table)return;this._check_responsive_layout();const i=this._get_view_row_pivots(),r=this._get_view_column_pivots(),o=await this._validate_filters(),s=this._get_view_aggregates();if(0===s.length)return;const a=this._get_view_sorts();let c=s.map((t=>t.column)),l={};for(const t of s)l[t.column]=t.op;for(const t of a){const e=t[0];if(-1===c.indexOf(e)&&!(r.indexOf(t)>-1||i.indexOf(t)>-1)){const t=this.get_aggregate_attribute(),{column:n,op:i}=t.reduce(((t,n)=>n.column===e?n:t));l[n]=i}}const u={filter:o,row_pivots:i,column_pivots:r,aggregates:l,columns:c,sort:a,computed_columns:this._get_view_parsed_computed_columns()};this._task&&this._task.cancel(),this._view&&(this._view.remove_update(this._view_updater),this._vieux.delete_view(),this._view.delete());try{const t=await this._table.view(u);this._view=t,this._view_updater=()=>this._view_on_update(n),this._view.on_update(this._view_updater)}catch(t){throw t}this._vieux.set_view(this._view);const p=this._render_time();this._render_count=(this._render_count||0)+1;const d=this._task=new ui((()=>this._render_count--),!0);try{const{max_cols:i,max_rows:r}=await this.get_maxes();if(d.cancelled)return;e||await this._warn_render_size_exceeded(i,r),n?await this._plugin.create.call(this,this._datavis,this._view,d,i,r,t):await this._plugin.create.call(this,this._datavis,this._view,d,void 0,void 0,t)}catch(t){console.warn(t)}finally{this.__render_times||(this.__render_times=[],this.dispatchEvent(new Event("perspective-view-update"))),p(),d.cancel(),0===this._render_count&&(this.removeAttribute("updating"),this.dispatchEvent(new Event("perspective-update-complete")))}}_check_loaded_table(){if(this._table){const t=this._table;delete this._table,this._load_table(t)}}_render_time(){const t=performance.now();return()=>{this.__render_times.unshift(performance.now()-t),this.__render_times=this.__render_times.slice(0,5)}}_restyle_plugin(){if(this._plugin.styleElement){const t=this._task=new ui;this._plugin.styleElement.call(this,this._datavis,this._view,t)}}_clear_state(){this._task&&this._task.cancel();const t=[];if(this._view){const e=this._view;this._view=void 0,t.push(e.delete()),e.remove_update(this._view_updater),e.remove_delete()}return Promise.all(t)}_set_updating(){let t;return this.toggleAttribute("updating",!0),this._updating_promise=new Promise((e=>{t=e})),t}_register_debounce_instance(){const t=Lt()(((t,e,n,i)=>{this._new_view({ignore_size_check:e,force_update:n,limit_points:i}).then(t)}),0);this._debounce_update=async({force_update:e=!1,ignore_size_check:n=!1,limit_points:i=!0}={})=>{if(this._table){let r=this._set_updating();await new Promise((r=>t(r,n,e,i))),r()}}}}class Ei extends vi{_clear_columns(){this._inactive_columns.innerHTML="",this._active_columns.innerHTML=""}set_aggregate_attribute(t){let e=!1,n=t.reduce(((t,n)=>(this._aggregate_defaults[n.column]!==n.op&&(t[n.column]=n.op,e=!0),t)),{});e?this.setAttribute("aggregates",JSON.stringify(n)):this.removeAttribute("aggregates")}_get_type(t){let e=this._get_view_inactive_columns();if(e.length>0){const n=e.find((e=>e.getAttribute("name")===t));return n?n.getAttribute("type"):"integer"}return""}_set_row_type(t){const e=this._get_view_inactive_columns().filter((t=>"integer"===t.getAttribute("type")||"float"===t.getAttribute("type"))).map((t=>t.getAttribute("name")));t.set_weights(e),t.setAttribute("type",this._get_type(t.getAttribute("name")))}_new_row(t,e,n,i,r,o){let s=document.createElement("perspective-row");if(e=e||this._get_type(t),!n){let i=this.get_aggregate_attribute();n=i&&(n=i.find((e=>e.column===t)))?n.op:(0,Ht.get_type_config)(e).aggregate}if(i&&(s.setAttribute("filter",i),"string"===e||"date"===e||"datetime"===e)){const n=this._get_view_parsed_computed_columns(),i=n.map((t=>t.column));this._table.view({row_pivots:[t],columns:[],computed_columns:i.includes(t)?n:[]}).then((async t=>{this._filter_view=t;let n=await t.num_rows();if(n<1e5){const n=await t.to_json({end_row:10});s.choices(this._autocomplete_choices(n,e))}else console.warn(`perspective-viewer did not generate autocompletion results - ${n} is greater than limit of 100,000 rows.`)})).finally((()=>{var t;null===(t=this._filter_view)||void 0===t||t.delete(),delete this._filter_view}))}r?s.setAttribute("sort-order",r):this._get_view_column_pivots().indexOf(t)>-1?s.setAttribute("sort-order","col asc"):s.setAttribute("sort-order","asc");const a=this._get_view_inactive_columns().filter((t=>"integer"===t.getAttribute("type")||"float"===t.getAttribute("type"))).map((t=>t.getAttribute("name")));return s.set_weights(a),null===t?s.classList.add("null-column"):(s.setAttribute("type",e),s.setAttribute("name",t)),s.setAttribute("aggregate",Array.isArray(n)?JSON.stringify(n):n),s.addEventListener("visibility-clicked",this._column_visibility_clicked.bind(this)),s.addEventListener("aggregate-selected",this._column_aggregate_clicked.bind(this)),s.addEventListener("filter-selected",this._column_filter_clicked.bind(this)),s.addEventListener("close-clicked",(t=>$n.call(this,t.detail))),s.addEventListener("sort-order",this._sort_order_clicked.bind(this)),s.addEventListener("row-drag",(()=>{this.classList.add("dragging"),this._original_index=Array.prototype.slice.call(this._active_columns.children).findIndex((e=>e.getAttribute("name")===t)),-1!==this._original_index?(this._drop_target_hover=this._active_columns.children[this._original_index],setTimeout((()=>s.setAttribute("drop-target",!0)))):this._drop_target_hover=this._new_row(t,e,n)})),s.addEventListener("row-dragend",(()=>{this.classList.remove("dragging")})),o&&(s.setAttribute("computed_column",JSON.stringify(o)),s.classList.add("computed")),s}_update_computed_column_view(t){const e=this._get_view_parsed_computed_columns(),n=this._get_view_all_column_names(),i=this._get_view_active_column_names();if(0===Object.keys(t).length||0===e.length)return;let r=0;const o=JSON.parse(this.getAttribute("columns"))||[];let s=!1;for(const a of e){const e=a.column;if(!n.includes(e)&&o.includes(e)&&(s=!0),n.includes(e)||i.includes(e))continue;const c=this._new_row(e,t[e],null,null,null,e);this._inactive_columns.insertBefore(c,this._inactive_columns.childNodes[0]||null),r++}s?this._update_column_view(o,!0):r>0&&this._columns_container.classList.contains("collapse")&&this._columns_container.classList.remove("collapse")}_diff_computed_column_view(t,e){const n=[],i=e.map((t=>t.column));for(const e of t)i.includes(e.column)||n.push(e);return n}_reset_computed_column_view(t){if(!t||0===t.length)return;const e=t.map((t=>t.column)),n=this._get_view_active_column_names().filter((t=>!e.includes(t))),i=this._get_view_aggregates().filter((t=>!e.includes(t.column))),r=this._get_view_row_pivots().filter((t=>!e.includes(t))),o=this._get_view_column_pivots().filter((t=>!e.includes(t))),s=this._get_view_sorts().filter((t=>!e.includes(t[0]))),a=this._get_view_filters().filter((t=>!e.includes(t[0])));this.set_aggregate_attribute(i),this.setAttribute("columns",JSON.stringify(n)),this.setAttribute("row-pivots",JSON.stringify(r)),this.setAttribute("column-pivots",JSON.stringify(o)),this.setAttribute("sort",JSON.stringify(s)),this.setAttribute("filters",JSON.stringify(a));const c=this._get_view_all_columns().filter((t=>t.classList.contains("computed")));for(const t of c)this._inactive_columns.removeChild(t);const l=this._get_view_active_columns().filter((t=>null!=t)),u=this._get_view_inactive_columns();l.length===u.length?this._columns_container.classList.add("collapse"):this._columns_container.classList.remove("collapse")}_update_column_view(t,e=!1){if(t||(t=this._get_view_active_column_names()),this._plugin.initial&&this._plugin.initial.names)for(;t.length<this._plugin.initial.names.length;)t.push(null);this.setAttribute("columns",JSON.stringify(t));const n=t.filter((t=>null!=t)),i=this._get_view_inactive_columns();n.length===i.length?this._columns_container.classList.add("collapse"):this._columns_container.classList.remove("collapse"),i.forEach((t=>{-1===n.indexOf(t.getAttribute("name"))?t.classList.remove("active"):t.classList.add("active")})),e&&this._update_column_list(t,this._active_columns,((t,e)=>{if(null===t)return this._new_row(null);{const n=i.find((e=>e.getAttribute("name")===t));if(n){const t=n.getAttribute("name");let i;return e.includes(t)&&(i=t),this._new_row(t,n.getAttribute("type"),void 0,void 0,void 0,i)}}}))}_update_column_list(t,e,n,i){i=i||((t,e)=>e.getAttribute("name")===t);const r=Array.prototype.slice.call(e.children),o=this._get_view_parsed_computed_columns().map((t=>t.column));for(let s=0,a=0;s<r.length||a<t.length;s++,a++){const c=t[a],l=r[s],u=r[s+1];if(l)if(void 0===c)e.removeChild(l);else if(i(c,l))this._set_row_type(l);else if(l.classList.contains("null-column")){const t=n(c,o);t&&e.replaceChild(t,l)}else if(u&&i(c,u))e.removeChild(l),s++;else{const t=n(c,o);t&&(e.insertBefore(t,l),s--)}else{const t=n(c,o);t&&e.appendChild(t)}}}_set_row_styles(){let t="";if(this._plugin.initial&&this._plugin.initial.names)for(const e in this._plugin.initial.names){const n=this._plugin.initial.names[e];t+=`#active_columns perspective-row:nth-child(${parseInt(e)+1}){margin-top:23px;}`,t+=`#active_columns perspective-row:nth-child(${parseInt(e)+1}):before{content:"${n}";}`}this.shadowRoot.querySelector("#psp_styles").innerHTML=t}_show_column_container(){this.shadowRoot.querySelector("#columns_container").style.visibility="visible"}_show_side_panel_actions(){this.shadowRoot.querySelector("#side_panel__actions").style.visibility="visible"}_remove_null_columns(t=0){const e=this._get_view_active_columns();for(;++t<e.length;){const n=e[t];n.classList.contains("null-column")&&this.shadowRoot.querySelector("#active_columns").removeChild(n)}}_set_column_defaults(){const t=this._get_view_all_columns(),e=this._get_view_active_valid_columns(),n=this._get_view_active_valid_column_names();if(t.length>0)if(this._plugin.initial){let n=[],i=this._plugin.initial.count||2;this._fill_numeric(e,n),this._fill_numeric(t,n),this._fill_numeric(t,n,!0),n=n.slice(0,i);const r=this._plugin.initial.names;for(;r&&n.length<r.length;)n.push(null);this.setAttribute("columns",JSON.stringify(n))}else"select"===this._plugin.selectMode?this.setAttribute("columns",JSON.stringify([t[0].getAttribute("name")])):(this.setAttribute("columns",JSON.stringify(n)),this._remove_null_columns())}_fill_numeric(t,e,n=!1){for(let i of t){let t=i.getAttribute("type"),r=i.getAttribute("name");(n||["float","integer"].indexOf(t)>-1&&-1===e.indexOf(r))&&e.push(r)}}async _check_responsive_layout(){if(this.shadowRoot){const t=this.shadowRoot.querySelector("#app");if(this.clientHeight<500&&this.clientWidth>600&&this._get_view_columns({active:!1}).length>this._get_view_columns().length){if(!t.classList.contains("columns_horizontal")){const e=this._persisted_side_panel_width;this._persisted_side_panel_width=this._side_panel.style.width,this._side_panel.style.width=e||"",t.classList.add("columns_horizontal")}}else if(t.classList.contains("columns_horizontal")){const e=this.shadowRoot.querySelector("#pivot_chart_container");e.clientWidth,this._side_panel.clientWidth;const n=this._persisted_side_panel_width||e.clientWidth+this._side_panel.clientWidth/2,i=e.clientHeight+50;return await this._pre_resize(n,i,(()=>{const e=this._persisted_side_panel_width;this._persisted_side_panel_width=this._side_panel.style.width,this._side_panel.style.width=e||"",t.classList.remove("columns_horizontal")})),!0}return!1}return!1}_register_ids(){this._app=this.shadowRoot.querySelector("#app"),this._aggregate_selector=this.shadowRoot.querySelector("#aggregate_selector"),this._vis_selector=this.shadowRoot.querySelector("#vis_selector"),this._filters=this.shadowRoot.querySelector("#filters"),this._row_pivots=this.shadowRoot.querySelector("#row_pivots"),this._column_pivots=this.shadowRoot.querySelector("#column_pivots"),this._datavis=this.shadowRoot.querySelector("#pivot_chart"),this._active_columns=this.shadowRoot.querySelector("#active_columns"),this._inactive_columns=this.shadowRoot.querySelector("#inactive_columns"),this._side_panel_actions=this.shadowRoot.querySelector("#side_panel__actions"),this._add_computed_expression_button=this.shadowRoot.querySelector("#add-computed-expression"),this._computed_expression_widget=this.shadowRoot.querySelector("perspective-computed-expression-widget"),this._side_panel=this.shadowRoot.querySelector("#side_panel"),this._top_panel=this.shadowRoot.querySelector("#top_panel"),this._sort=this.shadowRoot.querySelector("#sort"),this._transpose_button=this.shadowRoot.querySelector("#transpose_button"),this._plugin_information=this.shadowRoot.querySelector(".plugin_information"),this._plugin_information_action=this.shadowRoot.querySelector(".plugin_information__action"),this._plugin_information_message=this.shadowRoot.querySelector("#plugin_information_count"),this._columns_container=this.shadowRoot.querySelector("#columns_container"),this._vieux=this.shadowRoot.querySelector("perspective-vieux")}_register_view_options(){let t=ke.getInstance();Qt((t=>{const e=[];for(let n in t)e.push(Nt`
            <option value="${n}">${t[n].name||n}</option>
        `);return e})(t),this._vis_selector)}_autocomplete_choices(t,e){const n=[],i=(0,Ht.get_type_config)(e);for(let r=1;r<t.length;r++){const o=t[r].__ROW_PATH__;if(Array.isArray(o)&&o.length>0&&o[0]){let t=o[0];"date"!==e&&"datetime"!==e||(t=new Date(t),t=t.toLocaleString("en-US",i.format)),n.push(t)}}return n}}class bi extends Ei{async _toggle_config(t){if(!t||2!==t.button){this._show_config=!this._show_config;const t=this.shadowRoot.querySelector("#pivot_chart_container");this._show_config?await this._post_resize((()=>{this.toggleAttribute("settings",!0)}),(()=>{this._app.classList.add("settings-open"),this.dispatchEvent(new CustomEvent("perspective-toggle-settings",{detail:this._show_config}))})):await this._pre_resize(t.clientWidth+this._side_panel.clientWidth,t.clientHeight+this._top_panel.clientHeight,(()=>{this._app.classList.remove("settings-open"),this.removeAttribute("settings")}),(()=>this.dispatchEvent(new CustomEvent("perspective-toggle-settings",{detail:this._show_config}))))}}async _pre_resize(t,e,n,i){this._datavis.style.width=`${t}px`,this._datavis.style.height=`${e}px`;try{!document.hidden&&this.offsetParent&&await this._plugin.resize.call(this)}finally{null==i||i(),this._datavis.style.width="100%",this._datavis.style.height="100%",n()}}async _post_resize(t,e){null==e||e();try{!document.hidden&&this.offsetParent&&await this._plugin.resize.call(this)}finally{t()}}_open_computed_expression_widget(t){t.stopImmediatePropagation(),this._computed_expression_widget._computed_expression_parser=this._computed_expression_parser,this._computed_expression_widget._get_type=this._get_type.bind(this),this._computed_expression_widget._get_view_all_column_names=this._get_view_all_column_names.bind(this),this._computed_expression_widget._get_view_column_names_by_types=this._get_view_column_names_by_types.bind(this),this._computed_expression_widget.style.display="flex",this._side_panel_actions.style.display="none",this._computed_expression_widget._observe_editor()}_save_computed_expression(t){const e=t.detail.expression;let n=this._get_view_computed_columns();n.includes(e)?console.warn(`"${e}" was not applied because it already exists.`):(n.push(e),this.setAttribute("computed-columns",JSON.stringify(n)))}async _type_check_computed_expression(t){const e=t.detail.parsed_expression||[];if(0===e.length)return void this._computed_expression_widget._type_check_expression({});const n={};for(const t of e)n[t.column]=t.computed_function_name;const i=await this._table.computed_schema(e),r={};for(const t in n)i[t]||(r[t]=await this._table.get_computation_input_types(n[t]));this._computed_expression_widget._type_check_expression(i,r)}_clear_all_computed_expressions(){this.setAttribute("computed-columns",JSON.stringify([]))}_set_computed_expression(t){return t}_column_visibility_clicked(t){const e=t.currentTarget;if("active_columns"===e.parentElement.getAttribute("id")){var n;const s=(null===(n=this._plugin.initial)||void 0===n?void 0:n.count)||1;if(this._get_view_active_valid_column_count()===s)return;if(t.detail.shiftKey)for(let t of Array.prototype.slice.call(this._active_columns.children))t!==e&&this._active_columns.removeChild(t);else{var i,r,o;const t=Array.prototype.slice.call(this._active_columns.children).indexOf(e);if(t<(null===(i=this._plugin.initial)||void 0===i?void 0:i.count))return;t<(null===(r=this._plugin.initial)||void 0===r||null===(o=r.names)||void 0===o?void 0:o.length)-1&&this._active_columns.insertBefore(this._new_row(null),e),this._active_columns.removeChild(e)}}else{var s;if(t.detail.shiftKey&&"toggle"===this._plugin.selectMode||!t.detail.shiftKey&&"select"===this._plugin.selectMode)for(let t of Array.prototype.slice.call(this._active_columns.children))this._active_columns.removeChild(t);let n=this._new_row(e.getAttribute("name"),e.getAttribute("type"));const i=this._get_view_active_columns();let r=i.length-1;if(i[r]&&null!==(s=i[r])&&void 0!==s&&s.classList.contains("null-column")){for(;r-- >0;)if(!i[r].classList.contains("null-column")){this._active_columns.replaceChild(n,i[r+1]);break}}else this._active_columns.appendChild(n)}this._check_responsive_layout(),this._update_column_view()}_column_aggregate_clicked(){let t=this.get_aggregate_attribute(),e=this._get_view_aggregates();for(let n of t){let t=e.find((t=>t.column===n.column));t&&(n.op=t.op)}this.set_aggregate_attribute(t),this._update_column_view(),this._debounce_update()}_column_filter_clicked(){let t=this._get_view_filters();this._updating_filter=!0,this.setAttribute("filters",JSON.stringify(t)),this._updating_filter=!1,this._debounce_update()}_increment_sort(t,e,n){let i=["asc","desc"];return e&&i.push("col asc","col desc"),n&&(i=i.map((t=>`${t} abs`))),i.push("none"),i[(i.indexOf(t)+1)%i.length]}_sort_order_clicked(t){const e=t.target,n=t.detail.shiftKey&&"string"!==e.getAttribute("type"),i=this._increment_sort(e.getAttribute("sort-order"),this._get_view_column_pivots().length>0,n);e.setAttribute("sort-order",i);const r=this._get_view_sorts();this.setAttribute("sort",JSON.stringify(r))}_transpose(){const t=this.hasAttribute("row-pivots"),e=this.hasAttribute("column-pivots");if(t&&e){let t=this.getAttribute("row-pivots");this.setAttribute("row-pivots",this.getAttribute("column-pivots")),this.setAttribute("column-pivots",t)}else if(t){let t=this.getAttribute("row-pivots");this.removeAttribute("row-pivots"),this.setAttribute("column-pivots",t)}else if(e){let t=this.getAttribute("column-pivots");this.removeAttribute("column-pivots"),this.setAttribute("row-pivots",t)}else this.removeAttribute("column-pivots"),this.removeAttribute("row-pivots")}_vis_selector_changed(){var t;this._plugin_information.classList.add("hidden"),this.setAttribute("plugin",this._vis_selector.value),this._active_columns.classList.remove("one_lock","two_lock");const e=["one_lock","two_lock"][(null===(t=this._plugin.initial)||void 0===t?void 0:t.count)-1];e&&this._active_columns.classList.add(e),this._debounce_update()}_register_callbacks(){this._sort.addEventListener("drop",Kn.bind(this)),this._sort.addEventListener("dragend",$n.bind(this)),this._sort.addEventListener("dragenter",ci.bind(this)),this._sort.addEventListener("dragover",oi.bind(this)),this._sort.addEventListener("dragleave",li.bind(this)),this._row_pivots.addEventListener("drop",Kn.bind(this)),this._row_pivots.addEventListener("dragend",$n.bind(this)),this._row_pivots.addEventListener("dragenter",ci.bind(this)),this._row_pivots.addEventListener("dragover",oi.bind(this)),this._row_pivots.addEventListener("dragleave",li.bind(this)),this._column_pivots.addEventListener("drop",Kn.bind(this)),this._column_pivots.addEventListener("dragend",$n.bind(this)),this._column_pivots.addEventListener("dragenter",ci.bind(this)),this._column_pivots.addEventListener("dragover",oi.bind(this)),this._column_pivots.addEventListener("dragleave",li.bind(this)),this._filters.addEventListener("drop",Kn.bind(this)),this._filters.addEventListener("dragend",$n.bind(this)),this._filters.addEventListener("dragenter",ci.bind(this)),this._filters.addEventListener("dragover",oi.bind(this)),this._filters.addEventListener("dragleave",li.bind(this)),this._active_columns.addEventListener("drop",ri.bind(this)),this._active_columns.addEventListener("dragenter",ci.bind(this)),this._active_columns.addEventListener("dragend",Yn.bind(this)),this._active_columns.addEventListener("dragover",ii.bind(this)),this._active_columns.addEventListener("dragleave",qn.bind(this)),this._add_computed_expression_button.addEventListener("click",this._open_computed_expression_widget.bind(this)),this._computed_expression_widget.addEventListener("perspective-computed-expression-save",this._save_computed_expression.bind(this)),this._computed_expression_widget.addEventListener("perspective-computed-expression-type-check",this._type_check_computed_expression.bind(this)),this._computed_expression_widget.addEventListener("perspective-computed-expression-remove",this._clear_all_computed_expressions.bind(this)),this._computed_expression_widget.addEventListener("perspective-computed-expression-update",this._set_computed_expression.bind(this)),this._transpose_button.addEventListener("click",this._transpose.bind(this)),this._vis_selector.addEventListener("change",this._vis_selector_changed.bind(this)),this._vieux.addEventListener("perspective-vieux-reset",(()=>this.reset())),this._vieux.addEventListener("perspective-vieux-resize",(()=>this._plugin.resize.call(this))),this._plugin_information_action.addEventListener("click",(()=>{this._debounce_update({ignore_size_check:!0,limit_points:!1}),this._plugin_information.classList.add("hidden"),this._plugin.render_warning=!1}))}}var yi;const xi=["selectable","editable","plugin","computed-columns","row-pivots","column-pivots","aggregates","filters","sort","columns"];window.addEventListener("unhandledrejection",(t=>{var e;"View method cancelled"===(null===(e=t.reason)||void 0===e?void 0:e.message)&&t.preventDefault()})),we('\x3c!--\r\n   \r\n   Copyright (c) 2017, the Perspective Authors.\r\n   \r\n   This file is part of the Perspective library, distributed under the terms of\r\n   the Apache License 2.0.  The full license can be found in the LICENSE file.\r\n\r\n--\x3e\r\n\r\n<template id="perspective-viewer">\r\n\r\n    <perspective-vieux id="app">\r\n\r\n        <div slot="side_panel" id=\'side_panel\' class="column fixed noselect">\r\n            <div id="vis_selector_container">\r\n                <select id="vis_selector">\r\n                </select>\r\n            </div>\r\n            <div id="columns_container" style="visibility: hidden">\r\n                <ul id=\'active_columns\'></ul>\r\n                <div id="sub_columns">\r\n                    <ul id=\'inactive_columns\'></ul>\r\n                    <div id="side_panel__actions" style="visibility: hidden">\r\n                        <div id="add-computed-expression" class="side_panel-action"><span\r\n                                class="psp-icon psp-icon__add"></span><span class="psp-title__columnName">New\r\n                                Column</span></div>\r\n                    </div>\r\n                </div>\r\n                <perspective-computed-expression-widget></perspective-computed-expression-widget>\r\n            </div>\r\n        </div>\r\n\r\n        <div slot="top_panel" id=\'top_panel\'>\r\n            <div class="rrow">\r\n                <div id="row_pivots">\r\n                    <div class="psp-text-field">\r\n                        <ul class="psp-text-field__input" for="row-pivots"></ul>\r\n                        <label for="row_pivots"></label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <span id="transpose_button" class="rrow centered" title="Transpose Pivots">&#x21C4;</span>\r\n            <div class="rrow">\r\n                <div id="column_pivots">\r\n                    <div class="psp-text-field">\r\n                        <ul class="psp-text-field__input" for="column-pivots"></ul>\r\n                        <label for="column_pivots"></label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rrow">\r\n                <div id="sort">\r\n                    <div class="psp-text-field">\r\n                        <ul class="psp-text-field__input" for="sort"></ul>\r\n                        <label for="sort"></label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rrow" style=\'flex-grow:3;height:auto;flex:1 1 400px;max-width:none\'>\r\n                <div id="filters">\r\n                    <div class="psp-text-field">\r\n                        <ul class="psp-text-field__input" for=\'filters\'></ul>\r\n                        <label for="filters"></label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div slot="main_panel" id="pivot_chart_container">\r\n            <div class="plugin_information plugin_information--warning hidden" id="plugin_information--size">\r\n                <span class="plugin_information__text" id="plugin_information_count">Estimated rendering</span>\r\n                <span class="plugin_information__actions">\r\n                    <span class="plugin_information__action">Render all points</span>\r\n                </span>\r\n            </div>\r\n            <div id="pivot_chart"></div>\r\n        </div>\r\n\r\n    </perspective-vieux>\r\n</template>',':host #app #top_panel #row_pivots label:before{content:var(--row_pivots--before,"Row Pivots")}:host #app #top_panel #column_pivots label:before{content:var(--column_pivots--before,"Column Pivots")}:host #app #top_panel #sort label:before{content:"Sort"}:host #app #top_panel #filters label:before{content:"Filter"}:host #app #side_panel #active_columns perspective-row:before{font-size:10px;margin-left:var(--column_selector--width,20px);left:1px;padding:var(--column_type--padding,0px 0px 0px 5px);color:var(--inactive--color,#666);position:absolute;margin-top:-15px}:host ::-webkit-scrollbar,\n:host ::shadow ::-webkit-scrollbar{width:12px}:host ::-webkit-scrollbar-track,\n:host ::shadow ::-webkit-scrollbar-track{background:none}:host ::-webkit-scrollbar{width:8px;height:8px}:host ::-webkit-scrollbar-thumb{background-color:var(--scrollbar--background-color,#E0E4E9)}:host ::-webkit-scrollbar-thumb{border-radius:4px}:host ::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}:host #inactive_columns,\n:host #active_columns{-webkit-mask-image:linear-gradient(black,black),linear-gradient(to top,transparent 10%,black 90%);-webkit-mask-position:-12px 0px,bottom right;-webkit-mask-size:100% 100%,12px 1000%;-webkit-mask-repeat:no-repeat;transition:-webkit-mask-position 0.3s}:host #inactive_columns:hover,\n:host #active_columns:hover{-webkit-mask-position:-12px 0px,top right}.button{padding:var(--button--padding,12px 14px 24px 8px)}@keyframes expand{from{opacity:0}}:host{position:relative;display:inline-block;overflow:hidden;word-wrap:"normal";--d3fc-series:rgba(31,119,180,0.5);--d3fc-series-1:#0366d6;--d3fc-series-2:#ff7f0e;--d3fc-series-3:#2ca02c;--d3fc-series-4:#d62728;--d3fc-series-5:#9467bd;--d3fc-series-6:#8c564b;--d3fc-series-7:#e377c2;--d3fc-series-8:#7f7f7f;--d3fc-series-9:#bcbd22;--d3fc-series-10:#17becf;--d3fc-full--gradient:linear-gradient(#4d342f 0%,#e4521b 22.5%,#feeb65 42.5%,#f0f0f0 50%,#dcedc8 57.5%,#42b3d5 67.5%,#1a237e 100%);--d3fc-positive--gradient:linear-gradient(#dcedc8 0%,#42b3d5 35%,#1a237e 100%);--d3fc-negative--gradient:linear-gradient(#feeb65 100%,#e4521b 70%,#4d342f 0%)}:host #pivot_chart{position:absolute;width:100%;height:100%;display:grid;justify-content:stretch}:host .hidden{display:none}:host .psp-icon:hover{cursor:pointer}:host .psp-icon__add{display:flex;width:20px;min-width:20px;margin-top:-2px;height:0px;font-family:var(--column-add--font-family,inherit)}:host .psp-icon__add:before{font-feature-settings:"liga";content:var(--column-add--before,"+")}:host .psp-title__columnName{display:flex;margin-left:24px;margin-top:3px;font-size:12px;font-weight:300}:host .side_panel-action:hover{cursor:pointer}:host *{box-sizing:border-box;line-height:1.42857143}:host #app #side_panel{width:100%}:host #app{display:flex;position:relative;width:100%;height:100%}:host #app.hide_message #drop_target{display:none}:host .chart{padding:15px}:host #pivot_chart_container{flex-grow:1;position:absolute;top:0;left:0;right:0;bottom:0;border:var(--plugin--border,none)}:host .config{display:flex}:host #row_pivots #psp_row,\n:host #column_pivots #psp_row,\n:host #sort #psp_row,\n:host #filters #psp_row{display:inline}:host .psp-text-field ul{min-height:20px}:host #active_columns perspective-row{animation:expand 0.3s ease-out;--column-selector--color:var(--active--color,#999);--is_visible--before:var(--active-column-selector--content,"\\25CF")}:host #inactive_columns perspective-row{animation:expand 0.3s ease-out;--column-selector--color:var(--inactive-column-selector--color,#999);--is_visible--before:var(--inactive-column-selector--content,"\\25CB");--row_draggable--animation:none}:host #inactive_columns perspective-row:hover{transition:none;opacity:1}:host #top_panel perspective-row{animation:expand 0.3s ease-out;--column-name--flex:1}:host #active_columns,\n:host #inactive_columns{list-style:none;padding:0px;width:100%;margin:var(--column-container--margin,8px 0px 0px 0px);overflow-y:overlay;overflow-x:hidden;position:relative}:host #inactive_columns perspective-row{opacity:var(--inactive-column--opacity,1);transition:opacity 0.3s}:host #inactive_columns perspective-row.active{opacity:0;height:0!important;overflow:hidden}:host .columns_horizontal #sub_columns.collapse #side_panel__actions{margin-top:0px}:host .columns_horizontal .collapse #sub_columns #side_panel__actions{margin-top:0px}:host #sub_columns{display:flex;flex-direction:column;overflow-x:hidden;width:100%;flex:0 100 auto}:host #sub_columns.collapse{flex:0 1 auto;flex-shrink:0;min-height:0px}:host #app.columns_horizontal #sub_columns{flex:0 1 50%}:host #app.columns_horizontal #sub_columns #inactive_columns{flex:0 1 auto}:host #app:not(.columns_horizontal) #columns_container:not(.collapse) #active_columns{max-height:min(calc(100% - 95px),60%)}:host #columns_container.collapse #sub_columns{flex:0 1 auto;flex-shrink:0;min-height:0px}:host .column{display:flex;list-style:none;flex-direction:column;flex:1}:host .rrow{display:flex;flex-grow:1;min-height:24px;align-items:center;max-width:400px;list-style:none;min-width:140px;margin:var(--column-drop-container--margin,5px 10px 0px 0px)}:host .rrow > div{display:flex;min-height:24px;flex-direction:column;justify-content:flex-end}:host #top_panel > .rrow > *{width:100%;padding:12px 0px 12px 0px;margin:-12px 0px -12px 0px}:host .rrow #psp_row{white-space:nowrap}:host #sort perspective-row{--sort_order-display:inline;--sort_order-padding:0 0 0 4px}:host #sort perspective-row[sort-order="asc"]{--row-sort-order--before:var(--sort-order-asc--before,"\\2191")}:host #sort perspective-row[sort-order="desc"]{--row-sort-order--before:var(--sort-order-desc--before,"\\2193")}:host #sort perspective-row[sort-order="none"]{--row-sort-order--before:var(--sort-order-none--before,"-")}:host #sort perspective-row[sort-order="asc abs"]{--row-sort-order--before:var(--sort-order-asc-abs--before,"\\21E7")}:host #sort perspective-row[sort-order="desc abs"]{--row-sort-order--before:var(--sort-order-desc-abs--before,"\\21E9")}:host #sort perspective-row[sort-order="col asc"]{--row-sort-order--before:var(--sort-order-col-asc--before,"\\2192")}:host #sort perspective-row[sort-order="col desc"]{--row-sort-order--before:var(--sort-order-col-desc--before,"\\2190")}:host #sort perspective-row[sort-order="col asc abs"]{--row-sort-order--before:var(--sort-order-col-asc-abs--before,"\\21E8")}:host #sort perspective-row[sort-order="col desc abs"]{--row-sort-order--before:var(--sort-order-col-desc-abs--before,"\\21E6")}:host #top_panel perspective-row{padding:0px 10px 0px 0px}:host #top_panel perspective-row::after{content:",";line-height:26px;padding-left:4px}:host #top_panel perspective-row:last-child::after{display:none;content:""!important}:host label{white-space:nowrap;display:inline-block;vertical-align:middle;margin-bottom:0px}:host #drop_target{position:absolute;left:0px;top:0px;right:0px;bottom:0px;padding:30px}:host #drop_target_inner{width:100%;height:100%;display:flex;align-items:center;justify-content:center}:host #drop_target_inner h3{font-weight:300}:host .button{cursor:pointer;font-size:16px;font-weight:normal}:host ul{padding:0px;margin:0;font-size:12px}:host select::-ms-expand{display:none}:host select{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:var(--select--background,url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgNC45IDEwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0LjkgMTA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojQUFBQUFBO30KPC9zdHlsZT4KPHRpdGxlPmFycm93czwvdGl0bGU+Cjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMS40LDQuNyAyLjUsMy4yIDMuNSw0LjcgIi8+Cjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMy41LDUuMyAyLjUsNi44IDEuNCw1LjMgIi8+Cjwvc3ZnPg==) no-repeat 95% 50%);background-color:#fff;color:inherit;border-radius:5px;height:21px;margin-top:3px;padding:var(--select--padding,0px 0px 0px 6px);font-size:12px;font-weight:300;font-family:inherit}:host select option{background:var(--select--background-color,#ffffff)}:host input{padding:0 10px 0 10px}:host .centered{display:flex;align-items:center;justify-content:center}:host #top_panel{display:flex;flex-wrap:wrap;justify-content:flex-start;padding:var(--top_panel--padding,5px 0px 10px 0px);max-width:1000px;z-index:1}:host #top_panel perspective-row{margin-bottom:-1px;display:var(--top-panel-row--display,inline-block);--psp_row-display:inline-block}:host #side_panel{position:relative;flex:0 0 auto;padding:var(--side_panel--padding,10px 2px 0px 11px)}:host #side_panel > div{display:flex}:host #vis_selector_container{min-height:29px;margin-left:var(--column_selector--width,20px);overflow:hidden}:host #vis_selector{flex-grow:1}:host #transpose_button{cursor:pointer;min-width:5px;max-width:5px;flex-grow:0;color:var(--inactive--color,inherit);font-family:Arial;font-size:12px;user-select:none}:host #transpose_button:hover{color:var(--active--color,inherit)}:host #resize_bar{position:absolute;top:0;right:0;bottom:0;width:8px;cursor:col-resize}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9sZXNzL2NvbHVtbl9sYWJlbHMubGVzcyIsInZpZXdlci5sZXNzIiwic3JjL2xlc3Mvc2Nyb2xsYmFycy5sZXNzIiwic3JjL2xlc3Mvdmlld2VyLmxlc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBU0EsK0NBR1ksOENDTVosQ0RUQSxrREFPWSxvRENLWixDRFpBLHlDQVdZLGNDSVosQ0RmQSw0Q0FlWSxnQkNHWixDRGxCQSw4REFzQmdCLGNBQUEsQ0FDQSw4Q0FBQSxDQUNBLFFBQUEsQ0FDQSxtREFBQSxDQUNBLGlDQUFBLENBQ0EsaUJBQUEsQ0FDQSxnQkNEaEIsQ0NwQ0E7bUNBSVEsVUQ0Q1IsQ0NoREE7eUNBVVEsZUQwQ1IsQ0NwREEsMEJBY1EsU0FBQSxDQUNBLFVEeUNSLENDeERBLGdDQW1CUSwyRER3Q1IsQ0MzREEsZ0NBdUJRLGlCRHVDUixDQzlEQSxpQ0EyQlEsOEJEc0NSLENDakVBO3NCQStCUSxpR0FBQSxDQUdBLDRDQUFBLENBQ0Esc0NBQUEsQ0FDQSw2QkFBQSxDQUNBLHFDRG9DUixDQ2xDUTs0QkFDSSx5Q0RxQ1osQ0U5REEsUUFDSSxpREZnRUosQ0U3REEsa0JBQ0ksS0FDSSxTRitETixDQUNGLENFNURBLE1BQ0ksaUJBQUEsQ0FDQSxvQkFBQSxDQUNBLGVBQUEsQ0FDQSxrQkFBQSxDQUVBLGtDQUFBLENBQ0EsdUJBQUEsQ0FDQSx1QkFBQSxDQUNBLHVCQUFBLENBQ0EsdUJBQUEsQ0FDQSx1QkFBQSxDQUNBLHVCQUFBLENBQ0EsdUJBQUEsQ0FDQSx1QkFBQSxDQUNBLHVCQUFBLENBQ0Esd0JBQUEsQ0FDQSxrSUFBQSxDQVNBLDhFQUFBLENBS0EsOEVGaURKLENFaEZBLG1CQXNDUSxpQkFBQSxDQUNBLFVBQUEsQ0FDQSxXQUFBLENBQ0EsWUFBQSxDQUNBLHVCRjZDUixDRXZGQSxjQTZDUSxZRjZDUixDRTFDUSxzQkFDSSxjRjRDWixDRTdGQSxxQkFxRFEsWUFBQSxDQUNBLFVBQUEsQ0FDQSxjQUFBLENBQ0EsZUFBQSxDQUNBLFVBQUEsQ0FDQSxrREYyQ1IsQ0UxQ1EsNEJBQ0ksNEJBQUEsQ0FDQSxxQ0Y0Q1osQ0V6R0EsNkJBaUVRLFlBQUEsQ0FDQSxnQkFBQSxDQUNBLGNBQUEsQ0FDQSxjQUFBLENBQ0EsZUYyQ1IsQ0VoSEEsK0JBd0VRLGNGMkNSLENFbkhBLFFBMkVRLHFCQUFBLENBQ0Esc0JGMkNSLENFdkhBLHVCQWdGWSxVRjBDWixDRTFIQSxXQW9GUSxZQUFBLENBQ0EsaUJBQUEsQ0FDQSxVQUFBLENBQ0EsV0Z5Q1IsQ0VoSUEscUNBMkZZLFlGd0NaLENFbklBLGFBK0ZRLFlGdUNSLENFdElBLDZCQWtHUSxXQUFBLENBQ0EsaUJBQUEsQ0FDQSxLQUFBLENBQ0EsTUFBQSxDQUNBLE9BQUEsQ0FDQSxRQUFBLENBQ0EsaUNGdUNSLENFL0lBLGNBMkdRLFlGdUNSLENFbEpBOzs7d0JBaUhRLGNGdUNSLENFeEpBLHlCQW9IUSxlRnVDUixDRTNKQSxzQ0F1SFEsOEJBQUEsQ0FDQSxrREFBQSxDQUNBLG1FRnVDUixDRWhLQSx3Q0E0SFEsOEJBQUEsQ0FDQSxvRUFBQSxDQUNBLHFFQUFBLENBQ0EsK0JGdUNSLENFdENRLDhDQUNJLGVBQUEsQ0FDQSxTRndDWixDRTFLQSxpQ0FzSVEsOEJBQUEsQ0FDQSxxQkZ1Q1IsQ0U5S0E7d0JBMklRLGVBQUEsQ0FDQSxXQUFBLENBQ0EsVUFBQSxDQUNBLHNEQUFBLENBQ0Esa0JBQUEsQ0FDQSxpQkFBQSxDQUNBLGlCRnVDUixDRXhMQSx3Q0FxSlkseUNBQUEsQ0FDQSx1QkZzQ1osQ0VyQ1ksK0NBQ0ksU0FBQSxDQUNBLGtCQUFBLENBQ0EsZUZ1Q2hCLENFak1BLHFFQStKUSxjRnFDUixDRXBNQSxzRUFrS1EsY0ZxQ1IsQ0V2TUEsbUJBcUtRLFlBQUEsQ0FDQSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsVUFBQSxDQUNBLGVGcUNSLENFcENRLDRCQUNJLGFBQUEsQ0FDQSxhQUFBLENBQ0EsY0ZzQ1osQ0VuTkEsMkNBaUxRLFlGcUNSLENFdE5BLDZEQW1MWSxhRnNDWixDRXpOQSxzRkF1TFEscUNGcUNSLENFNU5BLCtDQTBMUSxhQUFBLENBQ0EsYUFBQSxDQUNBLGNGcUNSLENFak9BLGNBK0xRLFlBQUEsQ0FDQSxlQUFBLENBQ0EscUJBQUEsQ0FDQSxNRnFDUixDRXZPQSxZQXFNUSxZQUFBLENBQ0EsV0FBQSxDQUNBLGVBQUEsQ0FDQSxrQkFBQSxDQUNBLGVBQUEsQ0FDQSxlQUFBLENBQ0EsZUFBQSxDQUNBLDRERnFDUixDRWpQQSxrQkErTVEsWUFBQSxDQUNBLGVBQUEsQ0FDQSxxQkFBQSxDQUNBLHdCRnFDUixDRXZQQSw2QkFxTlEsVUFBQSxDQUNBLHlCQUFBLENBQ0EsMEJGcUNSLENFNVBBLHFCQTBOUSxrQkZxQ1IsQ0UvUEEsNEJBNk5RLDJCQUFBLENBQ0EsOEJGcUNSLENFcENRLDhDQUNJLDhERnNDWixDRXBDUSwrQ0FDSSwrREZzQ1osQ0VwQ1EsK0NBQ0ksMkRGc0NaLENFcENRLGtEQUNJLGtFRnNDWixDRWpDUSxtREFDSSxtRUZtQ1osQ0U5QlEsa0RBQ0ksa0VGZ0NaLENFM0JRLG1EQUNJLG1FRjZCWixDRXhCUSxzREFDSSxzRUYwQlosQ0VyQlEsdURBQ0ksdUVGdUJaLENFOVJBLGlDQThRUSx3QkZtQlIsQ0VqU0Esd0NBaVJRLFdBQUEsQ0FDQSxnQkFBQSxDQUNBLGdCRm1CUixDRXRTQSxtREFzUlEsWUFBQSxDQUNBLG9CRm1CUixDRTFTQSxZQTJSUSxrQkFBQSxDQUNBLG9CQUFBLENBQ0EscUJBQUEsQ0FDQSxpQkZrQlIsQ0VoVEEsbUJBaVNRLGlCQUFBLENBQ0EsUUFBQSxDQUNBLE9BQUEsQ0FDQSxTQUFBLENBQ0EsVUFBQSxDQUNBLFlGa0JSLENFeFRBLHlCQXlTUSxVQUFBLENBQ0EsV0FBQSxDQUNBLFlBQUEsQ0FDQSxrQkFBQSxDQUNBLHNCRmtCUixDRS9UQSw0QkFnVFEsZUZrQlIsQ0VsVUEsY0FvVFEsY0FBQSxDQUNBLGNBQUEsQ0FDQSxrQkZpQlIsQ0V2VUEsU0F5VFEsV0FBQSxDQUNBLFFBQUEsQ0FDQSxjRmlCUixDRTVVQSx5QkE4VFEsWUZpQlIsQ0UvVUEsYUFpVVEsdUJBQUEsQ0FDQSxvQkFBQSxDQUNBLG1CQUFBLENBQ0EsZUFBQSxDQUNBLDhxQkFBQSxDQVFBLHFCQUFBLENBQ0EsYUFBQSxDQUNBLGlCQUFBLENBQ0EsV0FBQSxDQUNBLGNBQUEsQ0FDQSw4Q0FBQSxDQUNBLGNBQUEsQ0FDQSxlQUFBLENBQ0EsbUJGVVIsQ0UvVkEsb0JBMlVZLGtERnVCWixDRWxXQSxZQXdWUSxxQkZhUixDRXJXQSxnQkEyVlEsWUFBQSxDQUNBLGtCQUFBLENBQ0Esc0JGYVIsQ0UxV0EsaUJBZ1dRLFlBQUEsQ0FDQSxjQUFBLENBQ0EsMEJBQUEsQ0FDQSxrREFBQSxDQUNBLGdCQUFBLENBQ0EsU0ZhUixDRWxYQSxpQ0F1V1ksa0JBQUEsQ0FDQSxrREFBQSxDQUNBLDhCRmNaLENFdlhBLGtCQTZXUSxpQkFBQSxDQUNBLGFBQUEsQ0FDQSxvREZhUixDRTVYQSx3QkFrWFEsWUZhUixDRS9YQSw4QkFxWFEsZUFBQSxDQUNBLDhDQUFBLENBQ0EsZUZhUixDRXBZQSxvQkEwWFEsV0ZhUixDRXZZQSx3QkE2WFEsY0FBQSxDQUNBLGFBQUEsQ0FDQSxhQUFBLENBQ0EsV0FBQSxDQUNBLG9DQUFBLENBQ0EsaUJBQUEsQ0FDQSxjQUFBLENBQ0EsZ0JGYVIsQ0VaUSw4QkFDSSxrQ0ZjWixDRXBaQSxrQkEyWVEsaUJBQUEsQ0FDQSxLQUFBLENBQ0EsT0FBQSxDQUNBLFFBQUEsQ0FDQSxTQUFBLENBQ0EsaUJGWVIiLCJmaWxlIjoidmlld2VyLmxlc3MifQ== */',':host ::-webkit-scrollbar,\n:host ::shadow ::-webkit-scrollbar{width:12px}:host ::-webkit-scrollbar-track,\n:host ::shadow ::-webkit-scrollbar-track{background:none}:host ::-webkit-scrollbar{width:8px;height:8px}:host ::-webkit-scrollbar-thumb{background-color:var(--scrollbar--background-color,#E0E4E9)}:host ::-webkit-scrollbar-thumb{border-radius:4px}:host ::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}:host #inactive_columns,\n:host #active_columns{-webkit-mask-image:linear-gradient(black,black),linear-gradient(to top,transparent 10%,black 90%);-webkit-mask-position:-12px 0px,bottom right;-webkit-mask-size:100% 100%,12px 1000%;-webkit-mask-repeat:no-repeat;transition:-webkit-mask-position 0.3s}:host #inactive_columns:hover,\n:host #active_columns:hover{-webkit-mask-position:-12px 0px,top right}.psp-text-field{position:relative;background-color:var(--column-drop-container--background,white);border-width:0;border-bottom-width:1px;border-style:solid;border-color:var(--inactive--color,#ccc);display:flex;flex-direction:column;justify-content:flex-end;min-height:24px;transition:border-color 0.3s ease-out,background-size 0.3s ease-out;background-size:100% 200%}:host(.dragging) .psp-text-field.dropping{border-bottom-width:2px;border-style:solid;border-color:var(--active--color,#1a7da1)}:host(.dragging) .psp-text-field{border-bottom-width:1px;border-style:solid;border-color:var(--active--color,#1a7da1);background:var(--input-dragover--background,linear-gradient(to top,#cbe7f9,transparent 25%));background-size:100% 100%}.psp-text-field > .psp-text-field__input{border:0px;line-height:20px;vertical-align:bottom;padding-bottom:0px;display:none}.psp-text-field__input + label{width:0px;height:var(--column--height,auto);line-height:17px;box-sizing:border-box;font-weight:300;color:var(--inactive--color,#B4B7BE);white-space:nowrap;padding:var(--column-drop-container--padding,0px 0px 2px 10px);font-size:12px;display:inline-block;transition:font-size 0.3s,margin 0.3s}.dropping .psp-text-field__input,\n.psp-text-field__input:not(:empty){display:block!important}.dropping .psp-text-field__input::after{content:"|";width:0px;overflow:visible;margin-top:-1px;position:absolute}.dropping *{pointer-events:none}.dropping .psp-text-field label,\n.psp-text-field__input:not(:empty) + label{position:absolute;top:0px;margin:var(--column-drop-label--margin,0);font-size:var(--column-drop-label--font-size,12px);display:var(--column-drop-label--display,none)}.dropping perspective-row.inserting{border-top:25px solid rgba(0,0,0,0)}.dropping perspective-row.postserting{border-bottom:25px solid rgba(0,0,0,0)}:host perspective-row{height:var(--column--height,21px);--row_draggable-height:var(--column--height,21px)}:host([row-pivots]) #columns_container #active_columns{min-height:var(--active-column--height,41px)}:host([row-pivots]) #columns_container #active_columns perspective-row{height:var(--active-column--height,41px);min-height:var(--active-column--height,41px);--row_draggable-height:var(--active-column--height,41px);--column_aggregate-display:inline-block;--is_visible--height:var(--active-column-selector--height,auto)}:host{font-family:Arial,sans-serif;background-color:#F2F4F6;color:#161616}:host #app.columns_horizontal #columns_container{flex-direction:row-reverse}:host #app.columns_horizontal #active_columns,\n:host #app.columns_horizontal #inactive_columns{display:flex;flex-direction:column;width:100%}:host #app.columns_horizontal #active_columns{flex:0 1 50%}:host #app.columns_horizontal #sub_columns{flex-shrink:1}:host #app.columns_horizontal #sub_columns perspective-row{--column_name-margin:0 25px 0 0}:host #app.columns_horizontal #side_panel #divider{display:none}:host #app.columns_horizontal perspective-computed-expression-widget{max-height:none;margin-right:24px;width:auto}:host #side_panel perspective-row{--name-before-display:inline-block;--is_visible-display:inline-block;--row_draggable-padding:0px 10px 0px 0px;--row_draggable--margin:0px 8px 0px 0px;--row_close-display:none;--column_name-max-width:180px}:host #top_panel perspective-row{--row_draggable-display:inline-flex;--row-draggable--flex-direction:row;--row-draggable--align-items:center}:host #columns_container{flex-direction:column;height:calc(100% - 29px)}:host #columns_container #active_columns{flex:0 1 auto;min-height:var(--column--height,21px)}:host #columns_container #active_columns perspective-row{margin-bottom:2px;--row_draggable-background-color:var(--column--background,white);--row_draggable-border-color:var(--inactive--color,#C5C9D0);--row_draggable-border-width:0 0 1px 0;--row_draggable-overflow:hidden;--row_draggable--justify-content:space-evenly}:host #columns_container #active_columns perspective-row:last-child{--row_draggable-border-color:var(--row_draggable-last-child-border-color,var(--inactive--color,#C5C9D0))}:host #columns_container #active_columns perspective-row[drop-target]{--row_draggable_children-opacity:0}:host #columns_container #active_columns perspective-row.null-column{--row_draggable_children-opacity:0;pointer-events:none}:host #columns_container #active_columns.one_lock perspective-row:first-child,\n:host #columns_container #active_columns.two_lock perspective-row:first-child{--active--color:#ccc;--is_visible--cursor:normal}:host #columns_container #active_columns.two_lock perspective-row:nth-child(2){--active--color:#ccc;--is_visible--cursor:normal}:host #columns_container #active_columns perspective-row:only-child{--active--color:#ccc;--is_visible--cursor:normal}:host #columns_container #inactive_columns perspective-row:not(.active){--row_draggable-border-width:0 0 1px 0;margin-bottom:2px;--row_draggable-border-color:transparent}:host #columns_container #active_columns,\n:host #columns_container #inactive_columns{border:none!important}:host ul{transition:background-color 0.2s,border-color 0.2s;outline:none}:host #side_panel #side_panel__actions{display:flex;flex-direction:column;flex-shrink:1000;justify-content:flex-start;position:relative;width:100%;margin:var(--column-container--margin,8px);min-height:36px}:host #side_panel #side_panel__actions #add-computed-expression:hover{background-color:rgba(0,0,0,0.05);border:5px solid transparent;border-left-width:0px;border-right-width:0px;margin-top:-5px;margin-bottom:-5px}:host #side_panel #side_panel__actions button.side_panel-action{align-items:center;align-content:center;background:none;border:none;display:flex;flex-direction:row;font-size:12px;padding-right:10px;-webkit-appearance:none;-moz-appearance:none;appearance:none}:host #side_panel #side_panel__actions button.side_panel-action span{margin-left:5px;font-size:15px}:host #side_panel #side_panel__actions button.side_panel-action:hover{cursor:pointer}:host .noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host #pivot_chart{background-color:var(--plugin--background,white)}:host #drop_target{border:var(--plugin--border,none)}:host #filters perspective-row{margin:0 0px 0 0;--filter_operator-display:inline-block;--filter_operand-display:inline-block}:host .plugin_information{color:var(--warning--color,inherit);display:flex;position:absolute;flex-direction:row;justify-content:flex-start;padding:0.5rem;width:100%;z-index:10000;transition:opacity 0.3s ease-out;opacity:1}:host .plugin_information.hidden{display:none;opacity:0}:host .plugin_information.plugin_information--warning{background:#ffca28}:host .plugin_information .plugin_information__text{font-size:12px;margin-right:0.25rem;display:flex;flex-wrap:wrap;align-items:center}:host .plugin_information .plugin_information__text:before{content:var(--overflow_hint--before);font-family:var(--overflow_hint--font-family);color:var(--overflow_hint--color);padding:var(--overflow_hint--padding);font-size:16px}:host .plugin_information .plugin_information__action{font-size:12px;text-decoration:underline;cursor:pointer;margin-right:0.25rem}:host .plugin_information .plugin_information__actions{margin-left:auto;display:flex;align-items:center;flex-direction:row;justify-content:flex-start}:host .plugin_information .plugin_information--overflow-hint-percent{font-weight:700}:host .plugin_information .plugin_information--overflow-hint{white-space:nowrap}:host #drop_target{background:var(--plugin--background,#fff)}:host #drop_target_inner h3{color:#aaa;font-weight:300}:host #close_button:before{font-family:var(--button--font-family,Arial);font-feature-settings:"liga";content:var(--close_button--before,"Close")}:host ul{border-bottom-width:1px;border-style:solid;border-color:var(--inactive--color,#C5C9D0);border-top-width:0px;border-left-width:0px;border-right-width:0px;font-size:12px;padding:var(--column-drop-container--padding,0px 10px 0px 10px)}:host select{border-radius:0;background-color:var(--select--background-color,white);border-bottom-width:1px;border-style:solid;border-color:var(--inactive--color,#C5C9D0);border-top-width:0px;border-left-width:0px;border-right-width:0px}:host select:focus{outline:none}:host input{border-bottom-width:1px;border-style:solid;border-color:var(--inactive--color,#C5C9D0);border-top-width:0px;border-left-width:0px;border-right-width:0px}:host input::placeholder{color:var(--inactive--color,#ccc)}:host option[value=""]{color:white!important}:host #app{background-color:inherit}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9sZXNzL3Njcm9sbGJhcnMubGVzcyIsImRlZmF1bHQubGVzcyIsInNyYy9sZXNzL2RlZmF1bHQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTttQ0FJUSxVQ2VSLENEbkJBO3lDQVVRLGVDYVIsQ0R2QkEsMEJBY1EsU0FBQSxDQUNBLFVDWVIsQ0QzQkEsZ0NBbUJRLDJEQ1dSLENEOUJBLGdDQXVCUSxpQkNVUixDRGpDQSxpQ0EyQlEsOEJDU1IsQ0RwQ0E7c0JBK0JRLGlHQUFBLENBR0EsNENBQUEsQ0FDQSxzQ0FBQSxDQUNBLDZCQUFBLENBQ0EscUNDT1IsQ0RMUTs0QkFDSSx5Q0NRWixDQ3BDQSxnQkFDSSxpQkFBQSxDQUNBLCtEQUFBLENBQ0EsY0FBQSxDQUNBLHVCQUFBLENBQ0Esa0JBQUEsQ0FDQSx3Q0FBQSxDQUNBLFlBQUEsQ0FDQSxxQkFBQSxDQUNBLHdCQUFBLENBQ0EsZUFBQSxDQUVBLG1FQUFBLENBQ0EseUJEcUNKLENDbENBLDBDQUNJLHVCQUFBLENBQ0Esa0JBQUEsQ0FDQSx5Q0RvQ0osQ0NqQ0EsaUNBQ0ksdUJBQUEsQ0FDQSxrQkFBQSxDQUNBLHlDQUFBLENBQ0EsNEZBQUEsQ0FDQSx5QkRtQ0osQ0NoQ0EseUNBQ0ksVUFBQSxDQUNBLGdCQUFBLENBQ0EscUJBQUEsQ0FDQSxrQkFBQSxDQUNBLFlEa0NKLENDL0JBLCtCQUNJLFNBQUEsQ0FDQSxpQ0FBQSxDQUNBLGdCQUFBLENBQ0EscUJBQUEsQ0FDQSxlQUFBLENBQ0Esb0NBQUEsQ0FDQSxrQkFBQSxDQUNBLDhEQUFBLENBQ0EsY0FBQSxDQUNBLG9CQUFBLENBQ0EscUNEaUNKLENDOUJBO21DQUVJLHVCRGdDSixDQzdCQSx3Q0FDSSxXQUFBLENBQ0EsU0FBQSxDQUNBLGdCQUFBLENBQ0EsZUFBQSxDQUNBLGlCRCtCSixDQzVCQSxZQUNJLG1CRDhCSixDQzNCQTsyQ0FFSSxpQkFBQSxDQUNBLE9BQUEsQ0FDQSx5Q0FBQSxDQUNBLGtEQUFBLENBQ0EsOENENkJKLENDWkEsb0NBQ0ksbUNEY0osQ0NYQSxzQ0FDSSxzQ0RhSixDQ1RBLHNCQUNJLGlDQUFBLENBQ0EsaUREWUosQ0NUQSx1REFFUSw0Q0RVUixDQ1pBLHVFQUlZLHdDQUFBLENBQ0EsNENBQUEsQ0FDQSx3REFBQSxDQUNBLHVDQUFBLENBQ0EsK0REV1osQ0NOQSxNQUNJLDRCQUFBLENBQ0Esd0JBQUEsQ0FDQSxhRFFKLENDWEEsaURBT1ksMEJET1osQ0NkQTtnREFZWSxZQUFBLENBQ0EscUJBQUEsQ0FDQSxVRE1aLENDcEJBLDhDQWtCWSxZREtaLENDdkJBLDJDQXNCWSxhREtaLENDM0JBLDJEQTBCZ0IsK0JESWhCLENDOUJBLG1EQStCWSxZREVaLENDakNBLHFFQW1DWSxlQUFBLENBQ0EsaUJBQUEsQ0FDQSxVRENaLENDdENBLGtDQTBDUSxrQ0FBQSxDQUNBLGlDQUFBLENBQ0Esd0NBQUEsQ0FDQSx1Q0FBQSxDQUNBLHdCQUFBLENBQ0EsNkJERFIsQ0M5Q0EsaUNBbURRLG1DQUFBLENBQ0EsbUNBQUEsQ0FDQSxtQ0RGUixDQ25EQSx5QkF5RFEscUJBQUEsQ0FDQSx3QkRIUixDQ3ZEQSx5Q0E2RFksYUFBQSxDQUNBLHFDREhaLENDM0RBLHlEQWlFZ0IsaUJBQUEsQ0FDQSxnRUFBQSxDQUlBLDJEQUFBLENBQ0Esc0NBQUEsQ0FDQSwrQkFBQSxDQUNBLDZDRE5oQixDQ25FQSxvRUE2RWdCLHdHRFBoQixDQ3RFQSxzRUFpRmdCLGtDRFJoQixDQ3pFQSxxRUFxRmdCLGtDQUFBLENBQ0EsbUJEVGhCLENDWVk7OEVBR1Esb0JBQUEsQ0FDQSwyQkRYcEIsQ0NlWSwrRUFFUSxvQkFBQSxDQUNBLDJCRGRwQixDQ3RGQSxvRUF5R2dCLG9CQUFBLENBQ0EsMkJEaEJoQixDQzFGQSx3RUErR1ksc0NBQUEsQ0FDQSxpQkFBQSxDQUNBLHdDRGxCWixDQy9GQTsyQ0FzSFkscUJEbkJaLENDbkdBLFNBMkhRLGtEQUFBLENBQ0EsWURyQlIsQ0N2R0EsdUNBb0lRLFlBQUEsQ0FDQSxxQkFBQSxDQUNBLGdCQUFBLENBQ0EsMEJBQUEsQ0FDQSxpQkFBQSxDQUNBLFVBQUEsQ0FDQSwwQ0FBQSxDQUNBLGVEMUJSLENDakhBLHNFQThJWSxpQ0FBQSxDQUNBLDRCQUFBLENBQ0EscUJBQUEsQ0FDQSxzQkFBQSxDQUNBLGVBQUEsQ0FDQSxrQkQxQlosQ0N6SEEsZ0VBMEpZLGtCQUFBLENBQ0Esb0JBQUEsQ0FDQSxlQUFBLENBQ0EsV0FBQSxDQUNBLFlBQUEsQ0FDQSxrQkFBQSxDQUtBLGNBQUEsQ0FDQSxrQkFBQSxDQUNBLHVCQUFBLENBQ0Esb0JBQUEsQ0FDQSxlRGxDWixDQ3RJQSxxRUEyS2dCLGVBQUEsQ0FDQSxjRGxDaEIsQ0NxQ1ksc0VBQ0ksY0RuQ2hCLENDN0lBLGdCQXNMUSwwQkFBQSxDQUVBLHdCQUFBLENBRUEsdUJBQUEsQ0FFQSxxQkFBQSxDQUVBLG9CQUFBLENBRUEsZ0JEckNSLENDM0pBLG1CQXFNUSxnRER2Q1IsQ0M5SkEsbUJBeU1RLGlDRHhDUixDQ2pLQSwrQkE2TVEsZ0JBQUEsQ0FDQSxzQ0FBQSxDQUNBLHFDRHpDUixDQ3RLQSwwQkFtTlEsbUNBQUEsQ0FDQSxZQUFBLENBQ0EsaUJBQUEsQ0FDQSxrQkFBQSxDQUNBLDBCQUFBLENBQ0EsY0FBQSxDQUNBLFVBQUEsQ0FDQSxhQUFBLENBQ0EsZ0NBQUEsQ0FDQSxTRDFDUixDQzRDUSxpQ0FDSSxZQUFBLENBQ0EsU0QxQ1osQ0M2Q1Esc0RBQ0ksa0JEM0NaLENDekxBLG9EQXdPWSxjQUFBLENBQ0Esb0JBQUEsQ0FDQSxZQUFBLENBQ0EsY0FBQSxDQUNBLGtCRDVDWixDQ2hNQSwyREFnUFksb0NBQUEsQ0FDQSw2Q0FBQSxDQUNBLGlDQUFBLENBQ0EscUNBQUEsQ0FDQSxjRDdDWixDQ3ZNQSxzREF3UFksY0FBQSxDQUNBLHlCQUFBLENBQ0EsY0FBQSxDQUNBLG9CRDlDWixDQzdNQSx1REErUFksZ0JBQUEsQ0FDQSxZQUFBLENBQ0Esa0JBQUEsQ0FDQSxrQkFBQSxDQUNBLDBCRC9DWixDQ3BOQSxxRUF1UVksZURoRFosQ0N2TkEsNkRBMlFZLGtCRGpEWixDQzFOQSxtQkFnUlEseUNEbkRSLENDN05BLDRCQW9SUSxVQUFBLENBQ0EsZURwRFIsQ0NqT0EsMkJBeVJRLDRDQUFBLENBQ0EsNEJBQUEsQ0FDQSwyQ0RyRFIsQ0N0T0EsU0FuQ0ksdUJBQUEsQ0FDQSxrQkFBQSxDQUNBLDJDQUFBLENBQ0Esb0JBQUEsQ0FDQSxxQkFBQSxDQUNBLHNCQUFBLENBOFRJLGNBQUEsQ0FDQSwrRERqRFIsQ0NoUEEsYUFxU1EsZUFBQSxDQUNBLHNEQUFBLENBelVKLHVCQUFBLENBQ0Esa0JBQUEsQ0FDQSwyQ0FBQSxDQUNBLG9CQUFBLENBQ0EscUJBQUEsQ0FDQSxzQkR3UkosQ0MxUEEsbUJBMlNRLFlEOUNSLENDN1BBLFlBbkNJLHVCQUFBLENBQ0Esa0JBQUEsQ0FDQSwyQ0FBQSxDQUNBLG9CQUFBLENBQ0EscUJBQUEsQ0FDQSxzQkRtU0osQ0NyUUEseUJBbVRRLGlDRDNDUixDQ3hRQSx1QkF1VFEscUJENUNSLENDM1FBLFdBMlRRLHdCRDdDUiIsImZpbGUiOiJkZWZhdWx0Lmxlc3MifQ== */')((Xt((yi=class extends bi{constructor(){super(),this._register_debounce_instance(),this._show_config=!0,this._show_warnings=!0,this.__render_times=[],this._resize_handler=this.notifyResize.bind(this),this._computed_expression_parser=Wn,this._edit_port=null,this._edit_port_lock=Ne(),window.addEventListener("resize",this._resize_handler)}connectedCallback(){0===Object.keys(ke.getInstance()).length&&n.g.registerPlugin("debug",{name:"Debug",create:async function(t){const e=await this._view.to_csv({config:{delimiter:"|"}}),n=this._render_time();Qt((t=>Nt`
        <pre style="margin:0;overflow:scroll;position:absolute;width:100%;height:100%">${t}</pre>
    `)(e),t),n()},selectMode:"toggle",resize:function(){},delete:function(){}}),this.toggleAttribute("settings",!1),this._register_ids(),this._register_callbacks(),this._register_view_options(),this._check_loaded_table()}sort(t){null!=t&&0!==t.length||(this.hasAttribute("sort")&&this.removeAttribute("sort"),t=[]);var e=this._sort.querySelector("ul");this._update_column_list(t,e,((t,e)=>{let n,i="asc";return Array.isArray(t)&&(i=t[1],t=t[0]),e.includes(t)&&(n=t),this._new_row(t,!1,!1,!1,i,n)}),((t,e)=>Array.isArray(t)?e.getAttribute("name")===t[0]&&e.getAttribute("sort-order")===t[1]:e.getAttribute("name")===t)),this.dispatchEvent(new Event("perspective-config-update")),this._debounce_update()}columns(t){null!=t&&0!==t.length||(this.hasAttribute("columns")&&(this._initial_col_order?this.setAttribute("columns",JSON.stringify(this._initial_col_order)):this.removeAttribute("columns")),t=(this._initial_col_order||[]).slice()),this._update_column_view(t,!0),this.dispatchEvent(new Event("perspective-config-update")),this._debounce_update()}"computed-columns"(t){const e=this._set_updating();(async()=>{if("none"!==this._computed_expression_widget.style.display&&this._computed_expression_widget._close_expression_widget(),null==t||0===t.length){if(this.hasAttribute("computed-columns")){this.removeAttribute("computed-columns");const t=this._get_view_parsed_computed_columns();return this._reset_computed_column_view(t),this.removeAttribute("parsed-computed-columns"),void e()}t=[]}let n=[];for(const e of t)"string"==typeof e?this._computed_expression_parser.is_initialized&&(n=n.concat(this._computed_expression_parser.parse(e))):n.push(e);let i={};if(this._table){i=await this._table.computed_schema(n);const t=await this._validate_parsed_computed_columns(n,i);if(t.length!==n.length){const e=[];for(let i=0;i<n.length;i++)(i>t.length-1||n[i].column!==t[i].column)&&e.push(n[i]);console.warn("Could not apply these computed columns:",JSON.stringify(e))}n=t}const r=this._get_view_parsed_computed_columns(),o=this._diff_computed_column_view(r,n);this._reset_computed_column_view(o),this.setAttribute("parsed-computed-columns",JSON.stringify(n)),this._update_computed_column_view(i),this.dispatchEvent(new Event("perspective-config-update")),await this._debounce_update(),e()})()}aggregates(t){null!=t&&0!==Object.keys(t).length||(this.hasAttribute("aggregates")&&this.removeAttribute("aggregates"),t={}),this._get_view_dom_columns().map((e=>{let n=t[e.getAttribute("name")];n&&e.setAttribute("aggregate",Array.isArray(n)?JSON.stringify(n):n)})),this.dispatchEvent(new Event("perspective-config-update")),this._debounce_update()}filters(t){if(null!=t&&0!==t.length||(this.hasAttribute("filters")&&this.removeAttribute("filters"),t=[]),!this._updating_filter){var e=this._filters.querySelector("ul");this._update_column_list(t,e,((t,e)=>{const n=JSON.stringify({operator:t[1],operand:t[2]}),i=t[0];let r;return e.includes(i)&&(r=i),this._new_row(i,void 0,void 0,n,void 0,r)}),((t,e)=>e.getAttribute("name")===t[0]&&e.getAttribute("filter")===JSON.stringify({operator:t[1],operand:t[2]})))}this.dispatchEvent(new Event("perspective-config-update")),this._debounce_update()}set plugin(t){if("null"===t||null==t)return void this.setAttribute("plugin",this._vis_selector.options[0].value);this.innerHTML="";const e=Object.keys(ke.getInstance());if(this.hasAttribute("plugin")){let t=this.getAttribute("plugin");if(-1===e.indexOf(t)){const n=e.find((e=>e.indexOf(t)>-1));n?(console.warn(`Unknown plugin "${t}", using "${n}"`),this.setAttribute("plugin",n)):(console.error(`Unknown plugin "${t}"`),this.setAttribute("plugin",this._vis_selector.options[0].value))}else this._vis_selector.value!==t&&(this._vis_selector.value=t,this._vis_selector_changed()),this._set_row_styles(),this._set_column_defaults(),this.dispatchEvent(new Event("perspective-config-update"))}else this.setAttribute("plugin",this._vis_selector.options[0].value)}"column-pivots"(t){null!=t&&0!==t.length||(this.hasAttribute("column-pivots")&&this.removeAttribute("column-pivots"),t=[]);const e=this._column_pivots.querySelector("ul");this._update_column_list(t,e,((t,e)=>{let n;return e.includes(t)&&(n=t),this._new_row(t,void 0,void 0,void 0,void 0,n)})),this.dispatchEvent(new Event("perspective-config-update")),this._debounce_update()}"row-pivots"(t){null!=t&&0!==t.length||(this.hasAttribute("row-pivots")&&this.removeAttribute("row-pivots"),t=[]);const e=this._row_pivots.querySelector("ul");this._update_column_list(t,e,((t,e)=>{let n;return e.includes(t)&&(n=t),this._new_row(t,void 0,void 0,void 0,void 0,n)})),this.dispatchEvent(new Event("perspective-config-update")),this._debounce_update()}set editable(t){"null"===t?this.hasAttribute("editable")&&this.removeAttribute("editable"):this.toggleAttribute("editable",!0),this._debounce_update({force_update:!0}),this.dispatchEvent(new Event("perspective-config-update"))}set throttle(t){"null"===t&&this.hasAttribute("throttle")&&this.removeAttribute("throttle"),this._calculate_throttle_timeout()}set selectable(t){"null"===t?this.hasAttribute("selectable")&&this.removeAttribute("selectable"):this.toggleAttribute("selectable",!0),this._debounce_update({force_update:!0}),this.dispatchEvent(new Event("perspective-config-update"))}get table(){return this._table}get view(){return this._view}async load(t){let e;if(t instanceof Promise)this._vieux.load(t),e=await t;else{if("table"!==t.type)throw new Error(`Unrecognized input type ${typeof t}.  Please use a \`perspective.Table()\``);this._vieux.load(Promise.resolve(t)),e=t}this.isConnected?await this._load_table(e):this._table=e}async notifyResize(t){await this._check_responsive_layout()||document.hidden||!this.offsetParent||await this._plugin.resize.call(this,t)}clone(t){this._load_table(t.table),this.restore(t.save())}delete(){let t=this._clear_state();return this._plugin.delete&&this._plugin.delete.call(this),window.removeEventListener("resize",this._resize_handler),t}restyleElement(){this._restyle_plugin()}save(){let t={};const e=new Set(xi);for(let n=0;n<this.attributes.length;n++){let i=this.attributes[n];e.has(i.name)&&(""===i.value?t[i.name]=!0:"plugin"!==i.name&&void 0!==i.value&&null!==i.value?t[i.name]=JSON.parse(i.value):t[i.name]=i.value,e.delete(i.name))}for(const n of e)t[n]=null;return this._plugin.save&&(t.plugin_config=this._plugin.save.call(this)),t}async restore(t){"string"==typeof t&&(t=JSON.parse(t));for(const e of xi)if(t.hasOwnProperty(e)){let n=t[e];!0===n?this.toggleAttribute(e,!0):null!=n&&!1!==n?("string"!=typeof n&&(n=JSON.stringify(n)),this.setAttribute(e,n)):this.removeAttribute(e)}this._plugin.restore&&t.plugin_config&&this._plugin.restore.call(this,t.plugin_config),await this._debounce_update()}async flush(){for(await new Promise(setTimeout);this.hasAttribute("updating");)await this._updating_promise}reset(){var t;this.removeAttribute("row-pivots"),this.removeAttribute("column-pivots"),this.removeAttribute("filters"),this.removeAttribute("sort"),this._initial_col_order?this.setAttribute("columns",JSON.stringify(this._initial_col_order)):this.removeAttribute("columns"),this.setAttribute("plugin",Object.keys(ke.getInstance())[0]),null===(t=this._plugin.restore)||void 0===t||t.call(this,{}),this.dispatchEvent(new Event("perspective-config-update"))}async download(t=!1){const{download_flat:e,download:n}=await $t;t?await e(this._table):await n(this._view)}async copy(t=!1){const{copy_flat:e,copy:n}=await $t;t?await e(this._table):await n(this._view)}async toggleConfig(t){await this._vieux.toggle_config(t)}async getEditPort(){return this._edit_port_lock}}).prototype,"sort",[Re],Object.getOwnPropertyDescriptor(yi.prototype,"sort"),yi.prototype),Xt(yi.prototype,"columns",[Re],Object.getOwnPropertyDescriptor(yi.prototype,"columns"),yi.prototype),Xt(yi.prototype,"computed-columns",[Re],Object.getOwnPropertyDescriptor(yi.prototype,"computed-columns"),yi.prototype),Xt(yi.prototype,"aggregates",[Te],Object.getOwnPropertyDescriptor(yi.prototype,"aggregates"),yi.prototype),Xt(yi.prototype,"filters",[Re],Object.getOwnPropertyDescriptor(yi.prototype,"filters"),yi.prototype),Xt(yi.prototype,"column-pivots",[Re],Object.getOwnPropertyDescriptor(yi.prototype,"column-pivots"),yi.prototype),Xt(yi.prototype,"row-pivots",[Re],Object.getOwnPropertyDescriptor(yi.prototype,"row-pivots"),yi.prototype),Xt(yi.prototype,"notifyResize",[Se],Object.getOwnPropertyDescriptor(yi.prototype,"notifyResize"),yi.prototype),yi))},2073:(t,e,n)=>{const i=n(4907).Z;function r(t){return t&&"object"==typeof t&&!Array.isArray(t)}function o(t,...e){if(!e.length)return t;const n=e.shift();if(r(t)&&r(n))for(const e in n)r(n[e])?(t[e]||Object.assign(t,{[e]:{}}),o(t[e],n[e])):Object.assign(t,{[e]:n[e]});return o(t,...e)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){const n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){const e=t.exports.get_type_config(n.type);return Object.assign(e,n),e}return n},n.g.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(t){n.g.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),n.g.__PERSPECTIVE_CONFIG__=o(i,t)},t.exports.get_config=function(){return n.g.__PERSPECTIVE_CONFIG__||(n.g.__PERSPECTIVE_CONFIG__=o(i,n.g.__TEMPLATE_CONFIG__||{})),n.g.__PERSPECTIVE_CONFIG__}},4907:t=>{t.exports.Z={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n(5661)})()}));
//# sourceMappingURL=perspective-viewer.js.map